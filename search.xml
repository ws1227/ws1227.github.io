<?xml version="1.0" encoding="utf-8"?>
<search>
  
    
    <entry>
      <title></title>
      <url>%2Fposts%2F0%2F</url>
      <content type="text"><![CDATA[title: iOS11å¯¼èˆªæ è‡ªå®šä¹‰æŒ‰é’®åç§»é—®é¢˜date: 2017-10-26 17:25:04 tags:##å…³äºŽiOS11å¯¼èˆªæ è‡ªå®šä¹‰æŒ‰é’®åç§»é—®é¢˜ å…ˆçœ‹iOS10ä¹‹ä¸‹è¿”å›žæŒ‰é’®æ­£å¸¸çš„å›¾ ä¸‹è¾¹æ˜¯iOS11ä¸‹è¿”å›žæŒ‰é’®åç¦»çš„å›¾ iOS10ä¹‹å‰æƒ³å¿…å¤§éƒ¨åˆ†éƒ½æ˜¯ç”¨ä»¥ä¸‹ä»£ç è§£å†³åç¦»é—®é¢˜çš„ 12345678UIButton *leftButton = [UIButton buttonWithType:UIButtonTypeCustom]; leftButton.frame = CGRectMake(0, 0, 44, 44); [leftButton setImage:[UIImage imageNamed:image] forState:UIControlStateNormal]; [leftButton setImage:[UIImage imageNamed:selectImage] forState:UIControlStateHighlighted]; UIBarButtonItem *spacer = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil]; spacer.width = -10; UIBarButtonItem *leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:leftButton]; self.navigationItem.leftBarButtonItems=@[spacer,leftBarButtonItem]; å‡çº§åŽæ— è®ºwidthæ€Žä¹ˆæ”¹å˜å·²ç»å¤±æ•ˆäº†äºŽæ˜¯æŸ¥äº†ä¸‹æ‰¾åˆ°å¦‚ä¸‹è§£å†³åŠžæ³•è¿‡æ”¹å˜æŒ‰é’®çš„ contentEdgeInsetså’ŒimageEdgeInsetsçš„å€¼æˆåŠŸæ”¹å˜äº†æŒ‰é’®çš„åç§»é—®é¢˜ï¼Œåªè®¾ç½®contentEdgeInsetsä¹Ÿå¯ä»¥ã€‚12345678UIButton *leftButton = [UIButton buttonWithType:UIButtonTypeCustom]; leftButton.frame = CGRectMake(0, 0, 44, 44); [leftButton setImage:[UIImage imageNamed:image] forState:UIControlStateNormal]; [leftButton setImage:[UIImage imageNamed:selectImage] forState:UIControlStateHighlighted]; leftButton.contentEdgeInsets =UIEdgeInsetsMake(0, -16,0, 0); leftButton.imageEdgeInsets =UIEdgeInsetsMake(0, -11,0, 0); UIBarButtonItem *leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:leftButton]; self.navigationItem.leftBarButtonItems=@[leftBarButtonItem]; ç”¨ä»¥ä¸Šä»£ç å³å¯è§£å†³é—®é¢˜ æˆ–è€…åƒæˆ‘ä¸€æ ·ä¸æ”¹ä»¥å‰çš„æ–¹æ³•åªåŠ äº†åˆ¤æ–­å¤„ç† ``` objectivecif (@available(iOS 11.0, *)) { leftButton.contentEdgeInsets =UIEdgeInsetsMake(0, -16,0, 0); leftButton.imageEdgeInsets =UIEdgeInsetsMake(0, -11,0, 0); self.navigationItem.leftBarButtonItems=@[leftBarButtonItem]; }else{ self.navigationItem.leftBarButtonItems=@[spacer,leftBarButtonItem]; } ```-]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[pythonä¹‹HTMLParserè§£æžHTMLæ–‡æ¡£]]></title>
      <url>%2Fposts%2F4627%2F</url>
      <content type="text"><![CDATA[###pythonä¹‹HTMLParserè§£æžHTMLæ–‡æ¡£ HTMLParseræ˜¯Pythonè‡ªå¸¦çš„æ¨¡å—ï¼Œä½¿ç”¨ç®€å•ï¼Œèƒ½å¤Ÿå¾ˆå®¹æ˜“çš„å®žçŽ°HTMLæ–‡ä»¶çš„åˆ†æžã€‚æœ¬æ–‡ä¸»è¦ç®€å•è®²ä¸€ä¸‹HTMLParserçš„ç”¨æ³•. ä½¿ç”¨æ—¶éœ€è¦å®šä¹‰ä¸€ä¸ªä»Žç±»HTMLParserç»§æ‰¿çš„ç±»ï¼Œé‡å®šä¹‰å‡½æ•°ï¼š handle_starttag( tag, attrs) handle_startendtag( tag, attrs) handle_endtag( tag) handle_data(data) 1. èŽ·å–æ ‡ç­¾å±žæ€§tagæ˜¯çš„htmlæ ‡ç­¾ï¼Œattrsæ˜¯ (å±žæ€§ï¼Œå€¼)å…ƒç»„(tuple)çš„åˆ—è¡¨(list). å¦‚ä¸€ä¸ªæ ‡ç­¾ä¸ºï¼š é‚£ä¹ˆå®ƒçš„attrsåˆ—è¡¨ä¸º[(â€˜typeâ€™, â€˜hiddenâ€™), (â€˜nameâ€™, â€˜NXXâ€™), (â€˜idâ€™, â€˜IDXXâ€™), (â€˜valueâ€™, â€˜VXXâ€™)]HTMLParserè‡ªåŠ¨å°†tagå’Œattrséƒ½è½¬ä¸ºå°å†™ã€‚ ä¸‹é¢ç»™å‡ºçš„ä¾‹å­æŠ½å–äº†htmlä¸­çš„æ‰€æœ‰é“¾æŽ¥ï¼š 1234567891011121314151617181920212223242526from HTMLParser import HTMLParser class MyHTMLParser(HTMLParser): def __init__(self): HTMLParser.__init__(self) self.links = [] def handle_starttag(self, tag, attrs): #print "Encountered the beginning of a %s tag" % tag if tag == "a": if len(attrs) == 0: pass else: for (variable, value) in attrs: if variable == "href": self.links.append(value) if __name__ == "__main__": html_code = """ &lt;a href="www.google.com"&gt; google.com&lt;/a&gt; &lt;A Href="www.pythonclub.org"&gt; PythonClub &lt;/a&gt; &lt;A HREF = "www.sina.com.cn"&gt; Sina &lt;/a&gt; """ hp = MyHTMLParser() hp.feed(html_code) hp.close() print(hp.links) è¾“å‡ºä¸ºï¼š [â€˜www.google.comâ€™, â€˜www.pythonclub.orgâ€™, â€˜www.sina.com.cnâ€™] å¦‚æžœæƒ³æŠ½å–å›¾å½¢é“¾æŽ¥ï¼š&lt;img src=&#39;http://www.google.com/intl/zh-CN_ALL/images/logo.gif&#39; /&gt;å°±è¦é‡å®šä¹‰ handle_startendtag( tag, attrs) å‡½æ•° 2. èŽ·å–æ ‡ç­¾å†…å®¹ test1.htmlæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š12345678&lt;html&gt;&lt;head&gt;&lt;title&gt; XHTML ä¸Ž HTML 4.01 æ ‡å‡†æ²¡æœ‰å¤ªå¤šçš„ä¸åŒ&lt;/title&gt;&lt;/head&gt;&lt;body&gt;i love you&lt;/body&gt;&lt;/html&gt; 2.1 ç¬¬ä¸€ä¸ªä¾‹å­123456789101112131415161718192021import HTMLParser class TitleParser(HTMLParser.HTMLParser): def __init__(self): HTMLParser.HTMLParser.__init__(self) # self.taglevels=[] self.handledtags = [&apos;title&apos;,&apos;body&apos;] self.processing = None def handle_starttag(self,tag,attrs): print &apos;--------------&apos; print &apos;handle start func&apos;,tag def handle_endtag(self,tag): print &apos;================&apos; print &apos;handle end func&apos;,tag if __name__ == &apos;__main__&apos;: fd=open(&apos;test1.html&apos;) tp=TitleParser() tp.feed(fd.read()) è¿è¡Œç»“æžœï¼š 12345678910111213141516--------------handle start func html--------------handle start func head--------------handle start func title=======================handle end func title=======================handle end func head--------------handle start func body=======================handle end func body=======================handle end func html ç›¸ä¿¡å¤§å®¶å·²ç»çœ‹å‡ºæ¥äº†ï¼Œè§£æžæ—¶ç¢°åˆ°&lt;&gt;ï¼Œè‡ªåŠ¨è°ƒç”¨handle_starttag()ï¼›ç¢°åˆ°&lt;/&gt;ï¼Œè‡ªåŠ¨è°ƒç”¨handle_endtag() 2.2 æ·»åŠ handle_dataæ–¹æ³•1234567891011121314151617181920212223242526272829import HTMLParser class TitleParser(HTMLParser.HTMLParser): def __init__(self): HTMLParser.HTMLParser.__init__(self) # self.taglevels=[] self.handledtags = [&apos;title&apos;,&apos;body&apos;] self.processing = None def handle_starttag(self,tag,attrs): print &apos;--------------&apos; print &apos;handle start func&apos;,tag def handle_data(self,data): print &apos;####&apos; print &apos;handle data func&apos; if data == &apos;\n&apos;: print r&apos;\n&apos; else: print data, def handle_endtag(self,tag): print &apos;=======================&apos; print &apos;handle end func&apos;,tag if __name__ == &apos;__main__&apos;: fd=open(&apos;test1.html&apos;) tp=TitleParser() tp.feed(fd.read()) è¿è¡Œç»“æžœï¼š 12345678910111213141516171819202122232425262728293031323334353637--------------handle start func html####handle data func\n--------------handle start func head####handle data func\n--------------handle start func title####handle data func XHTML ä¸Ž HTML 4.01 æ ‡å‡†æ²¡æœ‰å¤ªå¤šçš„ä¸åŒ =======================handle end func title####handle data func\n=======================handle end func head####handle data func\n--------------handle start func body####handle data func i love you=======================handle end func body####handle data func\n=======================handle end func html è¯´æ˜Žï¼š æ¯ä¸€ä¸ªæ ‡ç­¾ï¼Œæ— è®º&lt;&gt; è¿˜æ˜¯&lt;/&gt;ï¼Œå‡ä¼šè°ƒç”¨handle_data() htmlä¸­ç¬¬ä¸€è¡Œã€ç¬¬äºŒè¡Œåˆ†åˆ«ä¸ºå’Œï¼ŒåŽé¢æ— å…·ä½“æ•°æ®ï¼Œåªæœ‰å›žè½¦æ¢è¡Œï¼Œæ‰€ç”¨è°ƒç”¨handle_data()ï¼Œæ‰“å°ç»“æžœä¸ºæ¢è¡Œï¼›åŒç†ã€‚ 2.2.1 è§£æžéœ€è¦çš„å†…å®¹123456789101112131415161718192021222324252627import HTMLParser class TitleParser(HTMLParser.HTMLParser): def __init__(self): HTMLParser.HTMLParser.__init__(self) self.handledtags = [&apos;title&apos;,&apos;body&apos;] self.processing = None self.data = [] def handle_starttag(self,tag,attrs): if tag in self.handledtags: self.processing = tag def handle_data(self,data): if self.processing: self.data.append(data) def handle_endtag(self,tag): if tag == self.processing: self.processing = None if __name__ == &apos;__main__&apos;: fd = open(&apos;test1.html&apos;) tp = TitleParser() tp.feed(fd.read()) for each in tp.data: print each è¿è¡Œç»“æžœï¼š XHTML ä¸Ž HTML 4.01 æ ‡å‡†æ²¡æœ‰å¤ªå¤šçš„ä¸åŒ i love you 2.3 è§£æžè±†ç“£çƒ­é—¨ç”µå½±å®žä¾‹1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465from html.parser import HTMLParserfrom urllib import requestimport ssl# å–æ¶ˆssléªŒè¯ssl._create_default_https_context = ssl._create_unverified_contextclass MyHTMLParser(HTMLParser): def __init__(self): HTMLParser.__init__(self) self.movies = [] def handle_starttag(self, tag, attrs): print('star: &lt;%s&gt; å±žæ€§ %s' % (tag ,attrs)) def _attr(attrlist, attrname): for each in attrlist: if attrname == each[0]: return each[1] if tag == 'li' and _attr(attrs, 'data-title'): movie = &#123;&#125; movie['actors'] = _attr(attrs, 'data-actors') movie['actors'] = _attr(attrs, 'data-actors') movie['director'] = _attr(attrs, 'data-director') movie['duration'] = _attr(attrs, 'data-dutation') movie['title'] = _attr(attrs, 'data-title') movie['rate'] = _attr(attrs, 'data-rate') print(_attr(attrs, 'data-actors')) self.movies.append(movie) def handle_endtag(self, tag): print('end: &lt;/%s&gt;' % tag) def handle_startendtag(self, tag, attrs): print('startendtag :&lt;%s/&gt; ç»“å°¾å±žæ€§ %s' % (tag,attrs)) def handle_data(self, data): print('æ‰€æœ‰data %s' % data) def handle_comment(self, data): print('&lt;!--', data, '--&gt;') def handle_entityref(self, name): print('&amp;%s;' % name) def handle_charref(self, name): print('&amp;#%s;' % name)def movieparser(url): myparser = MyHTMLParser() with request.urlopen(url) as f: data = f.read().decode('utf-8') myparser.feed(data) myparser.close() return myparser.moviesif __name__ == '__main__': url = 'https://movie.douban.com/' movies = movieparser(url) for each in movies: print('%(title)s|%(rate)s|%(actors)s|%(director)s|%(duration)s' % each) è¿è¡Œç»“æžœï¼š 12345678910111213141516171819202122232425262728293031323334353637çŒ©çƒå´›èµ·3ï¼šç»ˆæžä¹‹æˆ˜ War for the Planet of the Apes|7.1|å®‰è¿ªÂ·ç‘Ÿé‡‘æ–¯ / ä¼è¿ªÂ·å“ˆé‡Œæ£® / å²è’‚å¤«Â·èŒ¨æ©|é©¬ç‰¹Â·é‡Œå¤«æ–¯|NoneçŽ‹ç‰Œä¿é•– The Hitman&apos;s Bodyguard|7.3|ç‘žæ©Â·é›·è¯ºå…¹ / å¡žç¼ªå°”Â·æ°å…‹é€Š / åŠ é‡ŒÂ·å¥¥å¾·æ›¼|å¸•ç‰¹é‡Œå…‹Â·ä¼‘æ–¯|Noneç¾žç¾žçš„é“æ‹³||è‰¾ä¼¦ / é©¬ä¸½ / æ²ˆè…¾|å®‹é˜³|Noneçœ‹ä¸è§çš„å®¢äºº Contratiempo|8.7|é©¬é‡Œå¥¥Â·å¡è¨æ–¯ / é˜¿å¨œÂ·ç“¦æ ¼çº³ / ä½•å¡žÂ·ç§‘ç½—çº³|å¥¥é‡Œå¥¥å°”Â·ä¿ç½—|Noneç¼çº«æœºä¹é˜Ÿ||å¤§é¹ / ä¹”æ‰ / å¨œæ‰Ž|å¤§é¹|Noneèœ˜è››ä¾ ï¼šè‹±é›„å½’æ¥ Spider-Man: Homecoming|7.5|æ±¤å§†Â·éœå…°å¾· / å°ç½—ä¼¯ç‰¹Â·å”å°¼ / çŽ›ä¸½èŽŽÂ·æ‰˜æ¢…|ä¹”Â·æ²ƒèŒ¨|Noneè‹±ä¼¦å¯¹å†³ The Foreigner||æˆé¾™ / çš®å°”æ–¯Â·å¸ƒé²æ–¯å— / åˆ˜æ¶›|é©¬ä¸Â·åŽè´å°”|Noneç©ºå¤©çŒŽ||æŽæ™¨ / èŒƒå†°å†° / çŽ‹åƒæº|æŽæ™¨|Noneè¿½é¾™ è¿½é¾||ç”„å­ä¸¹ / åˆ˜å¾·åŽ / å§œçš“æ–‡|çŽ‹æ™¶|Noneæ‰˜é©¬æ–¯å¤§ç”µå½±ä¹‹äº†ä¸èµ·çš„æ¯”èµ› Thomas &amp; Friends: The Great Race||é©¬å…‹Â·èŽ«æ‹‰æ ¹ / å¤§å«Â·æ‹œå¾·æ‹‰ / å¥¥åˆ©ç»´å¨…Â·ç§‘å°”æ›¼|å¤§å«Â·æ–¯ç‰¹ç™»|NoneæƒŠå¤©è§£å¯† Unlocked|5.7|åŠ³ç±³Â·æ‹‰ä½©æ–¯ / æ‰˜å¦®Â·ç§‘èŽ±ç‰¹ / å¥¥å…°å¤šÂ·å¸ƒé²å§†|è¿ˆå…‹å°”Â·è‰¾æ™®ç‰¹|Noneæ•¦åˆ»å°”å…‹ Dunkirk|8.6|è²æ©Â·æ€€ç‰¹æµ·å¾· / æ±¤å§†Â·æ ¼æž—-å¡å°¼ / æ°å…‹Â·åŠ³ç™»|å…‹é‡Œæ–¯æ‰˜å¼—Â·è¯ºå…°|Noneæˆ˜ç‹¼2|7.4|å´äº¬ / å¼—å…°å…‹Â·æ ¼é‡Œç½— / å´åˆš|å´äº¬|Noneæå«è€…||ç™½æ© / å•æ˜Ÿè¾° / èµ«å­é“­|å»–å¸Œ|Noneåˆ€å‰‘ç¥žåŸŸï¼šåºåˆ—ä¹‹äº‰ åŠ‡å ´ç‰ˆ ã‚½ãƒ¼ãƒ‰ã‚¢ãƒ¼ãƒˆãƒ»ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ -ã‚ªãƒ¼ãƒ‡ã‚£ãƒŠãƒ«ãƒ»ã‚¹ã‚±ãƒ¼ãƒ«|7.2|æ¾å†ˆç¥¯ä¸ž / æˆ·æ¾é¥ / ä¼Šè—¤åŠ å¥ˆæƒ |ä¼Šè—¤æ™ºå½¦|Noneæžè‡´è¿½å‡»||å¥¥å…°å¤šÂ·å¸ƒé²å§† / å´ç£Š / ä»»è¾¾åŽ|Charles|Noneå¤©æ¢¯ï¼šè”¡å›½å¼ºçš„è‰ºæœ¯|8.6|è”¡å›½å¼º / è”¡æ–‡æ‚  / è”¡æ–‡æµ©|å‡¯æ–‡Â·éº¦å…‹å”çº³|Noneæ˜†å¡”ï¼šåè½¬æ˜Ÿçƒ||æŽæ­£ç¿” / æ´ªæµ·å¤© / é™¶å…¸|æŽç‚¼|Noneç†æŸ¥å¤§å†’é™© Richard the Stork||å°¼ç§‘èŽ±ç‰¹Â·å…‹é›·æ¯”èŒ¨ / Marc / Jason|æ‰˜æ¯”Â·æ ¼æ©ç§‘å°”|Noneé“¶é­‚ éŠ€é­‚|7.4|å°æ —æ—¬ / è…ç”°å°†æ™– / æ¡¥æœ¬çŽ¯å¥ˆ|ç¦ç”°é›„ä¸€|Noneç”»å®¤æƒŠé­‚||ç½—ç¿” / æ¨æ¬£ / é™ˆç¾Žè¡Œ|é‚¢åš|Noneé’¢é“é£žé¾™ä¹‹å†è§å¥¥ç‰¹æ›¼||ä¾¯å‹‡ / å¤§å¼ ä¼Ÿ / é‡‘æ™¨|çŽ‹å·|Noneæµ·è¾¹çš„æ›¼å½»æ–¯ç‰¹ Manchester by the Sea|8.6|å¡è¥¿Â·é˜¿å¼—èŽ±å…‹ / å¢å¡æ–¯Â·èµ«å¥‡æ–¯ / ç±³æ­‡å°”Â·å¨å»‰å§†æ–¯|è‚¯å°¼æ–¯Â·ç½—çº³æ ¹|Noneæ˜Ÿé™…ç‰¹å·¥ï¼šåƒæ˜Ÿä¹‹åŸŽ ValÃ©rian and the City of a Thousand Planets|7.2|æˆ´æ©Â·å¾·å“ˆæ© / å¡æ‹‰Â·è¿ªç“¦ä¼Š / å…‹é‡Œå¤«Â·æ¬§æ–‡|å•å…‹Â·è´æ¾|Noneçº¯æ´å¿ƒçµÂ·é€æ¢¦æ¼”è‰ºåœˆ|2.0|æœ±å“²å¥ / æŽå½¦æ¼« / é™ˆæ€ç€š|æ¯•å¿—é£ž|Noneå»ºå†›å¤§ä¸š||åˆ˜çƒ¨ / æœ±äºšæ–‡ / é»„å¿—å¿ |åˆ˜ä¼Ÿå¼º|Noneå£°ä¹‹å½¢ è²ã®å½¢|6.9|å…¥é‡Žè‡ªç”± / æ—©è§æ²™ç»‡ / æ¾å†ˆèŒ‰ä¼˜|å±±ç”°å°šå­|Noneåœ°çƒï¼šç¥žå¥‡çš„ä¸€å¤© Earth: One Amazing Day|8.2|æˆé¾™ / ç½—ä¼¯ç‰¹Â·é›·å¾·ç¦|ç†æŸ¥å¾·Â·æˆ´å°”|Noneå¥‹æ–—|7.5|é™ˆç‡•ç‡• / éƒ‘å›é‡Œ / è¢ä¸›ç¾Ž|å²ä¸œå±±|Noneè°œè¯||è‹—ä¾¨ä¼Ÿ / è¢å˜‰æ• / æ¡‘å¹³|æ±ªæ´‹|Noneåˆæ‹æ—¶å…‰||é»„åˆå— / é‚“ç´«è¡£ / å¶å±±è±ª|æ®·å›½å›|Noneç–¯ç‹‚æ—…ç¨‹||åˆ˜äº® / ç™½é¸½ / é™†è¿›|é¾™é‡Ž|Noneåä¸‡ä¸ªå†·ç¬‘è¯2|7.7|å±±æ–° / éƒç¥¥æµ· / æŽå§æ´|å¢æ’å®‡|Noneå¿ƒç†ç½ª|5.4|å»–å‡¡ / æŽæ˜“å³° / ä¸‡èŒœ|è°¢ä¸œç‡Š|Noneé­”éƒ½çˆ±ä¹‹åäºŒæ˜Ÿåº§||æŽæ¢“æºª / å­™ç«‹æ´‹ / é©¬ç’|å”æ˜±|Noneè¯·å‹¿é è¿‘||é©¬å¯ / æŽæ¯“èŠ¬ / éƒ‘é›…æ–‡|å¼ æ˜¾|Noneä¸‰ç”Ÿä¸‰ä¸–åé‡Œæ¡ƒèŠ±|4.0|åˆ˜äº¦è² / æ¨æ´‹ / ç½—æ™‹|èµµå°ä¸|None]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ç³»ç»Ÿæ€§å­¦ä¹ Moya+Alamofire+RxSwift+ObjectMapperçš„é…åˆä½¿ç”¨]]></title>
      <url>%2Fposts%2F10604%2F</url>
      <content type="text"><![CDATA[ç³»ç»Ÿæ€§å­¦ä¹ Moya+Alamofire+RxSwift+ObjectMapperçš„é…åˆä½¿ç”¨ ä¸»è¦æ˜¯ç»ƒä¹ Moyaçš„ç†Ÿç»ƒä½¿ç”¨ï¼Œå…¨æ–‡æ¶‰åŠåˆ°CYLTabBarControlleræ­å»ºç®€å•æ˜“ç”¨çš„æ¡†æž¶ã€Swiftå’ŒOCäº’ç›¸è°ƒç”¨ã€FLEXæ˜¾ç¤ºç•Œé¢å±‚çº§UIçš„å±žæ€§ã€ObjectMapperè§£æžæ•°æ®ã€KingfisheråŠ è½½ç½‘ç»œå›¾ç‰‡ã€MBProgressHUDèžåˆåˆ°è¯·æ±‚é‡Œè‡ªåŠ¨æ˜¾ç¤ºä¸Žéšè—è¯·æ±‚ç­‰å¾…ã€MJRefreshä½œä¸ºåˆ·æ–°ç®€å•å†™äº†ä¸€ä¸ªç±»åˆ«ã€SDCycleScrollViewæ˜¾ç¤ºè½®æ’­å›¾ã€Thençš„ä½¿ç”¨,æœ€ç»ˆå®žçŽ°äº†ä¸€ä¸ªç®€å•çš„ç•Œé¢â€¦æ›´åŠ æ·±å…¥æŠ€æœ¯è¿˜åœ¨æŽ¢ç©¶ä¸­ï¼Œå…ˆæ”¾ä¸Šæœ¬æ–‡çš„Demo æ—¢ç„¶æ˜¯ä»‹ç»Moyaçš„å°±ä¸»è¦å…ˆæ¥ä»‹ç»å®ƒå§ï¼ŒMoyaæ˜¯å¯¹ Alamofireçš„è¿›ä¸€æ­¥å°è£…,ç®€åŒ–äº†ç½‘ç»œè¯·æ±‚,æ–¹ä¾¿ç»´æŠ¤,æ–¹ä¾¿å•å…ƒæµ‹è¯•,ä½¿ç”¨Moyaé¡¹ç›®ä¸­ç½‘ç»œè¯·æ±‚ç±»çš„éƒ¨åˆ†å¯èƒ½é•¿è¿™æ ·ï¼Œæ‰€æœ‰çš„è¯·æ±‚é›†ä¸­æ”¾åœ¨ä¸€èµ·ï¼Œé›†ä½“åŒ–ç®¡ç†å¾ˆæ–¹ä¾¿ ç‚¹å‡»æŸ¥çœ‹å®˜æ–¹æ•™ç¨‹ Moyaå‘é€ç®€å•çš„ç½‘ç»œè¯·æ±‚æžšä¸¾ç±»åž‹éœ€æ»¡è¶³TargetTypeåè®® 1234567public protocol TargetType &#123;var baseURL: NSURL &#123; get &#125;var path: String &#123; get &#125;var method: Moya.Method &#123; get &#125;var parameters: [String: AnyObject]? &#123; get &#125;var sampleData: NSData &#123; get &#125;&#125; å®žçŽ°ä¸€ä¸ªæžšä¸¾ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112import Foundationimport Moyaenum ApiManager &#123;case getDantangList(String)case getNewsListcase getMoreNews(String)case getThemeListcase getThemeDesc(Int)case getNewsDesc(Int)case Create(title: String, body: String, userId: Int)case Login(phone:String,password:String)case Banner(String)&#125;extension ApiManager: TargetType &#123;/// The target&apos;s base `URL`.var baseURL: URL &#123;switch self &#123;case .Create(_,_,_):return URL.init(string: &quot;http://jsonplaceholder.typicode.com/&quot;)!case .getDantangList,.Banner:return URL.init(string: &quot;http://api.dantangapp.com/&quot;)!case .Login:return URL.init(string: &quot;https://api.grtstar.cn&quot;)!default:return URL.init(string: &quot;http://news-at.zhihu.com/api/&quot;)!&#125;&#125;/// The path to be appended to `baseURL` to form the full `URL`.var path: String &#123;switch self &#123;case .getDantangList(let page):return &quot;v1/channels/\(page)/items&quot;case .getNewsList:return &quot;4/news/latest&quot;case .getMoreNews(let date):return &quot;4/news/before/&quot; + datecase .getThemeList:return &quot;4/themes&quot;case .getThemeDesc(let id):return &quot;4/theme/\(id)&quot;case .getNewsDesc(let id):return &quot;4/news/\(id)&quot;case .Create(_, _, _):return &quot;posts&quot;case .Login:return &quot;/rest/user/certificate&quot;case .Banner:return &quot;v1/banners&quot;&#125;&#125;/// The HTTP method used in the request.var method: Moya.Method &#123;switch self &#123;case .Create(_, _, _):return .postcase .Login:return .postdefault:return .get&#125;&#125;/// The parameters to be incoded in the request.var parameters: [String: Any]? &#123;switch self &#123;case .Create(let title, let body, let userId):return [&quot;title&quot;: title, &quot;body&quot;: body, &quot;userId&quot;: userId]case .Login(let number, let passwords):return [&quot;mobile&quot; : number, &quot;password&quot; : passwords,&quot;deviceId&quot;: &quot;12121312323&quot;]case .Banner(let strin):return [&quot;channel&quot; :strin]default:return nil&#125;&#125;/// The method used for parameter encoding.var parameterEncoding: ParameterEncoding &#123;return URLEncoding.default&#125;/// Provides stub data for use in testing.var sampleData: Data &#123;switch self &#123;case .Create(_, _, _):return &quot;Create post successfully&quot;.data(using: String.Encoding.utf8)!default:return &quot;&quot;.data(using: String.Encoding.utf8)!&#125;&#125;var task: Task &#123;return .request&#125;/// Whether or not to perform Alamofire validation. Defaults to `false`.var validate: Bool &#123;return false&#125;&#125; çŽ°åœ¨å°±å¯ä»¥å‘é€ç®€å•çš„ç½‘ç»œè¯·æ±‚äº†:1.å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡MoyaProvider 1let ApiManagerProvider = MoyaProvider&lt;ApiManager&gt; 2.å‘é€ç½‘ç»œè¯·æ±‚1234567ApiManagerProvider.request(.getNewsList) &#123; (result) -&gt; () incase let .success(response):breakcase let .failure(error):break &#125; MoyaProviderçš„åˆå§‹åŒ–æˆ‘ä»¬è§‚å¯Ÿä¸‹MoyaProviderçš„åˆå§‹åŒ–æ–¹æ³•. MoyaProvideråˆå§‹åŒ–éƒ½æ˜¯æœ‰é»˜è®¤å€¼çš„ 123456public init(endpointClosure: @escaping EndpointClosure = MoyaProvider.defaultEndpointMapping,requestClosure: @escaping RequestClosure = MoyaProvider.defaultRequestMapping,stubClosure: @escaping StubClosure = MoyaProvider.neverStub,manager: Manager = MoyaProvider&lt;Target&gt;.defaultAlamofireManager(),plugins: [PluginType] = [],trackInflights: Bool = false) è¿™äº›å¯é€‰å‚æ•°å°±æ˜¯Moyaçš„å¼ºå¤§ä¹‹å¤„äº† ï¼Œæ–‡ç« ä¸»è¦ä¹Ÿæ˜¯ä»‹ç»å¦‚ä½•ä½¿ç”¨è¿™äº›æ’ä»¶çš„ã€‚ å‚æ•°è¯´æ˜Žï¼š EndpointClosureå¯ä»¥å¯¹è¯·æ±‚å‚æ•°åšè¿›ä¸€æ­¥çš„ä¿®æ”¹,å¦‚å¯ä»¥ä¿®æ”¹endpointByAddingParameters endpointByAddingHTTPHeaderFieldsç­‰ RequestClosure ä½ å¯ä»¥åœ¨å‘é€è¯·æ±‚å‰ï¼Œåšç‚¹æ‰‹è„š. å¦‚ä¿®æ”¹è¶…æ—¶æ—¶é—´ï¼Œæ‰“å°ä¸€äº›æ•°æ®ç­‰ç­‰ StubClosureå¯ä»¥è®¾ç½®è¯·æ±‚çš„å»¶è¿Ÿæ—¶é—´,å¯ä»¥å½“åšæ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œ Manager è¯·æ±‚ç½‘ç»œè¯·æ±‚çš„æ–¹å¼ã€‚é»˜è®¤æ˜¯Alamofire [PluginType]ä¸€äº›æ’ä»¶ã€‚å›žè°ƒçš„ä½ç½®åœ¨å‘é€è¯·æ±‚åŽï¼ŒæŽ¥å—æœåŠ¡å™¨è¿”å›žä¹‹å‰ ç¨åŽè¯¦ç»†ä»‹ç»è¿™éƒ¨åˆ†å†…å®¹ã€‚ RxSwiftMoyaä¹Ÿæœ‰è‡ªå·±çš„RxSwiftçš„æ‰©å±•ï¼Œä¸æ‡‚RxSwiftçš„ç«¥éž‹å¯ä»¥çœ‹ä¸‹æˆ‘ä»¬åšå®¢ä¸­çš„å…³äºŽRxSwiftåº“ä»‹ç»çš„æ–‡ç« ã€‚Moyaä½¿ç”¨RxSwiftå¾ˆç®€å•ï¼Œå¦‚ä¸‹æ‰€ç¤ºæˆ‘ä»¬åªéœ€è¦å¯¹è¯·æ±‚ç»“æžœè¿›è¡Œç›‘å¬å°±è¡Œäº† ä½¿ç”¨RxSwiftå¯ä»¥è¿™æ ·æ¥è¯·æ±‚ 123456789let provider = RxMoyaProvider&lt;ApiManager&gt;()//è¦ä½¿ç”¨RxMoyaProvideråˆ›å»ºproviderï¼Œæš‚æ—¶ä¸æºå¸¦ä»»ä½•å‚æ•°provider.request(.getNewsList).subscribe &#123; event inswitch event &#123;case .next(let response):// do something with the datacase .error(let error):// handle the error&#125;&#125; æˆ‘ä»¬è¿˜å¯ä»¥å¯¹Observableè¿›è¡Œæ‰©å±•ï¼Œè‡ªå®šä¹‰ä¸€äº›è‡ªå·±æµæ°´çº¿æ“ä½œï¼Œæ¯”å¦‚è‡ªåŠ¨å®žçŽ°jsonè½¬åŒ–Modelï¼Œå®šä¹‰å¦‚ä¸‹ã€‚ 12345678910111213141516171819func mapObject&lt;T: Mappable&gt;(type: T.Type) -&gt; Observable&lt;T&gt; &#123;return self.map &#123; response in//if response is a dictionary, then use ObjectMapper to map the dictionary//if not throw an errorguard let dict = response as? [String: Any] else &#123;throw RxSwiftMoyaError.ParseJSONError&#125;guard (dict[&quot;code&quot;] as?Int) != nil else&#123;throw RxSwiftMoyaError.ParseJSONError&#125;if let error = self.parseError(response: dict) &#123;throw error&#125;return Mapper&lt;T&gt;().map(JSON: dict)!&#125;&#125; ä¸‹è¾¹çš„æ–¹æ³•å°±éœ€è¦æ ¹æ®æœåŠ¡å™¨è¿”å›žæ•°æ®è¿›è¡Œåˆ¤æ–­äº†ï¼Œæˆ‘å¸¸ç”¨çš„é€»è¾‘æ˜¯æ•°æ®è¯·æ±‚æˆåŠŸäº†æ‰è¿”å›žå†å°±è¡Œç•Œé¢èµ‹å€¼åˆ·æ–°æ“ä½œï¼Œå¦‚æžœæ˜¯çŠ¶æ€ç ä¸æˆåŠŸå°±ç›´æŽ¥æ‹¦æˆªæŠ›å‡ºé”™è¯¯ï¼ˆåŽå°è¿”å›žçš„messageï¼‰ï¼Œæ¯”å¦‚æ˜¯ç™»å½•å¯†ç é”™è¯¯æç¤ºä¹‹ç±»çš„ 123456789101112131415161718192021fileprivate func parseError(response: [String: Any]?) -&gt; NSError? &#123;var error: NSError?if let value = response &#123;var code:Int?//åŽå°çš„æ•°æ®æ¯æ¬¡ä¼šè¿”å›žcodeåªæœ‰æ˜¯200æ‰ä¼šè¡¨ç¤ºé€»è¾‘æ­£å¸¸æ‰§è¡Œif let codes = value[&quot;code&quot;] as?Int&#123;code = codes&#125;if code != 200 &#123;var msg = &quot;&quot;if let message = value[&quot;message&quot;] as? String &#123;msg = message&#125;error = NSError(domain: &quot;Network&quot;, code: code!, userInfo: [NSLocalizedDescriptionKey: msg])&#125;&#125;return error&#125; é‚£ä¹ˆå°±å¯ä»¥å®šä¹‰ä¸€ä¸ªè¯·æ±‚æ–¹æ³•äº† 1234567func login(phone: String, password:String) -&gt; Observable&lt;UserModel&gt; &#123;return provider.request(.Login(phone: phone, password: password)).mapJSON().debug() // æ‰“å°è¯·æ±‚å‘é€ä¸­çš„è°ƒè¯•ä¿¡æ¯.mapObject(type: UserModel.self)&#125; å¦‚ä¸‹ä»£ç å°±å®Œæˆäº†ä¸€æ¬¡è¯·æ±‚ 12345678let viewModel = ViewModel(self)viewModel.login(phone: &quot;156178....&quot; , password: &quot;11111&quot;).subscribe(onNext: &#123; (userModel: UserModel) in//do something with postsprint(userModel.user?.nickName ?? &quot;&quot;)&#125;).addDisposableTo(dispose) Moyaä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šObservableçš„æ‰©å±•ï¼Œè®©æˆ‘ä»¬èƒ½æ›´è½»æ¾çš„å¤„ç†MoyaResponseï¼Œå¸¸ç”¨çš„å¦‚ä¸‹ï¼š filter(statusCodes:) è¿‡æ»¤responseçŠ¶æ€ç  filterSuccessfulStatusCodes() è¿‡æ»¤çŠ¶æ€ç ä¸ºè¯·æ±‚æˆåŠŸçš„ mapJSON() å°†è¯·æ±‚responseè½¬åŒ–ä¸ºJSONæ ¼å¼ mapString() å°†è¯·æ±‚responseè½¬åŒ–ä¸ºStringæ ¼å¼ å…·ä½“å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ ä¸‹è¾¹å°±è¯´è¯´RxMoyaProviderå‚æ•°å§ EndpointClosure æ²¡å†™ä»€ä¹ˆå°±æ‰“å°ä¸‹å‚æ•°ï¼Œè¯·æ±‚æ–¹æ³•ï¼Œè·¯å¾„..å¯ä»¥æ ¸å¯¹ 12345678private func endpointMapping&lt;Target: TargetType&gt;(target: Target) -&gt; Endpoint&lt;Target&gt; &#123;print(&quot;è¯·æ±‚è¿žæŽ¥ï¼š\(target.baseURL)\(target.path) \næ–¹æ³•ï¼š\(target.method)\nå‚æ•°ï¼š\(String(describing: target.parameters)) &quot;)return MoyaProvider.defaultEndpointMapping(for: target)&#125; manager ç”¨çš„æ˜¯Alamofireè¯·æ±‚ï¼Œè¿™é‡Œä¸»è¦å†™äº†ä¸€ä¸ªå¿½ç•¥SSLéªŒè¯çš„æ–¹æ³•ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œä¿®æ”¹è¯·æ±‚å¤´ç­‰ç­‰123456789101112131415public func defaultAlamofireManager() -&gt; Manager &#123;let configuration = URLSessionConfiguration.defaultconfiguration.httpAdditionalHeaders = Alamofire.SessionManager.defaultHTTPHeaderslet policies: [String: ServerTrustPolicy] = [&quot;ap.dimain.cn&quot;: .disableEvaluation]let manager = Alamofire.SessionManager(configuration: configuration,serverTrustPolicyManager: ServerTrustPolicyManager(policies: policies))manager.startRequestsImmediately = falsereturn manager&#125; æœ€æœ‰æ„æ€çš„è¿˜æ˜¯æ’ä»¶äº† ï¼Œå¯ä»¥è‡ªå®šä¹‰å„ç§åŠŸèƒ½ pluginspluginså‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„çš„å½¢å¼ï¼Œéµå¾ªPluginTypeåè®®æˆ‘ä»¬å…ˆçœ‹ä¸‹PluginTypeçš„åè®®å†…å®¹ 12345678910111213141516public protocol PluginType &#123;/// Called to modify a request before sending//è¯·æ±‚å‰å¯ä»¥ä¿®æ”¹ä¸€äº›requestfunc prepare(_ request: URLRequest, target: TargetType) -&gt; URLRequest/// Called immediately before a request is sent over the network (or stubbed).//å¼€å§‹è¯·æ±‚func willSend(_ request: RequestType, target: TargetType)/// Called after a response has been received, but before the MoyaProvider has invoked its completion handler.//ç»“æŸè¯·æ±‚func didReceive(_ result: Result&lt;Moya.Response, MoyaError&gt;, target: TargetType)/// Called to modify a result before completionfunc process(_ result: Result&lt;Moya.Response, MoyaError&gt;, target: TargetType) -&gt; Result&lt;Moya.Response, MoyaError&gt;&#125; çŠ¶æ€æ¡ä¸­çš„ç½‘ç»œåŠ è½½æç¤º,ä¿—ç§°â€èŠèŠ±åŠ è½½â€ networkActivityPlugin 123456789101112131415let networkActivityPlugin = NetworkActivityPlugin &#123; (change) -&gt; () inswitch(change)&#123;case .ended:UIApplication.shared.isNetworkActivityIndicatorVisible = falsecase .began:UIApplication.shared.isNetworkActivityIndicatorVisible = true&#125;&#125; NetworkActivityPluginæ˜¯Moyaæä¾›çš„æ–¹æ³•ï¼Œè¿˜æ˜¯æ ¹æ®PluginTypeçš„åè®®å®žçŽ°çš„ è¯·æ±‚ä¸€èˆ¬å°±éœ€è¦loadingäº†è¿™é‡Œç”¨MBProgressHUDå®žçŽ°è‡ªåŠ¨æ˜¾ç¤ºéšè— 12345678910111213141516171819202122232425262728293031323334353637383940public final class RequestLoadingPlugin: PluginType &#123;private let viewController: UIViewControllervar HUD:MBProgressHUDvar hide:Boolinit(_ vc: UIViewController,_ hideView:Bool) &#123;self.viewController = vcself.hide = hideViewHUD = MBProgressHUD.init()guard self.hide else &#123;return&#125;HUD = MBProgressHUD.showAdded(to: self.viewController.view, animated: true)&#125;public func willSend(_ request: RequestType, target: TargetType) &#123;print(&quot;å¼€å§‹è¯·æ±‚\(self.viewController)&quot;)if self.hide != false &#123;HUD.mode = MBProgressHUDMode.indeterminateHUD.label.text = &quot;åŠ è½½ä¸­&quot;HUD.bezelView.color = UIColor.lightGrayHUD.removeFromSuperViewOnHide = trueHUD.backgroundView.style = .solidColor //æˆ–SolidColor&#125;&#125;public func didReceive(_ result: Result&lt;Response, MoyaError&gt;, target: TargetType) &#123;print(&quot;ç»“æŸè¯·æ±‚&quot;)HUD.hide(animated: true)&#125;&#125; ä¿®æ”¹è¯·æ±‚å¤´æƒ³æƒ³ä¸è¯¥æ”¾åœ¨æ’ä»¶äº†å®žçŽ°ï¼Œåº”è¯¥æ˜¯åœ¨manageré‡Œå®žçŽ°ï¼Œå…ˆæ”¾å‡ºæ¥ä»£ç å§ 123456789101112struct AuthPlugin: PluginType &#123;let token: Stringfunc prepare(_ request: URLRequest, target: TargetType) -&gt; URLRequest &#123;var request = requestrequest.timeoutInterval = 30request.addValue(token, forHTTPHeaderField: &quot;token&quot;)request.addValue(&quot;ios&quot;, forHTTPHeaderField: &quot;platform&quot;)request.addValue(&quot;version&quot;, forHTTPHeaderField: Bundle.main.object(forInfoDictionaryKey: &quot;CFBundleShortVersionString&quot;) as! String)return request&#125;&#125; è¯·æ±‚æ—¶å€™é‡åˆ°é€»è¾‘é”™è¯¯æˆ–è€…ä¸æ»¡è¶³æ¡ä»¶ï¼Œå‚æ•°é”™è¯¯ç­‰è¦æç¤ºè¿™é‡Œç”¨çš„æ˜¯Toast 123456789101112131415161718192021222324252627282930313233//æ£€æµ‹tokenæœ‰æ•ˆæ€§final class AccessTokenPlugin: PluginType &#123;private let viewController: UIViewControllerinit(_ vc: UIViewController) &#123;self.viewController = vc&#125;public func willSend(_ request: RequestType, target: TargetType) &#123;&#125;public func didReceive(_ result: Result&lt;Response, MoyaError&gt;, target: TargetType) &#123;switch result &#123;case .success(let response)://è¯·æ±‚çŠ¶æ€ç guard response.statusCode == 200 else &#123;return&#125;var json:Dictionary? = try! JSONSerialization.jsonObject(with: response.data,options:.allowFragments) as! [String: Any]print(&quot;è¯·æ±‚çŠ¶æ€ç \(json?[&quot;status&quot;] ?? &quot;&quot;)&quot;)guard (json?[&quot;message&quot;]) != nil else &#123;return&#125;guard let codeString = json?[&quot;status&quot;]else &#123;return&#125;//è¯·æ±‚çŠ¶æ€ä¸º1æ—¶å€™ç«‹å³è¿”å›žä¸å¼¹å‡ºä»»ä½•æç¤º å¦åˆ™æç¤ºåŽå°è¿”å›žçš„é”™è¯¯ä¿¡æ¯guard codeString as! Int != 1 else&#123;return&#125;self.viewController.view .makeToast( json?[&quot;message&quot;] as! String)case .failure(let error):print(&quot;å‡ºé”™äº†\(error)&quot;)break&#125;&#125;&#125; AccessTokenPluginè¿™ä¸ªåå­—æœ‰ç‚¹é—®é¢˜å“ˆï¼Œèµ·åˆæ˜¯æƒ³åœ¨è¿™é‡Œåˆ¤æ–­tokenä¸æ­£ç¡®å°±é€€å‡ºç™»å½•ç”¨çš„ç”±äºŽæ²¡æœ‰åˆé€‚çš„apiå°±å®žçŽ°äº†è¯·æ±‚ç»“æžœçš„çŠ¶æ€åˆ¤æ–­ï¼Œè¿™å°±è‡ªåŠ¨å®žçŽ°äº†é€»è¾‘é”™è¯¯çš„æç¤ºäº† ä¸ç”¨ä¸€ä¸ªè¯·æ±‚ä¸€ä¸ªè¯·æ±‚çš„åˆ¤æ–­äº†ï¼Œè¿˜æ˜¯æŒºæ–¹ä¾¿çš„ æœ‰äº†è¿™äº›æ’ä»¶å°±å¯ä»¥è¿™æ ·åˆå§‹åŒ–RxMoyaProvider 1234567let provider :RxMoyaProvider&lt;ApiManager&gt;provider = RxMoyaProvider&lt;ApiManager&gt;(endpointClosure: endpointMapping,manager:defaultAlamofireManager(),plugins:[RequestLoadingPlugin(self.viewController,true),AccessTokenPlugin( self.viewController), NetworkLoggerPlugin(verbose: true),networkActivityPlugin,AuthPlugin(token: &quot;æš‚æ—¶ä¸ºç©º&quot;)] å…³äºŽMoyaçš„ç”¨æ³•å…ˆä»‹ç»åˆ°è¿™é‡ŒåŽç»­æˆ‘ä¼šç»§ç»­æŽ¢ç©¶æ›´åŠ çµæ´»å…¨é¢çš„ç”¨æ³•ã€‚ ä¸‹è¾¹ä»‹ç»ä¸‹Thençš„è¯­æ³•æ£‰èŠ±ç³–å§ï¼Œçœ‹ä¾‹å­å§12345678910111213141516171819202122_ = UILabel.init(frame: CGRect.init(x: 0, y: 0, width: kScreenW, height: 50)).then(&#123; (make) inmake.text = &quot;Thençš„ç®€å•ç”¨æ³•è¶…èµžðŸ‘&quot;make.font = .systemFont(ofSize: 20)make.textColor = .redmake.textAlignment = .centerself.view.addSubview(make)&#125;)UserDefaults.standard.do &#123;$0.set(&quot;devxoul&quot;, forKey: &quot;username&quot;)$0.set(&quot;devxoul@gmail.com&quot;, forKey: &quot;email&quot;)$0.synchronize()let tableView = UITableView().then &#123;$0.backgroundColor = .clear$0.separatorStyle = .none$0.register(MyCell.self, forCellReuseIdentifier: &quot;myCell&quot;)&#125;&#125; å¦‚æžœå¸ƒå±€è¿™æ ·è¿˜ä¸ç®€å•é‚£å†çœ‹ä¸‹è¾¹ç”¨Thenå’ŒSnapKitä¸€èµ·ä½¿ç”¨çš„æ–¹å¼ 12345678910111213_ = UILabel().then(&#123; (make) inmake.text = &quot;Thençš„ç®€å•ç”¨æ³•è¶…èµžðŸ‘&quot;make.font = .systemFont(ofSize: 20)make.textColor = .redmake.textAlignment = .centerself.view.addSubview(make)make.snp.makeConstraints(&#123; (make) inmake.top.left.right.equalTo(0)make.height.equalTo(50)&#125;)&#125;) å†ä¸æ»¡æ„åªèƒ½ç”¨Xibå¸ƒå±€äº†â€¦. åœ¨Swiftä¸­ç”¨SDCycleScrollViewè½®æ’­å›¾SDCycleScrollViewä¹‹å‰ä¸€ç›´åœ¨OCä¸­ä½¿ç”¨è§‰å¾—å¾ˆç®€å•åˆç†Ÿæ‚‰äº†æ‰€ä»¥è¿™æ¬¡å†™çš„Demoä¾æ—§æ¬äº†è¿‡æ¥ï¼Œä½†æ˜¯å‘¢SDCycleScrollViewé‡Œå®žçŽ°å›¾ç‰‡ä¸‹è½½ç”¨çš„æ˜¯SDWebImageï¼Œè€ŒSwiftç‰ˆæœ¬æä¾›äº†Kingfisheré‚£ä¸å¯èƒ½éƒ½ç”¨äº†ï¼Œå› ä¸ºä¹Ÿä¸æƒ³æ”¾å¼ƒSDCycleScrollViewå°±ä¸å¾—å·²ä¿®æ”¹äº†é‡Œè¾¹å›¾ç‰‡ä¸‹è½½çš„æ–¹æ³•ï¼Œåœ¨Swifté¡¹ç›®é‡ŒOCç±»ç›´æŽ¥è°ƒç”¨Swiftç±»æ˜¯è°ƒç”¨ä¸åˆ°çš„ï¼Œæ‰€ä»¥æˆ‘å°±å’¨è¯¢äº†ä¸‹æ‰¾åˆ°ä¸€ä¸ªåˆé€‚åŠžæ³•ï¼Œæ–°å»ºSwifté‡Œç»§æ‰¿SDCycleScrollViewç„¶åŽç”¨Kingfisherå®žçŽ°å›¾ç‰‡ä¸‹è½½ï¼Œæ–¹æ³•æ¯”è¾ƒç®€å•å°±æ˜¯ç»™å¼€å‘è€…æä¾›ä¸€ä¸ªå‚è€ƒæ–¹æ³• 1234567891011121314151617181920212223242526import UIKitimport SDCycleScrollViewimport Kingfisherclass CustomSDCycleScrollView: SDCycleScrollView &#123;//å› ä¸ºä¹‹å‰åº“é‡Œè¾¹ç”¨çš„æ˜¯SDWebImageView ç¼“å­˜çš„å›¾ç‰‡ çŽ°åœ¨ æ¢äº†Swiftç‰ˆæœ¬çš„Kingfisheræ‰€ä»¥ æ— å¥ˆä¿®æ”¹äº†åŽŸåº“çš„æ–¹æ³• é‡å†™äº†ä¸‹open override func imageView(_ imageView: UIImageView!, url: URL!) -&gt; UIImageView! &#123;let imageView: UIImageView? = imageViewimageView?.kf.setImage(with: url,placeholder:UIImage.init(named: &quot;tab_5th_h&quot;))return imageView&#125;//é‡å†™ocä»£ç  åˆ é™¤ç¼“å­˜override class func clearImagesCache()&#123;let cache = KingfisherManager.shared.cache// èŽ·å–ç¡¬ç›˜ç¼“å­˜çš„å¤§å°cache.calculateDiskCacheSize &#123; (size) -&gt; () inprint(&quot;ç£ç›˜ç¼“å­˜å¤§å°ï¼š \(size) bytes &quot;)cache.clearDiskCache()&#125;&#125;&#125; ç”¨çš„æ—¶å€™ç›´æŽ¥ä½¿ç”¨CustomSDCycleScrollViewå³å¯ é¡¹ç›®ä½¿ç”¨MJRefreshå®žçŽ°åˆ·æ–° ç»™UIScrollViewå†™äº†ä¸€ä¸ªç±»åˆ«æ¯”è¾ƒç®€å•ä»£ç å¦‚ä¸‹1234567891011121314151617181920212223242526272829303132import UIKitimport MJRefreshextension UIScrollView&#123;func headerRefresh(block: @escaping () -&gt; ()) -&gt; ()&#123;self.mj_header = MJRefreshNormalHeader.init(refreshingBlock: &#123;block()&#125;)&#125;func footerRefresh(block: @escaping () -&gt; ()) -&gt; ()&#123;self.mj_footer = MJRefreshBackNormalFooter(refreshingBlock: &#123;block()&#125;)&#125;func endrefresh()&#123;self.mj_footer.endRefreshing()self.mj_header.endRefreshing()&#125;&#125; ç”¨çš„æ—¶å€™æ›´ç®€å•äº† 1234567891011weak var weakself = self//ä¸Šæ‹‰åˆ·æ–°tableView.headerRefresh &#123;weakself?.loadData()&#125;//ä¸‹æ‹‰åŠ è½½tableView.footerRefresh&#123;weakself?.loadData()&#125;//ç»“æŸåˆ·æ–°self.tableView.endrefresh() å€¼å¾—ä¸€æçš„æ˜¯Swifté¡¹ç›®å¦‚ä½•ç”¨OC ä¸‹ç­äº†ã€‚ã€‚ã€‚ã€‚åŽç»­æ›´æ–°]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[AFNetworkingå’ŒAlamofireè®¾ç½®è·³è¿‡https(SSL)éªŒè¯]]></title>
      <url>%2Fposts%2F46398%2F</url>
      <content type="text"><![CDATA[æˆ‘ä»¬æœåŠ¡å™¨ç”¨çš„æ˜¯httpsä½†æ˜¯æ²¡ç”¨è¯ä¹¦ï¼Œå®¢æˆ·ç«¯ä¸éªŒè¯ï¼Œåœ¨ios11ä¹‹å‰æ˜¯ä¸ç”¨åšå¤„ç†çš„ï¼Œåœ¨ä¸‹è½½äº†ios11ä¹‹åŽå‘çŽ°è¯·æ±‚å¤±è´¥äº†ï¼Œå°±æ˜¯è¯ä¹¦éªŒè¯å¤±è´¥ï¼Œæƒ³å¿…æ˜¯è¿™æ¬¡ç‰ˆæœ¬æ›´æ–°çš„ä¸€ç‚¹å°å˜åŒ–å§ã€‚ çŽ°åœ¨é¡¹ç›®ç”¨çš„æ˜¯AFNetworking 3.0.2ç‰ˆæœ¬æŠ¥é”™ Error Domain=NSURLErrorDomain Code=-999 â€œå·²å–æ¶ˆâ€ ç„¶åŽæ¢äº†swiftçš„Alamofireè¯·æ±‚æŠ¥é”™æ˜¯ Domain=NSURLErrorDomain Code=-1202 â€œThe certificate for this server is invalid. You might be connecting to a server that is pretending to be â€œapi.domain.cnâ€ which could put your confidential information at risk.â€ UserInfo={NSURLErrorFailingURLPeerTrustErrorKey=, NSLocalizedRecoverySuggestion=Would you like to connect to the server anyway?, _kCFStreamErrorDomainKey=3, _kCFStreamErrorCodeKey=-9807â€¦. æ€»ä¹‹å°±æ˜¯è¯ä¹¦çš„é—®é¢˜äº†ï¼Œæˆ‘ä»¬æœåŠ¡å™¨æ˜¯æ²¡æœ‰éªŒè¯è¯ä¹¦çš„ æ‰€ä»¥éœ€è¦å‰ç«¯è¿™è¾¹å£°æ˜Žè·³è¿‡éªŒè¯çš„ ç½‘ä¸ŠæŸ¥äº†ä¸‹æ‰¾åˆ°äº†å¦‚ä¸‹è§£å†³åŠžæ³• OCçš„ä»£ç å¦‚ä¸‹ 123456AFSecurityPolicy *securityPolicy = [AFSecurityPolicy policyWithPinningMode:AFSSLPinningModeNone];// allowInvalidCertificates æ˜¯å¦å…è®¸æ— æ•ˆè¯ä¹¦ï¼ˆä¹Ÿå°±æ˜¯è‡ªå»ºçš„è¯ä¹¦ï¼‰ï¼Œé»˜è®¤ä¸ºNO// å¦‚æžœæ˜¯éœ€è¦éªŒè¯è‡ªå»ºè¯ä¹¦ï¼Œéœ€è¦è®¾ç½®ä¸ºYESsecurityPolicy.allowInvalidCertificates = YES;[securityPolicy setValidatesDomainName:NO];[manger setSecurityPolicy:securityPolicy]; Swiftç”¨Alamofireè§£å†³æ–¹æ¡ˆ 12345678910111213public func defaultAlamofireManager() -&gt; Manager &#123; let configuration = URLSessionConfiguration.default configuration.httpAdditionalHeaders = Alamofire.SessionManager.defaultHTTPHeaders let policies: [String: ServerTrustPolicy] = [ &quot;api.domian.cn&quot;: .disableEvaluation ] let manager = Alamofire.SessionManager(configuration: configuration,serverTrustPolicyManager: ServerTrustPolicyManager(policies: policies)) manager.startRequestsImmediately = false return manager&#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä½¿ç”¨DZNEmptyDataSetæ—¶DZNEmptyDataSetViewè‡ªåŠ¨ä¸Šç§»]]></title>
      <url>%2Fposts%2F25894%2F</url>
      <content type="text"><![CDATA[ä½¿ç”¨DZNEmptyDataSeté‡åˆ°çš„ä¸€ä¸ªé—®é¢˜ ä»Šå¤©åœ¨ä½¿ç”¨DZNEmptyDataSeté‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘ç”¨MJRefresh åŽDZNEmptyDataSet Viewçš„æ•´ä¸ªèƒŒæ™¯å°ºå¯¸ä¸å¯¹ã€‚ps: DZNEmptyDataSetæ˜¯ä¸€ä¸ªç›¸å½“ä¸é”™è®¾ç½®ç©ºç™½é¡µé¢çš„è½®å­éžå¸¸ å¥½ä½¿ ã€‚ æ— è®ºæ˜¯ç”¨è‡ªå®šä¹‰ 1- (UIView *)customViewForEmptyDataSet:(UIScrollView *)scrollView è¿˜æ˜¯ç›´æŽ¥ç”¨ DZNEmptyDataSet æŽ¨èçš„æ–¹å¼ç›´æŽ¥è®¾ç½®éƒ½æ˜¯æœ‰é—®é¢˜çš„ 123- (UIImage *)imageForEmptyDataSet:(UIScrollView *)scrollView;- (NSAttributedString *)descriptionForEmptyDataSet:(UIScrollView *)scrollView- (NSAttributedString *)buttonTitleForEmptyDataSet:(UIScrollView *)scrollView forState:(UIControlState)state çœ‹çœ‹é—®é¢˜çš„å…·ä½“è¡¨çŽ°å§ ä¸‹è¾¹è¿™ä¸ªå°±æ˜¯ æœ‰é—®é¢˜äº†ï¼Œæ²¡æ•°æ®åŽè‡ªåŠ¨ä¸Šç§»äº† ç®€å•çš„è¯´é—®é¢˜æ˜¯ï¼šåˆ·æ–°åŽDZNEmptyDataSetView è¿˜ä¼šå‘ä¸Šåç§»ä¸€æ®µè·ç¦»ï¼å°è¯•å„ç§åˆ·æ–°éƒ½æ²¡æœ‰ç”¨ 12[self.tableView reloadEmptyDataSet]; [self.tableView reloadData]; çœ‹äº†ä¸‹è§†å›¾çš„å±‚æ¬¡å…³ç³»å¯ä»¥çœ‹å‡ºäº†DZNEmptyDataSetViewä¸Šç§»äº†54ï¼Œç„¶åŽæˆ‘ä¸€æœ 54 ï¼Œå‘çŽ°54å‡ºçŽ°åœ°æ–¹å¹¶ä¸å¤šï¼Œç»“åˆåˆ·æ–°çŒœæµ‹åº”è¯¥å°±æ˜¯å®ƒå•¦ 1const CGFloat MJRefreshHeaderHeight = 54.0; æ‰€ä»¥æŽ¨æµ‹ï¼ŒDZNEmptyDataSetViewæ˜¯æ ¹æ®æ­£åœ¨åˆ·æ–°çš„è¿‡ç¨‹ä¸­ç»™å…¶å®šå¸ƒå±€çš„ã€‚ç„¶è€Œæˆ‘ä»¬éœ€è¦é˜»æ­¢å®ƒæˆ–å»¶åŽå®ƒã€‚ æ­¤å¤„æˆ‘æ˜¯æƒ³ç€åœ¨è¿™ä¹‹åŽç›´æŽ¥å¤„ç†å®ƒ,æ”¹å˜å®ƒçš„ originã€‚ 123456for (UIView *subView in self.tableView.subviews) &#123;if ([NSStringFromClass([subView class]) isEqualToString:@&quot;DZNEmptyDataSetView&quot;])&#123;if (subView.frame.origin.y == 0) return;subView.frame = CGRectMake(0, 0, [UIScreen mainScreen].bounds.size.width, [UIScreen mainScreen].bounds.size.height - 64);&#125;&#125; åœ¨åˆ·æ–°åŽè¿™æ ·å¤„ç†ï¼Œæ–¹æ³•æœ‰ç‚¹æ­»ï¼Œä½†æ˜¯ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç›´æŽ¥çš„ã€‚ ä»Ž github ä¸Šçœ‹åˆ°çš„æ–¹æ³•å¦‚ä¸‹ï¼Œè²Œä¼¼æ˜¯ç›®å‰ä½¿ç”¨æœ€åˆç†çš„å§ï¼Œæœ‰å…¶ä»–æ–¹æ³•æ¬¢è¿Žå‘ŠçŸ¥ã€‚ 123- (void)emptyDataSetWillAppear:(UIScrollView *)scrollView &#123;scrollView.contentOffset = CGPointZero;&#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å¦‚ä½•ä½¿ç”¨iOS 9çš„Core Spotlightæ¡†æž¶]]></title>
      <url>%2Fposts%2F45195%2F</url>
      <content type="text"><![CDATA[iOSæ¯ä¸€æ¬¡ç‰ˆæœ¬çš„æ›´æ–°ï¼Œéƒ½ä¼šç»™å…¨çƒçš„å¼€å‘å·¥ä½œè€…å¸¦æ¥æ–°çš„â€œçŸ¥è¯†ç‚¹â€å’Œå¯¹çŽ°æœ‰æŠ€æœ¯è¿›è¡Œçš„æ”¹è¿›ã€‚æ˜¾ç„¶ï¼ŒiOSçš„æœ€æ–°ç‰ˆæœ¬iOS 9ä¸ä»…å»¶ç»­äº†è¿™ä¸€ä¼ ç»Ÿï¼Œè¿˜å…¬å¸ƒäº†æ–°çš„æ¡†æž¶å’ŒAPIï¼Œå¼€å‘è€…å¯ä½¿ç”¨æ–°å¢žçš„æ¡†æž¶å’ŒAPIè®©è‡ªå·±çš„åº”ç”¨è¡¨çŽ°çš„æ›´å‡ºè‰²ã€‚å…¶ä¸­ä¹‹ä¸€å°±æ˜¯Core Spotlightæ¡†æž¶ï¼Œå®ƒåŒ…å«äº†ä¸€äº›ä¼˜ç§€çš„APIï¼Œæœ‰å¾…å¼€å‘è€…æ·±å…¥æŽ¢ç©¶ã€‚ Core Spotlight (CS) æ¡†æž¶æ˜¯Search APIçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå¢žåŠ äº†å¼€å‘è€…çš„åº”ç”¨çš„æ›å…‰çŽ‡ï¼Œä½¿ç”¨æˆ·æ›´å®¹æ˜“å‘çŽ°å’Œè®¿é—®APPï¼Œä½†æ˜¯è¿™äº›APIåœ¨iOS9ä¹‹å‰çš„ç‰ˆæœ¬ä¸­æ˜¯ä¸å¯ç”¨çš„ã€‚è¿™äº›Search APIæ‹‰è¿‘äº†ç”¨æˆ·å’Œappçš„è·ç¦»ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¿™ç§æ–°çš„æ–¹æ³•è¿…é€Ÿçš„æ‰¾åˆ°app,è€Œappä¹Ÿå¯ä»¥è¿…é€Ÿçš„å¯¹ç”¨æˆ·çš„æ“ä½œåšå‡ºååº”ã€‚é™¤äº†Core Spotlightä¹‹å¤–ï¼ŒiOS 9è¿˜åŒ…å«ä»¥ä¸‹æ–°çš„searchåŠŸèƒ½ï¼ˆä»…ä¾›å‚è€ƒï¼‰ï¼š 1ã€NSUserActivityè¿™ä¸ªç±»ä¸­æ–°çš„æ–¹æ³•å’Œå±žæ€§ï¼ˆè¯¥ç±»è´Ÿè´£å­˜å‚¨appå…³é—­æ—¶çš„çŠ¶æ€ï¼Œä»¥ä¾¿ä¹‹åŽæ¢å¤appçš„çŠ¶æ€ã€‚ï¼‰ 2ã€åœ¨è®¾å¤‡ä¸Šä½¿ç”¨webæ ‡è®°ï¼Œä»¥ä¾¿æœç´¢åˆ°webä¸­çš„å†…å®¹ã€‚ 3ã€èƒ½é€šè¿‡webå†…å®¹ä¸­çš„é“¾æŽ¥ç›´æŽ¥å¯åŠ¨åº”ç”¨ç¨‹åºçš„é€šç”¨é“¾æŽ¥ã€‚ æœ¬æ–‡ä¸ä¼šå¯¹ä»¥ä¸Šä¸‰ç‚¹åšè¯¦ç»†ä»‹ç»ï¼Œåªè¯¦ç»†è®²è§£Core Spotlightæ¡†æž¶ã€‚åœ¨è®²è§£ä¹‹å‰ï¼Œå…ˆäº†è§£ä»¥ä¸‹Core Spotlightåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼š Core Spotlingæ¡†æž¶ å¯ä»¥è®©ç”¨æˆ·é€šè¿‡Spotlightæœç´¢åˆ°appä¸­çš„æ•°æ®ï¼Œå¹¶å°†appç›¸å…³å†…å®¹å’Œç³»ç»Ÿæœç´¢è¿”å›žçš„ç»“æžœä¸€èµ·å±•ç¤ºå‡ºæ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ç”¨æˆ·å¯ä»¥ä¸Žåº”ç”¨ç¨‹åºçš„å…¶ä»–ç›¸å…³ç»“æžœè¿›è¡Œäº¤äº’ï¼Œå½“ç‚¹å‡»å…¶ä¸­ä¸€é¡¹æœç´¢ç»“æžœæ—¶å¹¶ä¸ä»…ä»…è‡ªåŠ¨å¯åŠ¨APPï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥è®©ç”¨æˆ·é€‰æ‹©ä¸Žæ•°æ®æœ€ç›¸å…³çš„å†…å®¹ã€‚ ä»Žå¼€å‘è€…çš„è§’åº¦æ¥è¯´ï¼Œé›†æˆCore Spotlightæ¡†æž¶å¹¶ä½¿ç”¨å®ƒæä¾›çš„APIå¹¶ä¸æ˜¯ä¸€ä»¶éš¾äº‹ã€‚å­¦è¿‡è¿™æ•™ç¨‹ä¹‹åŽï¼Œä½ å°†ä¼šå‘çŽ°ä»…ä»…éœ€è¦å‡ è¡Œä»£ç å°±å¯ä»¥å®žçŽ°è¿™ä¸ªåŠŸèƒ½ã€‚é›†æˆçš„æ ¸å¿ƒé—®é¢˜åœ¨äºŽå¼€å‘è€…å¿…é¡»æŠŠAPPçš„æ•°æ®ä»¥ç‰¹å®šçš„æ ¼å¼åŠ å…¥åˆ°iOSç³»ç»Ÿçš„ç´¢å¼•ä¸­ã€‚ ç”±äºŽæœ¬æ•™ç¨‹ä¸“æ³¨äºŽCore Spotlightæ¡†æž¶çš„ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘ä¸æ‰“ç®—æ·±å…¥ç ”ç©¶è¿™ä¸ªæ¡†æž¶ã€‚ å…³äºŽDemo App å’Œå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬æ‰“ç®—é€šè¿‡ä¸€ä¸ªç¤ºä¾‹åº”ç”¨æ¥ç ”ç©¶æŽ¢ç´¢Spotlightçš„ç»†èŠ‚ã€‚åœ¨è¿™ä¸ªdemoä¸­ï¼Œæˆ‘ä»¬å°†å¾€åº”ç”¨ç¨‹åºä¸­å†™å…¥ä¸€ç»„æ•°æ®ï¼Œå¹¶ä¸”è¿™äº›æ•°æ®éƒ½æ˜¯å¯ä»¥é€šè¿‡çœŸæœºæˆ–æ¨¡æ‹Ÿå™¨çš„SpotlightåŠŸèƒ½è¢«æœç´¢åˆ°çš„ã€‚è™½ç„¶å®žçŽ°SpotlightåŠŸèƒ½æœç´¢æ˜¯é‡ç‚¹,ä½†æ˜¯è¿˜æ˜¯æœ‰å¿…è¦ä»‹ç»ä¸€ä¸‹å…³äºŽdemo app çš„æ›´å¤šç»†èŠ‚ã€‚ æˆ‘ä»¬çš„ç¤ºä¾‹åº”ç”¨è¦è¾¾åˆ°çš„æ•ˆæžœæ˜¯å±•ç¤ºä¸€äº›ç”µå½±åŠå…¶ç›¸å…³çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ç”µå½±æ¦‚è¦ã€å¯¼æ¼”ã€æ˜Žæ˜Ÿä»¥åŠå½±è¯„ç­‰çº§ç­‰ã€‚æ‰€æœ‰çš„ç”µå½±æ•°æ®å°†ä¼šæ”¾åœ¨åˆ—è¡¨ä¸­å±•ç¤ºï¼Œå¹¶ä¸”å½“ç‚¹å‡»åˆ°å¯¹åº”çš„è¡Œæ—¶ï¼Œæ‰€é€‰æ‹©çš„ç”µå½±ä¼šåœ¨ä¸€ä¸ªæ–°çš„è§†å›¾æŽ§åˆ¶å™¨ä¸­å±•ç¤ºå‡ºç”µå½±çš„è¯¦æƒ…ã€‚è¿™äº›åŠŸèƒ½å’Œæ•°æ®ä½œä¸ºæˆ‘ä»¬æŒ–æŽ˜Spotlightçš„APIè€Œè¨€å·²ç»å¤Ÿç”¨äº†ã€‚æˆ‘ä»¬çš„æ•°æ®æ¥æºæ˜¯International Movie Database (IMDB)ï¼Œæˆ‘ä»¬ä»Žè¿™ä¸ªç½‘ç«™èŽ·å¾—æ•°æ®ç¤ºä¾‹ã€‚ é€šè¿‡çœ‹ä¸‹é¢çš„åŠ¨ç”»ç¤ºä¾‹ï¼Œä½ å¯ä»¥å…ˆçœ‹ä¸€ä¸‹æ¼”ç¤ºç¨‹åºçš„æ•ˆæžœï¼š åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªç›®çš„ï¼šæœ€é‡è¦çš„æ˜¯è®©è¿™ä¸ªåº”ç”¨å†…çš„æ‰€æœ‰ç”µå½±æ–¹é¢çš„æ•°æ®éƒ½å¯ä»¥è¢«Spotlightæœç´¢åˆ°ã€‚å½“ç”¨æˆ·é€šè¿‡å…³é”®å­—æœç´¢æ—¶ï¼Œåº”ç”¨ç¨‹åºå†…å…³äºŽç”µå½±çš„æ•°æ®å°†ä¼šå±•çŽ°ç»™ç”¨æˆ·ã€‚è®¾ç½®è¿™äº›å…³é”®å­—æ˜¯æˆ‘ä»¬æŽ¥ä¸‹æ¥å·¥ä½œçš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¿…é¡»é‡æ–°å®šä¹‰å®ƒä»¬ï¼Œä½¿ä¹‹ç¬¦åˆè§„åˆ™ã€‚ ç‚¹å‡»æœç´¢ç»“æžœä¼šæ‰“å¼€åº”ç”¨ç¨‹åºï¼Œä¹‹åŽæˆ‘ä»¬è¦å®žçŽ°ç¬¬äºŒä¸ªç›®æ ‡ã€‚å¦‚æžœæˆ‘ä»¬æ²¡æœ‰åšä»»ä½•çš„å¤„ç†ï¼Œé‚£ä¹ˆå°†ä¼šåŠ è½½åŒ…å«æœ‰ç”µå½±æ•°æ®åˆ—è¡¨çš„é»˜è®¤è§†å›¾æŽ§åˆ¶å™¨å±•ç¤ºç»™ç”¨æˆ·ã€‚ç„¶è€Œï¼Œå‡å¦‚æˆ‘ä»¬è€ƒè™‘åˆ°ç”¨æˆ·ä½“éªŒçš„è¯ï¼Œè¿™ä¹ˆå¤„ç†å¹¶ä¸æ˜¯å¾ˆå¥½ã€‚å¥½çš„æ–¹æ¡ˆæ˜¯ï¼Œæˆ‘ä»¬çš„APPåº”è¯¥å±•ç¤ºSpotlighté€‰ä¸­çš„ç”µå½±çš„è¯¦æƒ…ã€‚ç®€è¨€ä¹‹ï¼Œæˆ‘ä»¬ä¸ä»…è¦è®©åº”ç”¨ç¨‹åºå†…çš„ç”µå½±æ•°æ®èƒ½å¤Ÿé€šè¿‡Spotlightè¢«æœç´¢åˆ°ï¼Œè€Œä¸”è¿˜è¦åœ¨ç”¨æˆ·ç‚¹å‡»æœç´¢ç»“æžœæ—¶ï¼Œå±•ç¤ºå…³è”çš„ç”µå½±è¯¦æƒ…é¡µã€‚æŽ¥ä¸‹æ¥çš„ç¤ºä¾‹åŠ¨ç”»ä¼šè®²è§£çš„æ›´æ¸…æ¥šï¼š ä¸ºäº†èŠ‚çº¦æ—¶é—´ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œä¸‹è½½å·¥ç¨‹ï¼Œç„¶åŽå¼€å§‹æˆ‘ä»¬çš„å·¥ä½œã€‚åœ¨å·¥ç¨‹é‡Œé¢ä½ ä¼šå‘çŽ°å¦‚ä¸‹æ‰€ç¤ºçš„å†…å®¹ï¼š ç•Œé¢éƒ¨åˆ†çš„ç»„ä»¶å·²ç»æ­å»ºå®Œæˆï¼Œå¹¶ä¸”åŒ…å«æ‰€æœ‰å¿…è¦çš„IBOutletå±žæ€§ã€‚ æœ€å°åŒ–çš„åˆ—è¡¨è§†å›¾ã€‚ æ‰€æœ‰çš„ç”µå½±æ•°æ®éƒ½å­˜æ”¾åœ¨ä»¥plistä¸ºåŽç¼€çš„æ–‡ä»¶ä¸­ã€‚æ­¤å¤–å›¾ç‰‡æ–‡ä»¶æ˜¯å’Œç”µå½±ä¸€ä¸€å¯¹åº”çš„ï¼ˆä¸€å…±æœ‰5éƒ¨ï¼‰ã€‚ å‡ä½¿ä½ æƒ³çŸ¥é“é¢„å…ˆå‡†å¤‡çš„æ–‡ä»¶ä¸­åŒ…å«äº†å“ªäº›å¯¹åº”ç”µå½±çš„æ•°æ®ï¼Œé‚£ä¹ˆä½ å¯ä»¥é€šè¿‡è¿™ä¸ªæˆªå›¾ç¤ºä¾‹çœ‹åˆ°æ‰€æœ‰åŒ…å«çš„å†…å®¹ã€‚ å…ˆçœ‹ä¸€ä¸‹Core Spotlight APIçš„å…·ä½“ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¼šå¤„ç†ä¸‹é¢ä¸¤ä¸ªä»»åŠ¡ï¼š 1ã€åœ¨åˆ—è¡¨ä¸­åŠ è½½å’Œå±•ç¤ºç”µå½±æ•°æ®ã€‚ 2ã€åœ¨é€‰ä¸­ç”µå½±æ•°æ®åˆ—è¡¨çš„æŸä¸€è¡Œæ—¶ä¼šè·³è½¬åˆ°å¯¹åº”çš„ç”µå½±è¯¦æƒ…ç•Œé¢ã€‚ å¯åŠ¨é¡¹ç›®æ²¡æœ‰å®žçŽ°ä¸Šè¾¹çš„å†…å®¹ï¼Œå°½ç®¡é‚£æ ·ä¹ˆåšä¼šè®©ä½ ä»¬å¿«é€Ÿè¿›åˆ°æˆ‘ä»¬çš„è¯é¢˜ï¼ŒåŽŸå› å¾ˆç®€å•ï¼šæˆ‘å¾ˆç¡®ä¿¡é€šè¿‡æ¼”ç¤ºåº”ç”¨ç¨‹åºçš„æ ¸å¿ƒåŠŸèƒ½å’Œæ•°æ®æ ·æœ¬ï¼Œä½ ä¼šå¾ˆå®¹æ˜“åœ°äº†è§£åˆ°å°†è¦è¢«Spotlightæœç´¢åˆ°çš„å…·ä½“æ•°æ®ã€‚ä½†æ˜¯åˆ«æ‹…å¿ƒï¼Œå› ä¸ºæ‰€æœ‰å‡†å¤‡å·¥ä½œèŠ±è´¹çš„æ—¶é—´å¾ˆå°‘ï¼Œå¹¶ä¸”å¾ˆå¿«å°±å¯å®Œæˆã€‚ åŠ è½½å’Œå±•ç¤ºç¤ºä¾‹æ•°æ® å‡å¦‚æ­¤æ—¶ä½ å·²ç»ä¸‹è½½å¥½äº†èµ·å§‹å·¥ç¨‹ï¼Œå¹¶ä¸”å·²ç»çœ‹è¿‡äº†ç”µå½±æ•°æ®å±žæ€§åˆ—è¡¨ï¼Œé‚£ä¹ˆå°±è®©æˆ‘ä»¬å¼€å§‹Codingå§ã€‚åœ¨MoviesData.plistè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸€å…±æœ‰5æ¡æ•°æ®ï¼Œè¿™äº›æ•°æ®æ˜¯ä»ŽIMDBç½‘ç«™ä¸Šéšæœºé€‰å–çš„ä»–ä»¬å¯¹åº”5ä¸ªç”µå½±ç¤ºä¾‹ã€‚æˆ‘ä»¬ç¬¬ä¸€æ­¥æ˜¯ä»Žplistæ–‡ä»¶ä¸­åŠ è½½æ•°æ®åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œç„¶åŽåœ¨åˆ—è¡¨ä¸­å±•ç¤ºä»–ä»¬ã€‚ åºŸè¯å°‘è¯´ï¼Œç›´æŽ¥ä¸Šä»£ç ã€‚æ‰“å¼€ViewController.swiftè¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªç±»å£°æ˜Žå±žæ€§çš„åœ°æ–¹è¿™ä¹ˆå†™ï¼š var moviesInfo: NSMutableArray! æ‰€æœ‰çš„ç”µå½±æ¨¡åž‹æ•°æ®éƒ½ä¼šè¢«åŠ è½½åˆ°moviesInfoå¯å˜æ•°ç»„ä¸­ï¼Œå•ä¸ªç”µå½±æ¨¡åž‹çš„æ•°æ®å°†ä¼šä»¥é”®å€¼å¯¹çš„æ–¹å¼ä¿å­˜åœ¨å­—å…¸ä¸­ï¼Œå¹¶ä¸”ä»–ä»¬å’Œæ–‡ä»¶ä¸­çš„å±žæ€§åˆ—è¡¨ç›¸åŒ¹é…ã€‚ çŽ°åœ¨è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªåŠ è½½æ•°æ®çš„è‡ªå®šä¹‰å‡½æ•°ã€‚æŽ¥ä¸‹æ¥ä½ ä¼šçœ‹åˆ°ï¼Œæˆ‘ä»¬åªæ˜¯ç¡®ä¿å±žæ€§åˆ—è¡¨æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æžœå­˜åœ¨ï¼Œæˆ‘ä»¬å°±åˆå§‹åŒ–æ•°ç»„çš„æ–‡ä»¶å†…å®¹ï¼š func loadMoviesInfo() { if let path = NSBundle.mainBundle().pathForResource(&quot;MoviesData&quot;, ofType: &quot;plist&quot;) { moviesInfo = NSMutableArray(contentsOfFile: path) }} æŽ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åœ¨viewDidLoad()å‡½æ•°è°ƒç”¨loadMoviesInfoï¼ˆï¼‰å‡½æ•°ã€‚åªæ˜¯ä¸ºäº†ç¡®ä¿ä½ åœ¨è°ƒç”¨configureTableView()å‡½æ•°å‰æ­£ç¡®è°ƒç”¨æ­¤å‡½æ•°ï¼Œä¸‹é¢å±•ç¤ºçš„æ˜¯ä»£ç ç‰‡æ®µï¼š override func viewDidLoad() { super.viewDidLoad() // Load the movies data from the file. loadMoviesInfo() configureTableView() navigationItem.title = &quot;Movies&quot;} è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åªéœ€æŠŠæ–‡ä»¶å†…å®¹åŠ è½½åˆ°viewDidLoad()å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸ºäº†åˆ›å»ºä¸Šè¿°çš„loadMoviesInfo()å‡½æ•°ï¼Œä½†æ˜¯ä½œä¸ºå–œæ¬¢ä»£ç æ•´æ´çš„äººï¼Œå³ä¾¿æ˜¯è¿™ä¹ˆå°çš„äº‹æƒ…ï¼Œéƒ½ä¼šé€‰æ‹©æ›´å¥½çš„æ–¹å¼æ¥å®žçŽ°ã€‚ åº”ç”¨ç¨‹åºæ¯æ¬¡å¯åŠ¨æ—¶éƒ½ä¼šåŠ è½½è¿™äº›ç”µå½±æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­ä¿®æ”¹å½“å‰è§†å›¾åˆ—è¡¨ï¼Œè®©å®ƒæ˜¾ç¤ºç”µå½±ä¿¡æ¯ã€‚éœ€è¦å¤„ç†çš„åªæœ‰è¿™ä¹ˆå¤šï¼šæ ¹æ®ç”µå½±æ•°æ®ä¿¡æ¯å®šä¹‰åˆ—è¡¨çš„è¡Œæ•°ï¼Œç„¶åŽåœ¨è¡¨è§†å›¾çš„å•å…ƒæ ¼ä¸­å±•ç¤ºæ­£ç¡®çš„ç”µå½±æ•°æ®ã€‚ ä»Žåˆ—è¡¨è§†å›¾çš„è¡Œæ•°å¼€å§‹ï¼Œæ˜¾ç„¶åˆ—è¡¨è§†å›¾çš„è¡Œæ•°ç­‰äºŽç”µå½±çš„æ•°ç›®ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ä¸åº”å¿˜è®°ï¼Œè¦ç¡®ä¿åˆ—è¡¨è§†å›¾ä¸­æœ‰ç”µå½±æ•°æ®å±•ç¤ºå‡ºæ¥ï¼Œå¦åˆ™å½“æ–‡ä»¶å†…å®¹ä¸è¢«åŠ è½½åˆ°æ•°ç»„ä¸­æ—¶å°±ä¼šé€ æˆåº”ç”¨ç¨‹åºçš„å´©æºƒã€‚ func tableView(tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int { if moviesInfo != nil { return moviesInfo.count } return 0} æœ€åŽï¼Œè®©æˆ‘ä»¬å±•ç¤ºç”µå½±æ•°æ®ã€‚ä¸ºäº†è¾¾åˆ°æˆ‘ä»¬éœ€è¦çš„ç›®æ ‡ï¼Œåœ¨å¼€å§‹å‡†å¤‡çš„å·¥ç¨‹ä¸­ä½ å¯ä»¥æ‰¾åˆ°UITableViewCellçš„å­ç±»MovieSummaryCellï¼Œå’Œä»£è¡¨ä¸€ä¸ªç”µå½±å•å…ƒæ ¼çš„.xibæ–‡ä»¶ï¼š ç”¨è¿™æ ·çš„ä¸€ä¸ªå•å…ƒæ ¼æ¥å±•ç¤ºæ¯ä¸ªç”µå½±çš„å›¾ç‰‡ã€æ ‡é¢˜ã€éƒ¨åˆ†çš„æè¿°ä¿¡æ¯å’Œç”µå½±è¯„çº§ã€‚æ‰€æœ‰UIæŽ§ä»¶å·²ç»è¿žæŽ¥åˆ°IBOutletå±žæ€§ï¼Œå¹¶ä¸”å¯ä»¥åœ¨MovieSummaryCell.swiftè¿™ä¸ªæ–‡ä»¶æ‰¾åˆ°å¯¹åº”å±žæ€§çš„åç§°ï¼š @IBOutlet weak var imgMovieImage: UIImageView!@IBOutlet weak var lblTitle: UILabel!@IBOutlet weak var lblDescription: UILabel!@IBOutlet weak var lblRating: UILabel! ä¸Šé¢çš„åå­—ä»£è¡¨å„ä¸ªå±žæ€§çš„ç”¨é€”ï¼ŒçŽ°åœ¨æˆ‘ä»¬å·²ç»èƒ½å¤Ÿçœ‹åˆ°å®ƒä»¬ï¼Œæˆ‘ä»¬é€šè¿‡å®ƒä»¬æ¥å±•ç¤ºç”µå½±çš„ç›¸å…³ç»†èŠ‚ã€‚å›žåˆ°ViewController.swiftæ–‡ä»¶ï¼Œæ ¹æ®ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ›´æ–°è¡¨è§†å›¾çš„å‡½æ•°ï¼š func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -&gt; UITableViewCell { let cell = tableView.dequeueReusableCellWithIdentifier(&quot;idCellMovieSummary&quot;, forIndexPath: indexPath) as! MovieSummaryCell let currentMovieInfo = moviesInfo[indexPath.row] as! [String: String] cell.lblTitle.text = currentMovieInfo[&quot;Title&quot;]! cell.lblDescription.text = currentMovieInfo[&quot;Description&quot;]! cell.lblRating.text = currentMovieInfo[&quot;Rating&quot;]! cell.imgMovieImage.image = UIImage(named: currentMovieInfo[&quot;Image&quot;]!) return cell} è™½ç„¶currentMovieInfoè¿™ä¸ªå­—å…¸ä¸æ˜¯å¿…éœ€çš„ï¼Œä½†æ˜¯å®ƒè®©ä¸Šé¢çš„ç®€å•ä»£ç ç¼–å†™çš„æ›´åŠ å®¹æ˜“ã€‚ è¿™æ—¶ä½ å¯ä»¥è¿è¡Œä¸€æ¬¡ä½ çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”å¯ä»¥çœ‹åˆ°ç”µå½±çš„ç»†èŠ‚è¢«å±•ç¤ºåœ¨è¡¨è§†å›¾ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ‰€åšçš„è¿™äº›æ˜¯å¤§å®¶æ‰€ç†ŸçŸ¥çš„,æ‰€ä»¥ç›´æŽ¥åˆ°ç¬¬äºŒä¸ªæ­¥éª¤:æ˜¾ç¤ºæ‰€é€‰ç”µå½±çš„ç»†èŠ‚ã€‚ æ•°æ®ç»†èŠ‚å±•ç¤º åœ¨MovieDetailsViewControllerè¿™ä¸ªç±»ä¸­ï¼Œæˆ‘ä»¬å°†è¦å±•ç¤ºåœ¨ViewControllerç±»ä¸­tableViewä¸Šé€‰ä¸­çš„ç”µå½±çš„ç»†èŠ‚ã€‚æ‰€æœ‰çš„ç•Œé¢æž„å»ºå·²ç»å®Œæˆ,çŽ°åœ¨æˆ‘ä»¬å¿…é¡»åšä¸¤ä»¶äº‹ï¼šæŠŠåŒ…å«ç”µå½±ä¿¡æ¯çš„å­—å…¸ä»ŽViewControllerç±»ä¼ åˆ°MovieDetailsViewControllerç±»ä¸­ï¼Œç„¶åŽä»Žå­—å…¸å–å€¼èµ‹å€¼ç»™è¿™ä¸ªç±»ä¸­ç›¸åº”çš„UIæŽ§ä»¶ï¼Œè¿™äº›æŽ§ä»¶çš„IBOutletå±žæ€§éƒ½å·²ç»è¢«å£°æ˜Žå¹¶ä¸”å·²ç»æ­£ç¡®çš„è¿žæŽ¥åˆ°å•ä¸ªUIç»„ä»¶ä¸Šã€‚ æ‰€ä»¥ï¼Œè¯´åˆ°å­—å…¸ï¼Œè®©æˆ‘ä»¬åœ¨MovieDetailsViewControllerç±»ä¸­åšä¸‹é¢çš„å£°æ˜Žï¼š var movieInfo: [String: String]! å›žåˆ°ViewController.swiftæ–‡ä»¶ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ç‚¹å‡»è¡¨è§†å›¾çš„è¡Œæ—¶éœ€è¦åšçš„å·¥ä½œæœ‰å“ªäº›ã€‚å½“ç‚¹å‡»åˆ—è¡¨çš„ä¸€è¡Œæ—¶ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ç‚¹å‡»è¡Œçš„ç´¢å¼•ï¼Œä»¥ä¾¿äºŽä»ŽmoviesInfoæ•°ç»„é€‰æ‹©åˆé€‚çš„å­—å…¸ï¼Œç„¶åŽåœ¨è§†å›¾è·³è½¬çš„æ—¶å€™æŠŠå­—å…¸ä¼ é€’åˆ°ä¸‹ä¸€ä¸ªè§†å›¾æŽ§åˆ¶å™¨ã€‚ä»Žtableviewçš„å§”æ‰˜æ–¹æ³•ä¸­èŽ·å–è¡Œç´¢å¼•æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè‡ªå®šä¹‰çš„å±žæ€§æ¥å­˜å‚¨å®ƒï¼Œå› æ­¤åœ¨ViewControllerç±»çš„é¡¶éƒ¨æˆ‘ä»¬éœ€è¦è¿™ä¹ˆå£°æ˜Ž: var selectedMovieIndex: Int! ç„¶åŽï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä¸‹é¢çš„æ–¹å¼å¤„ç†tableViewä¸­é€‰ä¸­rowçš„ç´¢å¼•: func tableView(tableView: UITableView, didSelectRowAtIndexPath indexPath: NSIndexPath) { selectedMovieIndex = indexPath.row performSegueWithIdentifier(&quot;idSegueShowMovieDetails&quot;, sender: self)} æœ‰ä¸¤ä¸ªç®€å•çš„äº‹æƒ…éœ€è¦å¤„ç†ï¼šç¬¬ä¸€æ˜¯æŠŠç‚¹å‡»çš„è¡Œçš„ç´¢å¼•å­˜å‚¨åœ¨æˆ‘ä»¬è‡ªå®šä¹‰çš„selectedMovieIndexå±žæ€§ä¸­,ç„¶åŽæ‰§è¡Œè·³è½¬åˆ°å±•ç¤ºç”µå½±è¯¦æƒ…çš„ç•Œé¢ã€‚ç„¶è€Œï¼Œè¿™æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æœªä»ŽmoviesInfoæ•°ç»„ä¸­é€‰æ‹©ç›¸åº”çš„åŒ…å«ç”µå½±ä¿¡æ¯çš„å­—å…¸ï¼Œå¹¶æŠŠå®ƒä¼ é€’åˆ°MovieDetailsViewControllerè¿™ä¸ªç±»ä¸­ã€‚æˆ‘ä»¬è¯¥æ€Žä¹ˆåšå‘¢ï¼Ÿé‡å†™prepareForSegue:sender:å‡½æ•°ï¼Œå¹¶å®žçŽ°æˆ‘åˆšåˆšæè¿°çš„åŠŸèƒ½ã€‚ä¸‹é¢æ˜¯ä»£ç ï¼Œè¯·çœ‹ï¼š override func prepareForSegue(segue: UIStoryboardSegue, sender: AnyObject?) { if let identifier = segue.identifier { if identifier == &quot;idSegueShowMovieDetails&quot; { let movieDetailsViewController = segue.destinationViewController as! MovieDetailsViewController movieDetailsViewController.movieInfo = moviesInfo[selectedMovieIndex] as! [String : String] } }} å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªé€šè¿‡destinationViewControllerçš„segueå±žæ€§èŽ·å¾—MovieDetailsViewControllerå®žä¾‹ï¼Œç„¶åŽæˆ‘ä»¬å°†åŒ…å«ç”µå½±ä¿¡æ¯çš„å­—å…¸å€¼èµ‹ç»™æˆ‘ä»¬è¿™éƒ¨åˆ†å¼€å§‹æ—¶å£°æ˜Žçš„movieInfoå±žæ€§ã€‚ çŽ°åœ¨ï¼Œå†æ¬¡æ‰“å¼€MovieDetailsViewController.swiftæ–‡ä»¶ï¼Œæˆ‘ä»¬å°†ä¼šåœ¨è¿™é‡Œå®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰çš„å‡½æ•°ã€‚åœ¨å®ƒé‡Œé¢ï¼Œæˆ‘ä»¬å°†ä¼šä»ŽmovieInfoå­—å…¸ä¸­å–å€¼èµ‹ç»™é‚£äº›ç›¸åº”çš„æŽ§ä»¶ï¼Œé‚£ä¹ˆè¿™éƒ¨åˆ†çš„å·¥ä½œåˆ°è¿™é‡Œå°±å°±ç»“æŸäº†ã€‚ä¸‹é¢çš„ä»£ç æ˜¯ä¸€ä¸ªç®€å•çš„å®žçŽ°ï¼Œæ‰€ä»¥ä¸å†åšè¿›ä¸€æ­¥çš„æŽ¢è®¨ï¼š func populateMovieInfo() { lblTitle.text = movieInfo[&quot;Title&quot;]! lblCategory.text = movieInfo[&quot;Category&quot;]! lblDescription.text = movieInfo[&quot;Description&quot;]! lblDirector.text = movieInfo[&quot;Director&quot;]! lblStars.text = movieInfo[&quot;Stars&quot;]! lblRating.text = movieInfo[&quot;Rating&quot;]! imgMovieImage.image = UIImage(named: movieInfo[&quot;Image&quot;]!)} æœ€åŽï¼Œåœ¨viewWillAppearï¼šä¸­å‡½æ•°è°ƒç”¨ä¸Šé¢çš„å‡½æ•°ï¼Œä»£ç å¦‚ä¸‹ override func viewWillAppear(animated: Bool) { â€¦ if movieInfo != nil { populateMovieInfo() }} è¿™ä¸€éƒ¨åˆ†å·²ç»ç»“æŸã€‚å†è¿è¡Œä¸€ä¸‹ä½ çš„åº”ç”¨ç¨‹åºï¼Œä¸€æ—¦ä½ é€‰ä¸­tableViewä¸­çš„æŸä¸€ä¸ªç”µå½±æœºå°±ä¼šçœ‹åˆ°ç”µå½±çš„è¯¦ç»†ä»‹ç»ã€‚ ä¸ºSpotlightæ·»åŠ appçš„ç´¢å¼•æ•°æ® é€šè¿‡ä½¿ç”¨iOS9ä¸­æä¾›çš„Core Spotlight æ¡†æž¶ï¼Œä½¿å¾—ä»»ä½•ä¸€æ¬¾åº”ç”¨éƒ½å¯ä»¥é€šè¿‡SpotlightåŠŸèƒ½è¢«æœç´¢åˆ°ã€‚åœ¨Spotlightä¸Šé€šè¿‡ç”¨æˆ·çš„æœç´¢è¡Œä¸ºæ‰¾åˆ°appçš„å…³é”®åœ¨äºŽä½¿ç”¨Core Spotlight APIç´¢å¼•åˆ°æˆ‘ä»¬åº”ç”¨çš„æ•°æ®ã€‚ä½†æ˜¯æ—¢ä¸æ˜¯æˆ‘ä»¬çš„appä¹Ÿæ˜¯ä¸æ˜¯CS APIæŽ¥å£å†³å®šåº”è¯¥è®¾ç½®ä»€ä¹ˆç±»åž‹çš„æ•°æ®ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æä¾›ç‰¹å®šçš„æ•°æ®æ ¼å¼ç»™ APIæŽ¥å£ã€‚ å†å…·ä½“ç‚¹æ¥è¯´ï¼Œå°±æ˜¯æˆ‘ä»¬æƒ³é€šè¿‡SpotlightåŠŸèƒ½æœç´¢åˆ°å¾—æ•°æ®å¿…é¡»å°è£…æˆCSSearchableItemç±»åž‹çš„å¯¹è±¡ï¼Œç„¶åŽä¸€èµ·ç»„è£…åˆ°æ•°ç»„ä¸­å¹¶æŠŠè¿™ä¸ªæ•°ç»„ä¼ é€’ç»™CS API ä¸­ä¾›å®ƒç´¢å¼•ã€‚å•ä¸ªçš„CSSearchableItemå¯¹è±¡åŒ…å«ä¸€ç³»åˆ—çš„å±žæ€§ï¼Œè¿™äº›å±žæ€§ä½¿å¾—iOSç³»ç»Ÿå¯æœç´¢å¯¹è±¡çš„ç»†èŠ‚æ›´åŠ æ¸…æ¥šã€‚åƒåœ¨æœç´¢æ—¶åº”è¯¥å±•ç¤ºå“ªäº›æ•°æ®ç‰‡æ®µï¼ˆä¾‹å¦‚ï¼šç”µå½±åç§°ã€å›¾ç‰‡å’Œå½±è§†ç®€ä»‹ç­‰ï¼‰ï¼Œå“ªäº›appçš„æ•°æ®å…³é”®å­—éœ€è¦åœ¨Spotlightä¸Šå±•ç¤ºã€‚CSSearchableItemAttributeSet ç±»å¯¹è±¡ä¸º CSSearchableItemå¯¹è±¡æäº†è®¸å¤šå±žæ€§ï¼Œåªéœ€ä¸ºæˆ‘ä»¬æ‰€éœ€è¦çš„å±žæ€§èµ‹å€¼å°±å¥½äº†ã€‚æŸ¥çœ‹ å®˜æ–¹æ–‡æ¡£ ï¼Œä½ å¯ä»¥æ‰¾åˆ°æ‰€æœ‰æ”¯æŒçš„å±žæ€§ã€‚ æœ€åŽä¸€æ­¥é€šå¸¸è¦åšçš„æ˜¯ä¸ºSpotlightåŠŸèƒ½æ·»åŠ ç´¢å¼•æ•°æ®ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå®žçŽ°æµç¨‹å¦‚ä¸‹æ­¥éª¤æ‰€ç¤ºï¼ˆåŒ…å«æ·»åŠ ç´¢å¼•ï¼‰ï¼š 1ã€ç»™æ¯ä¸€æ¡æ•°æ®è®¾ç½®å±žæ€§ï¼Œä¾‹å¦‚ç”µå½±æ¨¡åž‹æ•°æ®(è®¾ç½®CSSearchableItemAttributeSetå¯¹è±¡)ã€‚ 2ã€ä½¿ç”¨ä¸Šä¸€æ­¥çš„å±žæ€§å€¼(CSSearchableItemå¯¹è±¡)ï¼Œä¸ºæ¯ä¸€æ¡æ•°æ®åˆå§‹åŒ–æœç´¢é¡¹å¹¶èµ‹å€¼ã€‚ 3ã€æ”¶é›†æ‰€æœ‰çš„å¯æœç´¢é¡¹æ”¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ã€‚ 4ã€ä½¿ç”¨ä¸Šä¸ªæ­¥éª¤çš„æ•°ç»„ä½œä¸ºSpotlightçš„ç´¢å¼•æ•°æ®ã€‚ æˆ‘ä»¬å°†æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤ä¸€ä¸ªä¸€ä¸ªçš„å®žçŽ°ï¼Œä¸ºäº†è¾¾åˆ°ç›®æ ‡ï¼Œæˆ‘ä»¬å°†ä¼šåœ¨ViewController.swiftè¿™ä¸ªæ–‡ä»¶å†…åˆ›å»ºä¸€ä¸ªå«åšsetupSearchableContentï¼ˆï¼‰çš„å‡½æ•°ã€‚åœ¨è¿™éƒ¨åˆ†åŠŸèƒ½å®žçŽ°ç»“æŸä¹‹é™…ï¼Œä½ ä¼šå‘çŽ°å®žçŽ°è®©ä½ çš„æ•°æ®å¯ä»¥è¢«æœç´¢åˆ°çš„åŠŸèƒ½ä¸€ç‚¹ä¹Ÿä¸éš¾ã€‚ä¸è¿‡ï¼Œæˆ‘ä¸ä¼šä¸€æ¬¡æ€§ç»™ä½ æ‰€æœ‰çš„å®žçŽ°ä»£ç ï¼›ç›¸åï¼Œä¸ºäº†ä½ æ›´å®¹æ˜“ç†è§£ï¼Œæˆ‘æ‰“ç®—æŠŠä»£ç åˆ†ä¸ºç‰‡æ®µã€‚åˆ«æ‹…å¿ƒï¼Œä»£ç é‡å¹¶ä¸æ˜¯é‚£ä¹ˆå¤šã€‚ åœ¨æˆ‘ä»¬å¼€å§‹å®žçŽ°æ–°åŠŸèƒ½ä¹‹å‰,æˆ‘ä»¬å¿…é¡»å…ˆå¯¼å…¥ä¸¤ä¸ªæ¡†æž¶: import CoreSpotlightimport MobileCoreServices æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ–°çš„æ–¹æ³•ï¼ŒåŒæ—¶åœ¨æ–¹æ³•ä¸­å£°æ˜Žä¸€ä¸ªç”¨æ¥å­˜æ”¾æˆ‘ä»¬æœé›†åˆ°çš„æœç´¢é¡¹çš„æ•°ç»„ï¼š func setupSearchableContent() { var searchableItems = CSSearchableItem} çŽ°åœ¨åœ¨ä¸€ä¸ªforå¾ªçŽ¯ä¸­è®¿é—®æ¯ä¸€ä¸ªåŒ…å«ç”µå½±ä¿¡æ¯çš„å­—å…¸ï¼š func setupSearchableContent() { var searchableItems = CSSearchableItem for i in 0â€¦(moviesInfo.count - 1) { let movie = moviesInfo[i] as! [String: String] }} æˆ‘ä»¬å°†ä¸ºæ¯ä¸€éƒ¨ç”µå½±åˆ›å»ºä¸€ä¸ªCSSearchableItemAttributeSetå¯¹è±¡ï¼Œç„¶åŽæˆ‘ä»¬å°†ä¸ºæœç´¢é¡¹æ•°æ®è®¾ç½®å±žæ€§ï¼Œè¿™äº›æœç´¢é¡¹æ•°æ®å°†ä¼šåœ¨ç”¨æˆ·ä½¿ç”¨Spotlightæœç´¢æ—¶ä½œä¸ºæœç´¢ç»“æžœå±•ç¤ºå‡ºæ¥ã€‚åœ¨demo Appä¸­ï¼Œæˆ‘ä»¬å°†æŠŠç”µå½±çš„æ ‡é¢˜ã€ç®€ä»‹å’Œå›¾ç‰‡ä½œä¸ºæ•°æ®å±•ç¤ºç»™ç”¨æˆ·ã€‚ func setupSearchableContent() { var searchableItems = CSSearchableItem for i in 0â€¦(moviesInfo.count - 1) { let movie = moviesInfo[i] as! [String: String] let searchableItemAttributeSet = CSSearchableItemAttributeSet(itemContentType: kUTTypeText as String) // Set the title. searchableItemAttributeSet.title = movie[&quot;Title&quot;]! // Set the movie image. let imagePathParts = movie[&quot;Image&quot;]!.componentsSeparatedByString(&quot;.&quot;) searchableItemAttributeSet.thumbnailURL = NSBundle.mainBundle().URLForResource(imagePathParts[0], withExtension: imagePathParts[1]) // Set the description. searchableItemAttributeSet.contentDescription = movie[&quot;Description&quot;]! }} æ³¨æ„ä¸Šé¢çš„ç‰‡æ®µä»£ç ä¸­æˆ‘ä»¬æ˜¯å¦‚ä½•è®¾ç½®ç”µå½±æ•°æ®æ¨¡åž‹ä¸­å›¾ç‰‡å±žæ€§çš„ã€‚æœ‰ä¸¤ç§å®žçŽ°æ–¹æ³•ï¼šä¸€ç§æ˜¯ä¸ºimgeåˆ¶å®šä¸€ä¸ªURLé“¾æŽ¥ï¼Œå¦ä¸€ç§æ˜¯ä¸ºimageæä¾›ä¸€ä¸ªNSDataå¯¹è±¡ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä¸ºæ¯ä¸€ä¸ªç”µå½±å›¾ç‰‡æ–‡ä»¶æä¾›ä¸€ä¸ªURL,å› ä¸ºæˆ‘ä»¬çŸ¥é“å®ƒä»¬å°±åœ¨ç¨‹åºåº”ç”¨åŒ…é‡Œé¢ã€‚ç„¶è€Œï¼Œè¿™æ ·åšå°±éœ€è¦æˆ‘ä»¬æŠŠæ¯ä¸ªå›¾ç‰‡æ–‡ä»¶ååˆ†å‰²æˆå®žé™…åç§°å’Œæ‰©å±•ç±»åž‹ï¼Œå› æ­¤æˆ‘ä»¬ç”¨Stringç±»çš„ componentsSeparatedByString:æ–¹æ³•å°†è¿™ä¸¤ä¸ªå€¼åˆ†å¼€ã€‚å‰©ä¸‹çš„ä»£ç å°±å®¹æ˜“ç†è§£äº†ã€‚ çŽ°åœ¨æ˜¯æ—¶å€™ä¸ºappåœ¨Spotlightä¸Šè®¾ç½®æˆ‘ä»¬æƒ³è¦çš„dataçš„å…³é”®å­—äº†ã€‚æŒ‡å®šå…³é”®å­—ä¹‹å‰è¦è®¤çœŸè€ƒè™‘ï¼Œå› ä¸ºä½ çš„å†³å®šå¯¹ç”¨æˆ·å’ŒAppåœ¨Spotlightä¸Šçš„æ›å…‰çŽ‡èµ·ç€æœ€ç»ˆçš„å†³å®šæ€§ä½œç”¨ã€‚åœ¨demo Appä¸­æˆ‘ä»¬æŠŠç”µå½±æ‰€å±žçš„ç±»åˆ«å’Œæ¼”å‘˜è®¾ç½®æˆå…³é”®å­—ã€‚ func setupSearchableContent() { var searchableItems = CSSearchableItem for i in 0â€¦(moviesInfo.count - 1) { â€¦ var keywords = String let movieCategories = movie[&quot;Category&quot;]!.componentsSeparatedByString(&quot;, &quot;) for movieCategory in movieCategories { keywords.append(movieCategory) } let stars = movie[&quot;Stars&quot;]!.componentsSeparatedByString(&quot;, &quot;) for star in stars { keywords.append(star) } searchableItemAttributeSet.keywords = keywords }} è®°ä½ï¼Œç”µå½±çš„æ‰€æœ‰ç±»åˆ«å±žæ€§åœ¨MoviesData.plistæ–‡ä»¶ä¸­æ˜¯ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²å€¼æ¥è¡¨ç¤ºçš„ï¼Œå¹¶ä¸”å®ƒä»¬è¢«é€—å·éš”å¼€ã€‚æ‰€ä»¥å¾ˆæœ‰å¿…è¦æŠŠè¿™ä¸ªå­—ç¬¦ä¸²åˆ†å‰²å‡ºå„ç§ç”µå½±çš„ç§ç±»ä½¿ä»–ä»¬æˆä¸ºå„ä¸ªå•ç‹¬çš„å€¼ï¼Œç„¶åŽæŠŠä»–ä»¬å­˜å…¥movieCategoriesæ•°ç»„ä¸­ä»¥æ–¹ä¾¿åŠæ—¶è®¿é—®ã€‚ç„¶åŽç”¨ä¸€ä¸ªforå¾ªçŽ¯åœ¨keywordsæ•°ç»„ä¸­æ·»åŠ åˆ†ç±»çš„å…³é”®å­—ã€‚å¯¹ç”µå½±æ•°æ®æ¨¡åž‹çš„æ˜Žæ˜Ÿå±žæ€§ä½¿ç”¨ç›¸åŒçš„æ­¥éª¤ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å†æ¬¡æŠŠåŒ…å¥½æ‰€æœ‰æ˜Žæ˜Ÿåå­—çš„å­—ç¬¦ä¸²åˆ†å‰²æˆå•ç‹¬çš„å€¼ï¼Œç„¶åŽæŠŠä»–ä»¬å­˜å…¥keywordsæ•°ç»„ä¸­ã€‚ ä¸Šé¢çš„ç‰‡æ®µä»£ç ä¸­æœ€åŽä¸€å¥ä»£ç æ˜¯å¾ˆé‡è¦çš„ï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸€ä¸ªç”µå½±æ•°æ®æ¨¡åž‹è®¾ç½®äº†å…³é”®å­—å±žæ€§ã€‚å¿˜è®°äº†è¿™ä¸€ç‚¹ï¼Œå½“ç”¨Spotlightæœç´¢æ—¶å°†ä¸ä¼šå‡ºçŽ°ä»»ä½•å…³äºŽæˆ‘ä»¬appçš„ç»“æžœã€‚ æˆ‘ä»¬å·²ç»ä¸ºSpotlightè®¾ç½®äº†å±žæ€§å’Œå…³é”®å­—ï¼Œé‚£ä¹ˆçŽ°åœ¨æ˜¯æ—¶å€™åˆå§‹åŒ–æœç´¢é¡¹ï¼Œå¹¶ä¸”æŠŠå®ƒä»¬æ·»åŠ åˆ°searchableItemsæ•°ç»„ä¸­ï¼Œä»£ç å¦‚ä¸‹ï¼š func setupSearchableContent() { var searchableItems = CSSearchableItem for i in 0â€¦(moviesInfo.count - 1) { â€¦ let searchableItem = CSSearchableItem(uniqueIdentifier: &quot;com.appcoda.SpotIt.(i)&quot;, domainIdentifier: &quot;movies&quot;, attributeSet: searchableItemAttributeSet) searchableItems.append(searchableItem) }} ä¸Šè¿°searchableItemå¯¹è±¡çš„åˆå§‹åŒ–æŽ¥å—äº†ä¸‰ä¸ªå‚æ•°: uniqueIdentifierï¼šè¿™ä¸ªå‚æ•°å”¯ä¸€åœ°æ ‡è¯†Spotlightå½“å‰æœç´¢é¡¹ã€‚ä½ å¯ä»¥ç”¨ä½ å–œæ¬¢çš„æ–¹å¼æž„é€ è¿™ä¸ªå”¯ä¸€æ ‡ç¤ºç¬¦ï¼Œä½†æ˜¯æ³¨æ„ä¸€ä¸ªç»†èŠ‚ï¼šåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¸ºå½“å‰ç”µå½±æ·»åŠ äº†ç´¢å¼•æ ‡ç¤ºç¬¦ï¼Œå› ä¸ºä¹‹åŽæˆ‘ä»¬éœ€è¦ç”¨å®ƒæ¥åŒ¹é…ç´¢å¼•ç›¸å¯¹åº”å¾—ç”µå½±ç»†èŠ‚å±•ç¤ºç•Œé¢ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œåœ¨å”¯ä¸€æ ‡è¯†ç¬¦çš„å€¼é‡Œé¢æ·»åŠ è¯¦æƒ…é¡µè¦å±•ç¤ºçš„æ•°æ®æ˜¯ä¸ªå¥½ä¸»æ„ã€‚ä¸€ä¼šä½ å°†ä¼šæ›´å¥½çš„ç†è§£ç”µå½±æ•°æ®æ¨¡åž‹çš„ç´¢å¼•å€¼çš„ç”¨é€”ã€‚ domainIdentifier:ä½¿ç”¨è¿™ä¸ªå‚æ•°å¯¹æœç´¢é¡¹è¿›è¡Œåˆ†ç»„ã€‚ attributeSetï¼šå®ƒå°±æ˜¯æˆ‘ä»¬åˆšåˆšè®¾ç½®å±žæ€§æ—¶çš„å±žæ€§è®¾ç½®å¯¹è±¡ã€‚ åœ¨æœ€åŽï¼ŒæŠŠæ–°çš„æœç´¢é¡¹æ·»åŠ åˆ°searchableItemsæ•°ç»„ä¸­ã€‚ è¿˜æœ‰æœ€åŽä¸€æ­¥éœ€è¦åšï¼Œç”¨Core Spotlightçš„APIåŽ»ç´¢å¼•è¿™äº›æœç´¢é¡¹ã€‚å®ƒå‘ç”Ÿåœ¨forå¾ªçŽ¯ä¹‹å¤–åœ°æ–¹: func setupSearchableContent() { â€¦ CSSearchableIndex.defaultSearchableIndex().indexSearchableItems(searchableItems) { (error) -&gt; Void in if error != nil { print(error?.localizedDescription) } }} ä¸Šé¢çš„å‡½æ•°å·²ç»å®Œæˆï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦è°ƒç”¨å®ƒã€‚æˆ‘ä»¬å°†ä¼šåœ¨viewDidLoadï¼ˆï¼‰å‡½æ•°ä¸­è°ƒç”¨å®ƒï¼š override func viewDidLoad() { â€¦ setupSearchableContent()} çŽ°åœ¨æˆ‘ä»¬å‡†å¤‡ç¬¬ä¸€æ¬¡å¼€å§‹ç”¨Spotlightæœç´¢ç”µå½±ã€‚è¿è¡Œappï¼Œç„¶åŽé€€å‡ºappä½¿ç”¨Spotlightæœç´¢ä¸Šé¢æˆ‘ä»¬è®¾ç½®çš„å…³é”®å­—ã€‚ç»“æžœå°†ä¼šå±•çŽ°åˆ°ä½ çœ¼å‰,é€šè¿‡ç‚¹å‡»æœç´¢ç»“æžœä¸­çš„ä»»æ„é¡¹ï¼Œè¿™ä¸ªappå°†è‡ªåŠ¨å¯åŠ¨ã€‚ å®žçŽ°ç›®æ ‡ å½“ç”¨Spotlightæœç´¢æ—¶ï¼Œèƒ½å¤Ÿä»Žåº”ç”¨ç¨‹åºä¸­æœç´¢åˆ°ç”µå½±æ•°æ®æ˜¯ä¼šç»™äººæ·±åˆ»çš„å°è±¡ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜å¯ä»¥æ¯”è¿™åšçš„æ›´å¥½ã€‚çŽ°åœ¨ï¼Œå½“é€‰æ‹©ä¸€ä¸ªæœç´¢ç»“æžœæ—¶ï¼Œå°±ä¼šå¯åŠ¨åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”å±•ç¤ºå‡ºViewControllerè¿™ä¸ªç•Œé¢ï¼Œä½†æ˜¯æˆ‘ä»¬ç›®æ ‡æ˜¯ç›´æŽ¥è¿›åˆ°å±•ç¤ºç”µå½±ç»†èŠ‚ç•Œé¢å¹¶å¯ä»¥ç›´æŽ¥çœ‹åˆ°æ‰€é€‰æ‹©ç”µå½±çš„ä¿¡æ¯ã€‚ å°½ç®¡è¿™å¬èµ·æ¥æ¯”è¾ƒå›°éš¾ï¼Œæˆ–è€…éš¾ä»¥å®žçŽ°ï¼Œä½†æ˜¯æœ€ç»ˆä½ ä¼šå‘çŽ°å®ƒå¾ˆç®€å•ã€‚åœ¨è¿™ä¸ªæŒ‡å®šçš„demo appä¸­ï¼Œæ ¹æ®æˆ‘ä»¬çŽ°æœ‰çš„æ•°æ®å±•ç¤ºæ‰€é€‰ç”µå½±é¡¹çš„è¯¦ç»†ä¿¡æ¯ä¼šæ›´ç®€å•ã€‚ è¿™é‡Œä¸»è¦çš„å·¥ä½œæ˜¯é‡å†™UIKitä¸­çš„ä¸€ä¸ªåå­—å«åšrestoreUserActivityStateï¼šçš„å‡½æ•°ï¼Œå¹¶å¤„ç†Spotlightä¸Šé€‰ä¸­çš„ç»“æžœé¡¹ã€‚æˆ‘ä»¬æœ€ç»ˆçš„ç›®æ ‡æ˜¯ä»Žæœç´¢é¡¹çš„æ ‡è¯†ç¬¦ï¼ˆå¦‚æžœä½ è¿˜è®°å¾—è¯ï¼Œæˆ‘ä»¬åœ¨ä¸Šä¸€ä¸ªéƒ¨åˆ†åŠ¨æ€çš„åˆ›å»ºäº†æ ‡è¯†ç¬¦ï¼‰ä¸­æå–å‡ºåœ¨moviesInfoarrayæ•°ç»„ä¸­çš„ç”µå½±æ¨¡åž‹çš„ç´¢å¼•å€¼ï¼Œç„¶åŽç”¨å®ƒä¼ é€’ä¸€ä¸ªæ­£ç¡®çš„ç”µå½±æ•°æ®å­—å…¸å¹¶å±•ç¤ºMovieDetailsViewControllerè§†å›¾ã€‚ restoreUserActivityStateï¼šå‡½æ•°çš„å‚æ•°æ˜¯NSUserActivityå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ªå­—å…¸ç±»åž‹çš„å±žæ€§åä¸ºuserInfo,è¿™ä¸ªå­—å…¸åŒ…å«Spotlightä¸Šé€‰ä¸­æœç´¢é¡¹çš„æ ‡è¯†ç¬¦ã€‚ä»Žè¿™ä¸ªæ ‡è¯†ç¬¦ä¸­æˆ‘ä»¬å¯ä»¥æå–å‡ºmoviesInfoæ•°ç»„ä¸­ç”µå½±æ•°æ®æ¨¡åž‹çš„ç´¢å¼•å€¼ï¼Œç„¶åŽæˆ‘ä»¬å°±å¯ä»¥å±•ç¤ºç”µå½±è¯¦æƒ…é¡µé¢çš„è§†å›¾äº†ã€‚å°±è¿™ä¹ˆå¤šï¼Œä¸‹é¢çœ‹ä¸€ä¸‹ä»£ç å®žçŽ°ï¼š override func restoreUserActivityState(activity: NSUserActivity) { if activity.activityType == CSSearchableItemActionType { if let userInfo = activity.userInfo { let selectedMovie = userInfo[CSSearchableItemActivityIdentifier] as! String selectedMovieIndex = Int(selectedMovie.componentsSeparatedByString(&quot;.&quot;).last!) performSegueWithIdentifier(&quot;idSegueShowMovieDetails&quot;, sender: self) } }} å¦‚ä½ æ‰€è§ï¼Œæœ‰å¿…è¦å…ˆæ£€æŸ¥activity typeæ˜¯å¦å’ŒCSSearchableItemActionTypeåŒ¹é…ã€‚è€å®žè¯´ï¼Œåœ¨ç¤ºä¾‹ç¨‹åºä¸­è¿™ä¸ªå¹¶ä¸é‡è¦ï¼Œä½†æ˜¯å¦‚æžœä½ åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­å¤„ç†å¤šä¸ªNSUserActivityå¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œæœ‰äº›äº‹æ˜¯ä¸åº”è¯¥å¿˜è®°çš„åšçš„ï¼ˆä¾‹å¦‚ï¼ŒHandoff featureæ˜¯ios8é¦–æ¬¡æå‡ºæ¥çš„ï¼Œå¹¶ä¸”å®ƒå……åˆ†ä½¿ç”¨äº†NSUserActivityclassç±»ï¼‰ã€‚åœ¨useInfoå­—å…¸ä¸­identiferå¯¹è±¡æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä¸€æ—¦æˆ‘ä»¬å¾—åˆ°å®ƒï¼Œæˆ‘ä»¬å°†åŸºäºŽç‚¹ç¬¦å·æˆªå–è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬ä»Žæˆªå–çš„å­—ç¬¦ä¸²æ•°ç»„ä¸­å–å‡ºæœ€åŽä¸€ä¸ªå¯¹è±¡å°±æ˜¯é€‰ä¸­çš„ç”µå½±æ•°æ®æ¨¡åž‹åœ¨ç”µå½±æ•°æ®æ¨¡åž‹æ•°ç»„ä¸­çš„ç´¢å¼•å€¼ã€‚å‰©ä¸‹çš„å°±å·¥ä½œå°±æ¯”è¾ƒç®€å•ï¼šå°†è¿™ä¸ªç´¢å¼•å€¼å¤åˆ¶ç»™selectedMovieIndexå±žæ€§ï¼Œç„¶åŽæ‰§è¡Œè·³è½¬ã€‚æˆ‘ä»¬ä¹‹å‰çš„å®žçŽ°å°†ä¼šå®Œæˆå‰©ä½™çš„å·¥ä½œã€‚ çŽ°åœ¨åˆ‡æ¢åˆ°AppDelegate.swiftæ–‡ä»¶ã€‚æˆ‘ä»¬éœ€è¦å®žçŽ°ä¸€ä¸ªçŽ°åœ¨è¿˜æœªå®žçŽ°çš„ä»£ç†å‡½æ•°ã€‚æ¯æ¬¡ç‚¹å‡»åœ¨Spotlightä¸Šæœç´¢çš„ä¸€ä¸ªç»“æžœæ—¶ï¼Œé‚£ä¸ªå‡½æ•°å°±ä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œæˆ‘ä»¬çŽ°åœ¨çš„ä»»åŠ¡æ˜¯è°ƒç”¨æˆ‘ä»¬ä¸Šé¢å·²ç»å®žçŽ°çš„å‡½æ•°ï¼Œä¼ é€’userActivityå¯¹è±¡ï¼Œè¯·çœ‹ä¸‹é¢çš„å®žçŽ°ä»£ç ï¼š func application(application: UIApplication, continueUserActivity userActivity: NSUserActivity, restorationHandler: ([AnyObject]?) -&gt; Void) -&gt; Bool { let viewController = (window?.rootViewController as! UINavigationController).viewControllers[0] as! ViewController viewController.restoreUserActivityState(userActivity) return true} åœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œæˆ‘ä»¬è¦åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯é€šè¿‡windowå±žæ€§è®¿é—®ViewControllerè§†å›¾æŽ§åˆ¶å™¨ï¼Œä»¥æ¢å¤åˆ°ä¹‹å‰çš„ç”¨æˆ·æ´»åŠ¨çŠ¶æ€ã€‚æˆ–è€…ï¼Œä¸ç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œä½ å¯ä»¥ç”¨NSNotificationCenterç±»å‘é€ä¸€ä¸ªè‡ªå®šä¹‰çš„é€šçŸ¥ï¼Œç„¶åŽåœ¨ViewController ç±»ä¸­å¤„ç†è¿™ä¸ªé€šçŸ¥ï¼Œä½†ä¸Šé¢çš„æ–¹æ³•æ›´ç›´æŽ¥ã€‚ å°±è¿™ä¹ˆå¤šï¼æˆ‘ä»¬çš„ç¤ºä¾‹åº”ç”¨å·²ç»å®Œæˆäº†ï¼Œæ‰€ä»¥å†æ¬¡è¿è¡Œå®ƒï¼Œçœ‹çœ‹ä½ åœ¨ä½¿ç”¨Spotlightæœç´¢ç”µå½±æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ æ€»ç»“ iOS 9 ä¸­æ–°çš„æœç´¢APIå¯¹å¼€å‘è€…æ¥è¯´çœ‹èµ·æ¥ç›¸å½“çš„å¸å¼•äººï¼Œå®ƒä»¬ä½¿å¾—ç”¨æˆ·æ›´å®¹æ˜“å‘çŽ°å’Œè®¿é—®APPã€‚åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­æˆ‘ä»¬å®žçŽ°äº†æ‰€æœ‰Spotlightæœç´¢Appæ•°æ®çš„ç›¸å…³æ“ä½œï¼ŒåŒ…æ‹¬æ–¹ä¾¿ç”¨æˆ·åœ¨Spotlightä¸Šæœç´¢æ—¶Appæ•°æ®ç´¢å¼•ï¼Œä»¥åŠå¦‚ä½•æŠŠé€‰ä¸­çš„ç»“æžœé¡¹é€šè¿‡appå¤„ç†åŽçš„æ•°æ®å±•ç¤ºç»™ç”¨æˆ·ã€‚åœ¨ä½ çš„åº”ç”¨ç¨‹åºå®žçŽ°è¿™æ ·çš„åŠŸèƒ½è‚¯å®šä¼šæå‡ç”¨æˆ·ä½“éªŒ,æ‰€ä»¥ä½ åº”è¯¥åœ¨ä½ å½“å‰å’Œæœªæ¥çš„é¡¹ç›®è®¤çœŸè€ƒè™‘ä½¿ç”¨å®ƒã€‚åˆåˆ°äº†ç»“æŸçš„æ—¶å€™,æˆ‘çœŸå¸Œæœ›ä½ èƒ½å‘çŽ°è¿™ç¯‡æ–‡ç« çš„æœ‰ç”¨ä¹‹å¤„! ä½œä¸ºå‚è€ƒï¼Œä½  ä»ŽGitHubä¸Šå¯ä»¥ä¸‹è½½å®Œæ•´çš„å·¥ ç¨‹ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[è‡ªå·±åŠ¨æ‰‹å®žçŽ°KVO]]></title>
      <url>%2Fposts%2F59559%2F</url>
      <content type="text"><![CDATA[æœ¬ç¯‡ä¼šæŽ¢ç©¶ KVO (Key-Value Observing) å®žçŽ°æœºåˆ¶ï¼Œå¹¶åŽ»å®žè·µä¸€ç•ª - åˆ©ç”¨ Runtime è‡ªå·±åŠ¨æ‰‹åŽ»å®žçŽ° KVO ã€‚ KVO (Key-Value Observing) KVO æ˜¯ Objective-C å¯¹è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰çš„å®žçŽ°ã€‚ä¹Ÿæ˜¯ Cocoa Binding çš„åŸºç¡€ã€‚å½“è¢«è§‚å¯Ÿå¯¹è±¡çš„æŸä¸ªå±žæ€§å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œè§‚å¯Ÿè€…å¯¹è±¡ä¼šèŽ·å¾—é€šçŸ¥ã€‚ æœ‰æ„æ€çš„æ˜¯ï¼Œä½ ä¸éœ€è¦ç»™è¢«è§‚å¯Ÿçš„å¯¹è±¡æ·»åŠ ä»»ä½•é¢å¤–ä»£ç ï¼Œå°±èƒ½ä½¿ç”¨ KVO ã€‚è¿™æ˜¯æ€Žä¹ˆåšåˆ°çš„ï¼Ÿ KVO å®žçŽ°æœºåˆ¶ KVO çš„å®žçŽ°ä¹Ÿä¾èµ–äºŽ Objective-C å¼ºå¤§çš„ Runtime ã€‚Apple çš„æ–‡æ¡£æœ‰ç®€å•æåˆ°è¿‡ KVO çš„å®žçŽ°ï¼š Automatic key-value observing is implemented using a technique called isa-swizzlingâ€¦ When an observer is registered for an attribute of an object the isa pointer of the observed object is modified, pointing to an intermediate class rather than at the true class â€¦ Apple çš„æ–‡æ¡£çœŸæ˜¯ä¸€ç¬”å¸¦è¿‡ï¼Œå”¯ä¸€æœ‰ç”¨çš„ä¿¡æ¯ä¹Ÿå°±æ˜¯ï¼šè¢«è§‚å¯Ÿå¯¹è±¡çš„ isa æŒ‡é’ˆä¼šæŒ‡å‘ä¸€ä¸ªä¸­é—´ç±»ï¼Œè€Œä¸æ˜¯åŽŸæ¥çœŸæ­£çš„ç±»ã€‚çœ‹æ¥ï¼ŒApple å¹¶ä¸å¸Œæœ›è¿‡å¤šæš´éœ² KVO çš„å®žçŽ°ç»†èŠ‚ã€‚ä¸è¿‡ï¼Œè¦æ˜¯ä½ ç”¨ runtime æä¾›çš„æ–¹æ³•åŽ»æ·±å…¥æŒ–æŽ˜ï¼Œæ‰€æœ‰è¢«æŽ©ç›–çš„ç»†èŠ‚éƒ½ä¼šåŽŸå½¢æ¯•éœ²ã€‚Mike Ash æ—©åœ¨ 2009 å¹´å°±åšäº†è¿™ä¹ˆä¸ªæŽ¢ç©¶ã€‚ ç®€å•æ¦‚è¿°ä¸‹ KVO çš„å®žçŽ°ï¼š å½“ä½ è§‚å¯Ÿä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¸€ä¸ªæ–°çš„ç±»ä¼šåŠ¨æ€è¢«åˆ›å»ºã€‚è¿™ä¸ªç±»ç»§æ‰¿è‡ªè¯¥å¯¹è±¡çš„åŽŸæœ¬çš„ç±»ï¼Œå¹¶é‡å†™äº†è¢«è§‚å¯Ÿå±žæ€§çš„ setter æ–¹æ³•ã€‚è‡ªç„¶ï¼Œé‡å†™çš„ setter æ–¹æ³•ä¼šè´Ÿè´£åœ¨è°ƒç”¨åŽŸ setter æ–¹æ³•ä¹‹å‰å’Œä¹‹åŽï¼Œé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿå¯¹è±¡å€¼çš„æ›´æ”¹ã€‚æœ€åŽæŠŠè¿™ä¸ªå¯¹è±¡çš„ isa æŒ‡é’ˆ ( isa æŒ‡é’ˆå‘Šè¯‰ Runtime ç³»ç»Ÿè¿™ä¸ªå¯¹è±¡çš„ç±»æ˜¯ä»€ä¹ˆ ) æŒ‡å‘è¿™ä¸ªæ–°åˆ›å»ºçš„å­ç±»ï¼Œå¯¹è±¡å°±ç¥žå¥‡çš„å˜æˆäº†æ–°åˆ›å»ºçš„å­ç±»çš„å®žä¾‹ã€‚ åŽŸæ¥ï¼Œè¿™ä¸ªä¸­é—´ç±»ï¼Œç»§æ‰¿è‡ªåŽŸæœ¬çš„é‚£ä¸ªç±»ã€‚ä¸ä»…å¦‚æ­¤ï¼ŒApple è¿˜é‡å†™äº† -class æ–¹æ³•ï¼Œä¼å›¾æ¬ºéª—æˆ‘ä»¬è¿™ä¸ªç±»æ²¡æœ‰å˜ï¼Œå°±æ˜¯åŽŸæœ¬é‚£ä¸ªç±»ã€‚æ›´å…·ä½“çš„ä¿¡æ¯ï¼ŒåŽ»è·‘ä¸€ä¸‹ Mike Ash çš„é‚£ç¯‡æ–‡ç« é‡Œçš„ä»£ç å°±èƒ½æ˜Žç™½ï¼Œè¿™é‡Œå°±ä¸å†é‡å¤ã€‚ KVO ç¼ºé™· KVO å¾ˆå¼ºå¤§ï¼Œæ²¡é”™ã€‚çŸ¥é“å®ƒå†…éƒ¨å®žçŽ°ï¼Œæˆ–è®¸èƒ½å¸®åŠ©æ›´å¥½åœ°ä½¿ç”¨å®ƒï¼Œæˆ–åœ¨å®ƒå‡ºé”™æ—¶æ›´æ–¹ä¾¿è°ƒè¯•ã€‚ä½†å®˜æ–¹å®žçŽ°çš„ KVO æä¾›çš„ API å®žåœ¨ä¸æ€Žä¹ˆæ ·ã€‚ æ¯”å¦‚ï¼Œä½ åªèƒ½é€šè¿‡é‡å†™ -observeValueForKeyPath:ofObject:change:context: æ–¹æ³•æ¥èŽ·å¾—é€šçŸ¥ã€‚æƒ³è¦æä¾›è‡ªå®šä¹‰çš„ selector ï¼Œä¸è¡Œï¼›æƒ³è¦ä¼ ä¸€ä¸ª block ï¼Œé—¨éƒ½æ²¡æœ‰ã€‚è€Œä¸”ä½ è¿˜è¦å¤„ç†çˆ¶ç±»çš„æƒ…å†µ - çˆ¶ç±»åŒæ ·ç›‘å¬åŒä¸€ä¸ªå¯¹è±¡çš„åŒä¸€ä¸ªå±žæ€§ã€‚ä½†æœ‰æ—¶å€™ï¼Œä½ ä¸çŸ¥é“çˆ¶ç±»æ˜¯ä¸æ˜¯å¯¹è¿™ä¸ªæ¶ˆæ¯æœ‰å…´è¶£ã€‚è™½ç„¶ context è¿™ä¸ªå‚æ•°å°±æ˜¯å¹²è¿™ä¸ªçš„ï¼Œä¹Ÿå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ - åœ¨ -addObserver:forKeyPath:options:context: ä¼ è¿›åŽ»ä¸€ä¸ªçˆ¶ç±»ä¸çŸ¥é“çš„ contextã€‚ä½†æ€»è§‰å¾—æ¡†åœ¨è¿™ä¸ª API çš„è®¾è®¡ä¸‹ï¼Œä»£ç å†™çš„å¾ˆåˆ«æ‰­ã€‚è‡³å°‘è‡³å°‘ï¼Œä¹Ÿåº”è¯¥æ”¯æŒ block å§ã€‚ æœ‰ä¸å°‘äººéƒ½è§‰å¾—å®˜æ–¹ KVO ä¸å¥½ä½¿çš„ã€‚Mike Ash çš„ Key-Value Observing Done Rightï¼Œä»¥åŠèŽ·å¾—ä¸å°‘åˆ†äº«è®¨è®ºçš„ KVO Considered Harmful éƒ½æŠŠ KVO æ‹¿å‡ºæ¥åŠæ‰“äº†ä¸€ç•ªã€‚æ‰€ä»¥åœ¨å®žé™…å¼€å‘ä¸­ KVO ä½¿ç”¨çš„æƒ…æ™¯å¹¶ä¸å¤šï¼Œæ›´å¤šæ—¶å€™è¿˜æ˜¯ç”¨ Delegate æˆ– NotificationCenterã€‚ è‡ªå·±å®žçŽ° KVO å¦‚æžœæ²¡æ‰¾åˆ°ç†æƒ³çš„ï¼Œå°±è‡ªå·±åŠ¨æ‰‹åšä¸€ä¸ªã€‚æ—¢ç„¶æˆ‘ä»¬å¯¹å®˜æ–¹çš„ API ä¸å¤ªæ»¡æ„ï¼ŒåˆçŸ¥é“å¦‚ä½•åŽ»å®žçŽ°ä¸€ä¸ª KVOï¼Œé‚£å°±å°è¯•è‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ªç®€æ˜“çš„ KVO çŽ©çŽ©ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»º NSObject çš„ Categoryï¼Œå¹¶åœ¨å¤´æ–‡ä»¶ä¸­æ·»åŠ ä¸¤ä¸ª APIï¼š typedef void(^PGObservingBlock)(id observedObject, NSString *observedKey, id oldValue, id newValue); @interface NSObject (KVO) - (void)PG_addObserver:(NSObject *)observer forKey:(NSString *)key withBlock:(PGObservingBlock)block; - (void)PG_removeObserver:(NSObject *)observer forKey:(NSString *)key; @end æŽ¥ä¸‹æ¥ï¼Œå®žçŽ° PG_addObserver:forKey:withBlock: æ–¹æ³•ã€‚é€»è¾‘å¹¶ä¸å¤æ‚ï¼š æ£€æŸ¥å¯¹è±¡çš„ç±»æœ‰æ²¡æœ‰ç›¸åº”çš„ setter æ–¹æ³•ã€‚å¦‚æžœæ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼› æ£€æŸ¥å¯¹è±¡ isa æŒ‡å‘çš„ç±»æ˜¯ä¸æ˜¯ä¸€ä¸ª KVO ç±»ã€‚å¦‚æžœä¸æ˜¯ï¼Œæ–°å»ºä¸€ä¸ªç»§æ‰¿åŽŸæ¥ç±»çš„å­ç±»ï¼Œå¹¶æŠŠ isa æŒ‡å‘è¿™ä¸ªæ–°å»ºçš„å­ç±»ï¼› æ£€æŸ¥å¯¹è±¡çš„ KVO ç±»é‡å†™è¿‡æ²¡æœ‰è¿™ä¸ª setter æ–¹æ³•ã€‚å¦‚æžœæ²¡æœ‰ï¼Œæ·»åŠ é‡å†™çš„ setter æ–¹æ³•ï¼› æ·»åŠ è¿™ä¸ªè§‚å¯Ÿè€… - (void)PG_addObserver:(NSObject *)observer forKey:(NSString *)key withBlock:(PGObservingBlock)block { // Step 1: Throw exception if its class or superclasses doesn't implement the setter SEL setterSelector = NSSelectorFromString(setterForGetter(key)); Method setterMethod = class_getInstanceMethod([self class], setterSelector); if (!setterMethod) { // throw invalid argument exception } Class clazz = object_getClass(self); NSString *clazzName = NSStringFromClass(clazz); // Step 2: Make KVO class if this is first time adding observer and // its class is not an KVO class yet if (![clazzName hasPrefix:kPGKVOClassPrefix]) { clazz = [self makeKvoClassWithOriginalClassName:clazzName]; object_setClass(self, clazz); } // Step 3: Add our kvo setter method if its class (not superclasses) // hasn't implemented the setter if (![self hasSelector:setterSelector]) { const char *types = method_getTypeEncoding(setterMethod); class_addMethod(clazz, setterSelector, (IMP)kvo_setter, types); } // Step 4: Add this observation info to saved observation objects PGObservationInfo *info = [[PGObservationInfo alloc] initWithObserver:observer Key:key block:block]; NSMutableArray *observers = objc_getAssociatedObject(self, (__bridge const void *)(kPGKVOAssociatedObservers)); if (!observers) { observers = [NSMutableArray array]; objc_setAssociatedObject(self, (__bridge const void *)(kPGKVOAssociatedObservers), observers, OBJC_ASSOCIATION_RETAIN_NONATOMIC); } [observers addObject:info]; } å†æ¥ä¸€æ­¥ä¸€æ­¥ç»†çœ‹ã€‚ ç¬¬ä¸€æ­¥é‡Œï¼Œå…ˆé€šè¿‡ setterForGetter() æ–¹æ³•èŽ·å¾—ç›¸åº”çš„ setter çš„åå­—ï¼ˆSELï¼‰ã€‚ä¹Ÿå°±æ˜¯æŠŠ key çš„é¦–å­—æ¯å¤§å†™ï¼Œç„¶åŽå‰é¢åŠ ä¸Š set åŽé¢åŠ ä¸Š :ï¼Œè¿™æ · key å°±å˜æˆäº† setKey:ã€‚ç„¶åŽå†ç”¨ class_getInstanceMethod åŽ»èŽ·å¾— setKey: çš„å®žçŽ°ï¼ˆMethodï¼‰ã€‚å¦‚æžœæ²¡æœ‰ï¼Œè‡ªç„¶è¦æŠ›å‡ºå¼‚å¸¸ã€‚ ç¬¬äºŒæ­¥ï¼Œæˆ‘ä»¬å…ˆçœ‹ç±»åæœ‰æ²¡æœ‰æˆ‘ä»¬å®šä¹‰çš„å‰ç¼€ã€‚å¦‚æžœæ²¡æœ‰ï¼Œæˆ‘ä»¬å°±åŽ»åˆ›å»ºæ–°çš„å­ç±»ï¼Œå¹¶é€šè¿‡ object_setClass() ä¿®æ”¹ isa æŒ‡é’ˆã€‚ - (Class)makeKvoClassWithOriginalClassName:(NSString *)originalClazzName { NSString *kvoClazzName = [kPGKVOClassPrefix stringByAppendingString:originalClazzName]; Class clazz = NSClassFromString(kvoClazzName); if (clazz) { return clazz; } // class doesn't exist yet, make it Class originalClazz = object_getClass(self); Class kvoClazz = objc_allocateClassPair(originalClazz, kvoClazzName.UTF8String, 0); // grab class method's signature so we can borrow it Method clazzMethod = class_getInstanceMethod(originalClazz, @selector(class)); const char *types = method_getTypeEncoding(clazzMethod); class_addMethod(kvoClazz, @selector(class), (IMP)kvo_class, types); objc_registerClassPair(kvoClazz); return kvoClazz; } åŠ¨æ€åˆ›å»ºæ–°çš„ç±»éœ€è¦ç”¨ objc/runtime.h ä¸­å®šä¹‰çš„ objc_allocateClassPair() å‡½æ•°ã€‚ä¼ ä¸€ä¸ªçˆ¶ç±»ï¼Œç±»åï¼Œç„¶åŽé¢å¤–çš„ç©ºé—´ï¼ˆé€šå¸¸ä¸º 0ï¼‰ï¼Œå®ƒè¿”å›žç»™ä½ ä¸€ä¸ªç±»ã€‚ç„¶åŽå°±ç»™è¿™ä¸ªç±»æ·»åŠ æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æ·»åŠ å˜é‡ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬åªé‡å†™äº† class æ–¹æ³•ã€‚å“ˆå“ˆï¼Œè·Ÿ Apple ä¸€æ ·ï¼Œè¿™æ—¶å€™æˆ‘ä»¬ä¹Ÿä¼å›¾éšè—è¿™ä¸ªå­ç±»çš„å­˜åœ¨ã€‚æœ€åŽ objc_registerClassPair() å‘Šè¯‰ Runtime è¿™ä¸ªç±»çš„å­˜åœ¨ã€‚ ç¬¬ä¸‰æ­¥ï¼Œé‡å†™ setter æ–¹æ³•ã€‚æ–°çš„ setter åœ¨è°ƒç”¨åŽŸ setter æ–¹æ³•åŽï¼Œé€šçŸ¥æ¯ä¸ªè§‚å¯Ÿè€…ï¼ˆè°ƒç”¨ä¹‹å‰ä¼ å…¥çš„ block ï¼‰ï¼š static void kvo_setter(id self, SEL _cmd, id newValue) { NSString *setterName = NSStringFromSelector(_cmd); NSString *getterName = getterForSetter(setterName); if (!getterName) { // throw invalid argument exception } id oldValue = [self valueForKey:getterName]; struct objc_super superclazz = { .receiver = self, .super_class = class_getSuperclass(object_getClass(self)) }; // cast our pointer so the compiler won't complain void (*objc_msgSendSuperCasted)(void *, SEL, id) = (void *)objc_msgSendSuper; // call super's setter, which is original class's setter method objc_msgSendSuperCasted(&amp;superclazz, _cmd, newValue); // look up observers and call the blocks NSMutableArray *observers = objc_getAssociatedObject(self, (__bridge const void *)(kPGKVOAssociatedObservers)); for (PGObservationInfo *each in observers) { if ([each.key isEqualToString:getterName]) { dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ each.block(self, getterName, oldValue, newValue); }); } } } ç»†å¿ƒçš„åŒå­¦ä¼šå‘çŽ°æˆ‘ä»¬å¯¹ objc_msgSendSuper è¿›è¡Œç±»åž‹è½¬æ¢ã€‚åœ¨ Xcode 6 é‡Œï¼Œæ–°çš„ LLVM ä¼šå¯¹ objc_msgSendSuper ä»¥åŠ objc_msgSend åšä¸¥æ ¼çš„ç±»åž‹æ£€æŸ¥ï¼Œå¦‚æžœä¸åšç±»åž‹è½¬æ¢ã€‚Xcode ä¼šæŠ±æ€¨æœ‰ too many arguments çš„é”™è¯¯ã€‚ï¼ˆåœ¨ WWDC 2014 çš„è§†é¢‘ What new in LLVM ä¸­æœ‰æåˆ°è¿‡è¿™ä¸ªé—®é¢˜ã€‚ï¼‰ æœ€åŽä¸€æ­¥ï¼ŒæŠŠè¿™ä¸ªè§‚å¯Ÿçš„ç›¸å…³ä¿¡æ¯å­˜åœ¨ associatedObject é‡Œã€‚è§‚å¯Ÿçš„ç›¸å…³ä¿¡æ¯ï¼ˆè§‚å¯Ÿè€…ï¼Œè¢«è§‚å¯Ÿçš„ key, å’Œä¼ å…¥çš„ block ï¼‰å°è£…åœ¨ PGObservationInfo ç±»é‡Œã€‚ @interface PGObservationInfo : NSObject @property (nonatomic, weak) NSObject *observer; @property (nonatomic, copy) NSString *key; @property (nonatomic, copy) PGObservingBlock block; @end å°±æ­¤ï¼Œä¸€ä¸ªåŸºæœ¬çš„ KVO å°±å¯ä»¥ work äº†ã€‚å½“ç„¶ï¼Œè¿™åªæ˜¯ä¸€ä¸ªä¸€å¤©å¤šåšå‡ºæ¥çš„å°ä¸œè¥¿ï¼Œä¼šæœ‰ bugï¼Œä¹Ÿæœ‰å¾ˆå¤šå¯ä»¥ä¼˜åŒ–å®Œå–„çš„åœ°æ–¹ã€‚ä½†ä½œä¸º demo æ¼”ç¤ºå¦‚ä½•åˆ©ç”¨ Runtime åŠ¨æ€åˆ›å»ºç±»ã€å¦‚ä½•å®žçŽ° KVOï¼Œè¶³å·²ã€‚ å®Œæ•´çš„ä¾‹å­å¯ä»¥ä»Žè¿™é‡Œä¸‹è½½ï¼šImplementKVO]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[iOSçº¿ç¨‹å®‰å…¨ç¯‡]]></title>
      <url>%2Fposts%2F47161%2F</url>
      <content type="text"><![CDATA[ä¸€ã€å‰è¨€å‰æ®µæ—¶é—´çœ‹äº†å‡ ä¸ªå¼€æºé¡¹ç›®ï¼Œå‘çŽ°ä»–ä»¬ä¿æŒçº¿ç¨‹åŒæ­¥çš„æ–¹å¼å„ä¸ç›¸åŒï¼Œæœ‰@synchronizedã€NSLockã€dispatch_semaphoreã€NSConditionã€pthread_mutexã€OSSpinLockã€‚åŽæ¥ç½‘ä¸ŠæŸ¥äº†ä¸€ä¸‹ï¼Œå‘çŽ°ä»–ä»¬çš„å®žçŽ°æœºåˆ¶å„ä¸ç›¸åŒï¼Œæ€§èƒ½ä¹Ÿå„ä¸ä¸€æ ·ã€‚ä¸å¥½æ„æ€ï¼Œæˆ‘ä»¬å¹³å¸¸ä½¿ç”¨æœ€å¤šçš„@synchronizedæ˜¯æ€§èƒ½æœ€å·®çš„ã€‚ä¸‹é¢æˆ‘ä»¬å…ˆåˆ†åˆ«ä»‹ç»æ¯ä¸ªåŠ é”æ–¹å¼çš„ä½¿ç”¨ï¼Œåœ¨ä½¿ç”¨ä¸€ä¸ªæ¡ˆä¾‹æ¥å¯¹ä»–ä»¬è¿›è¡Œæ€§èƒ½å¯¹æ¯”ã€‚äºŒã€ä»‹ç»ä¸Žä½¿ç”¨2.1ã€@synchronizedNSObject&nbsp;obj&nbsp;=&nbsp;[[NSObject&nbsp;alloc]&nbsp;init];dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,&nbsp;0),&nbsp;^{&nbsp;&nbsp;&nbsp;&nbsp;@synchronized(obj)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@â€éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ1&nbsp;å¼€å§‹â€);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep(3);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@â€éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ1&nbsp;ç»“æŸâ€);&nbsp;&nbsp;&nbsp;&nbsp;}});dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,&nbsp;0),&nbsp;^{&nbsp;&nbsp;&nbsp;&nbsp;sleep(1);&nbsp;&nbsp;&nbsp;&nbsp;@synchronized(obj)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@â€éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ2â€);&nbsp;&nbsp;&nbsp;&nbsp;}});@synchronized(obj)æŒ‡ä»¤ä½¿ç”¨çš„objä¸ºè¯¥é”çš„å”¯ä¸€æ ‡è¯†ï¼Œåªæœ‰å½“æ ‡è¯†ç›¸åŒæ—¶ï¼Œæ‰ä¸ºæ»¡è¶³äº’æ–¥ï¼Œå¦‚æžœçº¿ç¨‹2ä¸­çš„@synchronized(obj)æ”¹ä¸º@synchronized(self),åˆšçº¿ç¨‹2å°±ä¸ä¼šè¢«é˜»å¡žï¼Œ@synchronizedæŒ‡ä»¤å®žçŽ°é”çš„ä¼˜ç‚¹å°±æ˜¯æˆ‘ä»¬ä¸éœ€è¦åœ¨ä»£ç ä¸­æ˜¾å¼çš„åˆ›å»ºé”å¯¹è±¡ï¼Œä¾¿å¯ä»¥å®žçŽ°é”çš„æœºåˆ¶ï¼Œä½†ä½œä¸ºä¸€ç§é¢„é˜²æŽªæ–½ï¼Œ@synchronizedå—ä¼šéšå¼çš„æ·»åŠ ä¸€ä¸ªå¼‚å¸¸å¤„ç†ä¾‹ç¨‹æ¥ä¿æŠ¤ä»£ç ï¼Œè¯¥å¤„ç†ä¾‹ç¨‹ä¼šåœ¨å¼‚å¸¸æŠ›å‡ºçš„æ—¶å€™è‡ªåŠ¨çš„é‡Šæ”¾äº’æ–¥é”ã€‚æ‰€ä»¥å¦‚æžœä¸æƒ³è®©éšå¼çš„å¼‚å¸¸å¤„ç†ä¾‹ç¨‹å¸¦æ¥é¢å¤–çš„å¼€é”€ï¼Œä½ å¯ä»¥è€ƒè™‘ä½¿ç”¨é”å¯¹è±¡ã€‚ä¸Šé¢ç»“æžœçš„æ‰§è¡Œç»“æžœä¸ºï¼š2016-06-29&nbsp;20:48:35.747&nbsp;SafeMultiThread[35945:580107]&nbsp;éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ1&nbsp;å¼€å§‹2016-06-29&nbsp;20:48:38.748&nbsp;SafeMultiThread[35945:580107]&nbsp;éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ1&nbsp;ç»“æŸ2016-06-29&nbsp;20:48:38.749&nbsp;SafeMultiThread[35945:580118]&nbsp;éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ22.2ã€dispatch_semaphoredispatch_semaphore_t&nbsp;signal&nbsp;=&nbsp;dispatch_semaphore_create(1);dispatch_time_t&nbsp;overTime&nbsp;=&nbsp;dispatch_time(DISPATCH_TIME_NOW,&nbsp;3&nbsp;&nbsp;NSEC_PER_SEC);dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,&nbsp;0),&nbsp;^{&nbsp;&nbsp;&nbsp;&nbsp;dispatch_semaphore_wait(signal,&nbsp;overTime);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@â€éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ1&nbsp;å¼€å§‹â€);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep(2);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@â€éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ1&nbsp;ç»“æŸâ€);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dispatch_semaphore_signal(signal);});dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,&nbsp;0),&nbsp;^{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep(1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dispatch_semaphore_wait(signal,&nbsp;overTime);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@â€éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ2â€);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dispatch_semaphore_signal(signal);});dispatch_semaphoreæ˜¯GCDç”¨æ¥åŒæ­¥çš„ä¸€ç§æ–¹å¼ï¼Œä¸Žä»–ç›¸å…³çš„å…±æœ‰ä¸‰ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«æ˜¯dispatch_semaphore_createï¼Œdispatch_semaphore_signalï¼Œdispatch_semaphore_waitã€‚ï¼ˆ1ï¼‰dispatch_semaphore_createçš„å£°æ˜Žä¸ºï¼šdispatch_semaphore_t&nbsp;dispatch_semaphore_create(long&nbsp;value);ä¼ å…¥çš„å‚æ•°ä¸ºlongï¼Œè¾“å‡ºä¸€ä¸ªdispatch_semaphore_tç±»åž‹ä¸”å€¼ä¸ºvalueçš„ä¿¡å·é‡ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„ä¼ å…¥çš„å‚æ•°valueå¿…é¡»å¤§äºŽæˆ–ç­‰äºŽ0ï¼Œå¦åˆ™dispatch_semaphore_createä¼šè¿”å›žNULLã€‚ï¼ˆ2ï¼‰dispatch_semaphore_signalçš„å£°æ˜Žä¸ºï¼šlong&nbsp;dispatch_semaphore_signal(dispatch_semaphore_t&nbsp;dsema);è¿™ä¸ªå‡½æ•°ä¼šä½¿ä¼ å…¥çš„ä¿¡å·é‡dsemaçš„å€¼åŠ 1ï¼›(3) dispatch_semaphore_waitçš„å£°æ˜Žä¸ºï¼šlong&nbsp;dispatch_semaphore_wait(dispatch_semaphore_t&nbsp;dsema,&nbsp;dispatch_time_t&nbsp;timeout);è¿™ä¸ªå‡½æ•°ä¼šä½¿ä¼ å…¥çš„ä¿¡å·é‡dsemaçš„å€¼å‡1ï¼›è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯è¿™æ ·çš„ï¼Œå¦‚æžœdsemaä¿¡å·é‡çš„å€¼å¤§äºŽ0ï¼Œè¯¥å‡½æ•°æ‰€å¤„çº¿ç¨‹å°±ç»§ç»­æ‰§è¡Œä¸‹é¢çš„è¯­å¥ï¼Œå¹¶ä¸”å°†ä¿¡å·é‡çš„å€¼å‡1ï¼›å¦‚æžœdesemaçš„å€¼ä¸º0ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±é˜»å¡žå½“å‰çº¿ç¨‹ç­‰å¾…timeoutï¼ˆæ³¨æ„timeoutçš„ç±»åž‹ä¸ºdispatch_time_tï¼Œä¸èƒ½ç›´æŽ¥ä¼ å…¥æ•´å½¢æˆ–floatåž‹æ•°ï¼‰ï¼Œå¦‚æžœç­‰å¾…çš„æœŸé—´desemaçš„å€¼è¢«dispatch_semaphore_signalå‡½æ•°åŠ 1äº†ï¼Œä¸”è¯¥å‡½æ•°ï¼ˆå³dispatch_semaphore_waitï¼‰æ‰€å¤„çº¿ç¨‹èŽ·å¾—äº†ä¿¡å·é‡ï¼Œé‚£ä¹ˆå°±ç»§ç»­å‘ä¸‹æ‰§è¡Œå¹¶å°†ä¿¡å·é‡å‡1ã€‚å¦‚æžœç­‰å¾…æœŸé—´æ²¡æœ‰èŽ·å–åˆ°ä¿¡å·é‡æˆ–è€…ä¿¡å·é‡çš„å€¼ä¸€ç›´ä¸º0ï¼Œé‚£ä¹ˆç­‰åˆ°timeoutæ—¶ï¼Œå…¶æ‰€å¤„çº¿ç¨‹è‡ªåŠ¨æ‰§è¡Œå…¶åŽè¯­å¥ã€‚dispatch_semaphore æ˜¯ä¿¡å·é‡ï¼Œä½†å½“ä¿¡å·æ€»é‡è®¾ä¸º 1 æ—¶ä¹Ÿå¯ä»¥å½“ä½œé”æ¥ã€‚åœ¨æ²¡æœ‰ç­‰å¾…æƒ…å†µå‡ºçŽ°æ—¶ï¼Œå®ƒçš„æ€§èƒ½æ¯” pthread_mutex è¿˜è¦é«˜ï¼Œä½†ä¸€æ—¦æœ‰ç­‰å¾…æƒ…å†µå‡ºçŽ°æ—¶ï¼Œæ€§èƒ½å°±ä¼šä¸‹é™è®¸å¤šã€‚ç›¸å¯¹äºŽ OSSpinLock æ¥è¯´ï¼Œå®ƒçš„ä¼˜åŠ¿åœ¨äºŽç­‰å¾…æ—¶ä¸ä¼šæ¶ˆè€— CPU èµ„æºã€‚å¦‚ä¸Šçš„ä»£ç ï¼Œå¦‚æžœè¶…æ—¶æ—¶é—´overTimeè®¾ç½®æˆ&gt;2ï¼Œå¯å®ŒæˆåŒæ­¥æ“ä½œã€‚å¦‚æžœoverTimeä¸Šé¢ä»£ç çš„æ‰§è¡Œç»“æžœä¸ºï¼š2016-06-29&nbsp;20:47:52.324&nbsp;SafeMultiThread[35945:579032]&nbsp;éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ1&nbsp;å¼€å§‹2016-06-29&nbsp;20:47:55.325&nbsp;SafeMultiThread[35945:579032]&nbsp;éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ1&nbsp;ç»“æŸ2016-06-29&nbsp;20:47:55.326&nbsp;SafeMultiThread[35945:579033]&nbsp;éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ2å¦‚æžœæŠŠè¶…æ—¶æ—¶é—´è®¾ç½®ä¸º2016-06-30&nbsp;18:53:24.049&nbsp;SafeMultiThread[30834:434334]&nbsp;éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ1&nbsp;å¼€å§‹2016-06-30&nbsp;18:53:25.554&nbsp;SafeMultiThread[30834:434332]&nbsp;éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ22016-06-30&nbsp;18:53:26.054&nbsp;SafeMultiThread[30834:434334]&nbsp;éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ1&nbsp;ç»“æŸ2.3ã€NSLockNSLock&nbsp;lock&nbsp;=&nbsp;[[NSLock&nbsp;alloc]&nbsp;init];dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,&nbsp;0),&nbsp;^{&nbsp;&nbsp;&nbsp;&nbsp;//[lock&nbsp;lock];&nbsp;&nbsp;&nbsp;&nbsp;[lock&nbsp;lockBeforeDate:[NSDate&nbsp;date]];&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@â€éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ1&nbsp;å¼€å§‹â€);&nbsp;&nbsp;&nbsp;&nbsp;sleep(2);&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@â€éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ1&nbsp;ç»“æŸâ€);&nbsp;&nbsp;&nbsp;&nbsp;[lock&nbsp;unlock];});dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,&nbsp;0),&nbsp;^{&nbsp;&nbsp;&nbsp;&nbsp;sleep(1);&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;([lock&nbsp;tryLock])&nbsp;{//å°è¯•èŽ·å–é”ï¼Œå¦‚æžœèŽ·å–ä¸åˆ°è¿”å›žNOï¼Œä¸ä¼šé˜»å¡žè¯¥çº¿ç¨‹&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@â€é”å¯ç”¨çš„æ“ä½œâ€);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[lock&nbsp;unlock];&nbsp;&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@â€é”ä¸å¯ç”¨çš„æ“ä½œâ€);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;NSDate&nbsp;date&nbsp;=&nbsp;[[NSDate&nbsp;alloc]&nbsp;initWithTimeIntervalSinceNow:3];&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;([lock&nbsp;lockBeforeDate:date])&nbsp;{//å°è¯•åœ¨æœªæ¥çš„3så†…èŽ·å–é”ï¼Œå¹¶é˜»å¡žè¯¥çº¿ç¨‹ï¼Œå¦‚æžœ3så†…èŽ·å–ä¸åˆ°æ¢å¤çº¿ç¨‹,&nbsp;è¿”å›žNO,ä¸ä¼šé˜»å¡žè¯¥çº¿ç¨‹&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@â€æ²¡æœ‰è¶…æ—¶ï¼ŒèŽ·å¾—é”â€);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[lock&nbsp;unlock];&nbsp;&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@â€è¶…æ—¶ï¼Œæ²¡æœ‰èŽ·å¾—é”â€);&nbsp;&nbsp;&nbsp;&nbsp;}});NSLockæ˜¯Cocoaæä¾›ç»™æˆ‘ä»¬æœ€åŸºæœ¬çš„é”å¯¹è±¡ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ç»å¸¸æ‰€ä½¿ç”¨çš„ï¼Œé™¤lockå’Œunlockæ–¹æ³•å¤–ï¼ŒNSLockè¿˜æä¾›äº†tryLockå’ŒlockBeforeDate:ä¸¤ä¸ªæ–¹æ³•ï¼Œå‰ä¸€ä¸ªæ–¹æ³•ä¼šå°è¯•åŠ é”ï¼Œå¦‚æžœé”ä¸å¯ç”¨(å·²ç»è¢«é”ä½)ï¼Œåˆšå¹¶ä¸ä¼šé˜»å¡žçº¿ç¨‹ï¼Œå¹¶è¿”å›žNOã€‚lockBeforeDate:æ–¹æ³•ä¼šåœ¨æ‰€æŒ‡å®šDateä¹‹å‰å°è¯•åŠ é”ï¼Œå¦‚æžœåœ¨æŒ‡å®šæ—¶é—´ä¹‹å‰éƒ½ä¸èƒ½åŠ é”ï¼Œåˆ™è¿”å›žNOã€‚ä¸Šé¢ä»£ç çš„æ‰§è¡Œç»“æžœä¸ºï¼š2016-06-29&nbsp;20:45:08.864&nbsp;SafeMultiThread[35911:575795]&nbsp;éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ1&nbsp;å¼€å§‹2016-06-29&nbsp;20:45:09.869&nbsp;SafeMultiThread[35911:575781]&nbsp;é”ä¸å¯ç”¨çš„æ“ä½œ2016-06-29&nbsp;20:45:10.869&nbsp;SafeMultiThread[35911:575795]&nbsp;éœ€è¦çº¿ç¨‹åŒæ­¥çš„æ“ä½œ1&nbsp;ç»“æŸ2016-06-29&nbsp;20:45:10.870&nbsp;SafeMultiThread[35911:575781]&nbsp;æ²¡æœ‰è¶…æ—¶ï¼ŒèŽ·å¾—é”æºç å®šä¹‰å¦‚ä¸‹ï¼š@protocol&nbsp;NSLocking-&nbsp;(void)lock;-&nbsp;(void)unlock;@end@interface&nbsp;NSLock&nbsp;:&nbsp;NSObject&nbsp;&nbsp;{@private&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;_priv;}-&nbsp;(BOOL)tryLock;-&nbsp;(BOOL)lockBeforeDate:(NSDate&nbsp;)limit;@property&nbsp;(nullable,&nbsp;copy)&nbsp;NSString&nbsp;name&nbsp;NS_AVAILABLE(10_5,&nbsp;2_0);@end2.4ã€NSRecursiveLocké€’å½’é”//NSLock&nbsp;lock&nbsp;=&nbsp;[[NSLock&nbsp;alloc]&nbsp;init];NSRecursiveLock&nbsp;*lock&nbsp;=&nbsp;[[NSRecursiveLock&nbsp;alloc]&nbsp;init];dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,&nbsp;0),&nbsp;^{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;void&nbsp;(^RecursiveMethod)(int);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RecursiveMethod&nbsp;=&nbsp;^(int&nbsp;value)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[lock&nbsp;lock];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(value&nbsp;&gt;&nbsp;0)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@â€value&nbsp;=&nbsp;%dâ€,&nbsp;value);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep(1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RecursiveMethod(value&nbsp;-&nbsp;1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[lock&nbsp;unlock];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RecursiveMethod(5);});]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Objective-C Runtime 1å°æ—¶å…¥é—¨æ•™ç¨‹]]></title>
      <url>%2Fposts%2F13633%2F</url>
      <content type="text"><![CDATA[ä¸€ã€å‰è¨€ï¼š å¦‚æžœä½ æ²¡æœ‰Objective-CåŸºç¡€ï¼Œè¯·å­¦ä¹ äº†åŸºç¡€çš„iOSå¼€å‘å†æ¥ï¼Œè¿™ä¸ª1å°æ—¶æ˜¯ç»™æœ‰ä¸€å®šiOSåŸºç¡€çš„ç«¥éž‹çš„ã€‚å¦‚æžœä½ æ˜¯å¤§ç‰›æˆ–è€…ä½ æ„Ÿè§‰Objective-C Runtimeå¤ªç®€å•ä¸ç”¨1å°æ—¶å­¦ä¹ çš„ï¼Œä¹Ÿè¯·æ‚¨ç»•é“ï¼Œè¿™æˆ–è®¸åªæ˜¯æˆ‘çš„ç§äººç¬”è®°äº†ã€‚è¯·è·Ÿç€æ•™ç¨‹â€œä¸€æ­¥æ­¥æ¥â€ï¼Œè¯·ä¸è¦å¤§æ¦‚åœ°æ‰«ä¸¤çœ¼å°±è¯´çœ‹ä¸æ‡‚â€”â€”ä»¥è¿™ç§æ€åº¦å†™æˆä»€ä¹ˆæ ·ä½ ä¹Ÿçœ‹ä¸æ‡‚ã€‚è¿™æ˜¯1å°æ—¶å…¥é—¨æ•™ç¨‹ï¼Œè¯·ä¸è¦è¯•å›¾åœ¨1åˆ†é’Ÿå†…å…¥é—¨ï¼äºŒã€æœ¬æ–‡ç›®æ ‡ï¼š1å°æ—¶è®©ä½ çŸ¥é“ä»€ä¹ˆæ˜¯Objective-C Runtimeï¼Œå¹¶å¯¹å®ƒæœ‰ä¸€å®šçš„åŸºæœ¬äº†è§£ï¼Œå¯ä»¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­è¿ç”¨è‡ªå¦‚ã€‚ä¸‰ã€Objective-C Runtimeåˆ°åº•æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿç®€è€Œè¨€ä¹‹ï¼ŒObjective-C Runtimeæ˜¯ä¸€ä¸ªå°†Cè¯­è¨€è½¬åŒ–ä¸ºé¢å‘å¯¹è±¡è¯­è¨€çš„æ‰©å±•ã€‚æˆ‘ä»¬å°†C++å’ŒObjectiveè¿›è¡Œå¯¹æ¯”ï¼Œè™½ç„¶C++å’ŒObjective-Céƒ½æ˜¯åœ¨Cçš„åŸºç¡€ä¸ŠåŠ å…¥é¢å‘å¯¹è±¡çš„ç‰¹æ€§æ‰©å……è€Œæˆçš„ç¨‹åºè®¾è®¡è¯­è¨€ï¼Œä½†äºŒè€…å®žçŽ°çš„æœºåˆ¶å·®å¼‚å¾ˆå¤§ã€‚C++æ˜¯åŸºäºŽé™æ€ç±»åž‹ï¼Œè€ŒObjective-Cæ˜¯åŸºäºŽåŠ¨æ€è¿è¡Œæ—¶ç±»åž‹ã€‚ä¹Ÿå°±æ˜¯è¯´ç”¨C++ç¼–å†™çš„ç¨‹åºç¼–è¯‘æ—¶å°±ç›´æŽ¥ç¼–è¯‘æˆäº†å¯ä»¤æœºå™¨è¯»æ‡‚çš„æœºå™¨è¯­è¨€ï¼›ç”¨Objective-Cç¼–å†™çš„ç¨‹åºä¸èƒ½ç›´æŽ¥ç¼–è¯‘æˆå¯ä»¤æœºå™¨è¯»æ‡‚çš„æœºå™¨è¯­è¨€ï¼Œè€Œæ˜¯åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œé€šè¿‡RuntimeæŠŠç¨‹åºè½¬ä¸ºå¯ä»¤æœºå™¨è¯»æ‡‚çš„æœºå™¨è¯­è¨€ã€‚ä¹Ÿå°±æ˜¯è¯´ç”¨C++ç¼–å†™çš„ç¨‹åºé€šè¿‡ç¼–è¯‘å™¨ç›´æŽ¥æŠŠå‡½æ•°åœ°å€ç¡¬ç¼–ç è¿›å…¥å¯æ‰§è¡Œæ–‡ä»¶ï¼›è€ŒObjective-Cæ— æ³•é€šè¿‡ç¼–è¯‘å™¨ç›´æŽ¥æŠŠå‡½æ•°åœ°å€ç¡¬ç¼–ç è¿›å…¥å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè€Œæ˜¯åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œåˆ©ç”¨Runtimeæ ¹æ®æ¡ä»¶åˆ¤æ–­ä½œå‡ºå†³å®šã€‚å‡½æ•°æ ‡è¯†ä¸Žå‡½æ•°è¿‡ç¨‹çš„çœŸæ­£å†…å®¹ä¹‹é—´çš„å…³è”å¯ä»¥åŠ¨æ€ä¿®æ”¹ã€‚Runtimeæ˜¯Objectiveä¸å¯ç¼ºå°‘çš„é‡è¦ä¸€éƒ¨åˆ†ã€‚ä¼ é€é—¨-&gt;runtimeæºç å››ã€Objective-Cçš„å…ƒç´ è®¤çŸ¥4.1 idå’ŒClassæ‰“å¼€/Public Headers/objc.hæ–‡ä»¶å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å®šä¹‰ï¼š#if !OBJC_TYPES_DEFINED/// An opaque type that represents an Objective-C class.typedef struct objc_class Class;/// Represents an instance of a class.struct objc_object {Class isa OBJC_ISA_AVAILABILITY;};/// A pointer to an instance of a class.typedef struct objc_object id;#endifClassæ˜¯ä¸€ä¸ªæŒ‡å‘objc_classç»“æž„ä½“çš„æŒ‡é’ˆï¼Œè€Œidæ˜¯ä¸€ä¸ªæŒ‡å‘objc_objectç»“æž„ä½“çš„æŒ‡é’ˆï¼Œå…¶ä¸­çš„isaæ˜¯ä¸€ä¸ªæŒ‡å‘objc_classç»“æž„ä½“çš„æŒ‡é’ˆã€‚å…¶ä¸­çš„idå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„å¯¹è±¡ï¼ŒClasså°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ç±»ã€‚æ‰“å¼€/Public Headers/runtime.hæ–‡ä»¶objc_classçš„å®šä¹‰å¦‚ä¸‹ï¼štypedef struct objc_class Class;struct objc_class {Class isa OBJC_ISA_AVAILABILITY; // metaclass#if !OBJC2Class super_class OBJC2_UNAVAILABLE; // çˆ¶ç±»const char name OBJC2_UNAVAILABLE; // ç±»ålong version OBJC2_UNAVAILABLE; // ç±»çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œé»˜è®¤ä¸º0ï¼Œå¯ä»¥é€šè¿‡runtimeå‡½æ•°class_setVersionæˆ–è€…class_getVersionè¿›è¡Œä¿®æ”¹ã€è¯»å–long info OBJC2_UNAVAILABLE; // ç±»ä¿¡æ¯ï¼Œä¾›è¿è¡Œæ—¶æœŸä½¿ç”¨çš„ä¸€äº›ä½æ ‡è¯†ï¼Œå¦‚CLS_CLASS (0x1L) è¡¨ç¤ºè¯¥ç±»ä¸ºæ™®é€š classï¼Œå…¶ä¸­åŒ…å«å®žä¾‹æ–¹æ³•å’Œå˜é‡;CLS_META (0x2L) è¡¨ç¤ºè¯¥ç±»ä¸º metaclassï¼Œå…¶ä¸­åŒ…å«ç±»æ–¹æ³•;long instance_size OBJC2_UNAVAILABLE; // è¯¥ç±»çš„å®žä¾‹å˜é‡å¤§å°ï¼ˆåŒ…æ‹¬ä»Žçˆ¶ç±»ç»§æ‰¿ä¸‹æ¥çš„å®žä¾‹å˜é‡ï¼‰struct objc_ivar_list ivars OBJC2_UNAVAILABLE; // è¯¥ç±»çš„æˆå‘˜å˜é‡åœ°å€åˆ—è¡¨struct objc_method_list **methodLists OBJC2_UNAVAILABLE; // æ–¹æ³•åœ°å€åˆ—è¡¨ï¼Œä¸Ž info çš„ä¸€äº›æ ‡å¿—ä½æœ‰å…³ï¼Œå¦‚CLS_CLASS (0x1L)ï¼Œåˆ™å­˜å‚¨å®žä¾‹æ–¹æ³•ï¼Œå¦‚CLS_META (0x2L)ï¼Œåˆ™å­˜å‚¨ç±»æ–¹æ³•;struct objc_cache cache OBJC2_UNAVAILABLE; // ç¼“å­˜æœ€è¿‘ä½¿ç”¨çš„æ–¹æ³•åœ°å€ï¼Œç”¨äºŽæå‡æ•ˆçŽ‡ï¼›struct objc_protocol_list protocols OBJC2_UNAVAILABLE; // å­˜å‚¨è¯¥ç±»å£°æ˜Žéµå®ˆçš„åè®®çš„åˆ—è¡¨#endif}/ Use Class instead of struct objc_class * /ç”±ä»¥ä¸Šä»£ç å¯è§ï¼Œç±»ä¸Žå¯¹è±¡çš„åŒºåˆ«å°±æ˜¯ç±»æ¯”å¯¹è±¡å¤šäº†å¾ˆå¤šç‰¹å¾æˆå‘˜ï¼Œç±»ä¹Ÿå¯ä»¥å½“åšä¸€ä¸ªobjc_objectæ¥å¯¹å¾…ï¼Œä¹Ÿå°±æ˜¯è¯´ç±»å’Œå¯¹è±¡éƒ½æ˜¯å¯¹è±¡ï¼Œåˆ†åˆ«ç§°ä½œç±»å¯¹è±¡ï¼ˆclass objectï¼‰å’Œå®žä¾‹å¯¹è±¡ï¼ˆinstance objectï¼‰ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åŒºåˆ«å¯¹è±¡å’Œç±»äº†ã€‚isaï¼šobjc_objectï¼ˆå®žä¾‹å¯¹è±¡ï¼‰ä¸­isaæŒ‡é’ˆæŒ‡å‘çš„ç±»ç»“æž„ç§°ä¸ºclassï¼ˆä¹Ÿå°±æ˜¯è¯¥å¯¹è±¡æ‰€å±žçš„ç±»ï¼‰å…¶ä¸­å­˜æ”¾ç€æ™®é€šæˆå‘˜å˜é‡ä¸ŽåŠ¨æ€æ–¹æ³•ï¼ˆâ€œ-â€å¼€å¤´çš„æ–¹æ³•ï¼‰ï¼›æ­¤å¤„isaæŒ‡é’ˆæŒ‡å‘çš„ç±»ç»“æž„ç§°ä¸ºmetaclassï¼Œå…¶ä¸­å­˜æ”¾ç€staticç±»åž‹çš„æˆå‘˜å˜é‡ä¸Žstaticç±»åž‹çš„æ–¹æ³•ï¼ˆâ€œ+â€å¼€å¤´çš„æ–¹æ³•ï¼‰ã€‚super_classï¼š æŒ‡å‘è¯¥ç±»çš„çˆ¶ç±»çš„æŒ‡é’ˆï¼Œå¦‚æžœè¯¥ç±»æ˜¯æ ¹ç±»ï¼ˆå¦‚NSObjectæˆ–NSProxyï¼‰ï¼Œé‚£ä¹ˆsuper_classå°±ä¸ºnilã€‚ç±»ä¸Žå¯¹è±¡çš„ç»§æ‰¿å±‚æ¬¡å…³ç³»å¦‚å›¾ï¼ˆå›¾ç‰‡æºè‡ªç½‘ç»œï¼‰ï¼šæ‰€æœ‰çš„metaclassä¸­isaæŒ‡é’ˆéƒ½æ˜¯æŒ‡å‘æ ¹metaclassï¼Œè€Œæ ¹metaclassåˆ™æŒ‡å‘è‡ªèº«ã€‚æ ¹metaclassæ˜¯é€šè¿‡ç»§æ‰¿æ ¹ç±»äº§ç”Ÿçš„ï¼Œä¸Žæ ¹classç»“æž„ä½“æˆå‘˜ä¸€è‡´ï¼Œä¸åŒçš„æ˜¯æ ¹metaclassçš„isaæŒ‡é’ˆæŒ‡å‘è‡ªèº«ã€‚4.2 SELSELæ˜¯selectoråœ¨Objective-Cä¸­çš„è¡¨ç¤ºç±»åž‹ã€‚selectorå¯ä»¥ç†è§£ä¸ºåŒºåˆ«æ–¹æ³•çš„IDã€‚typedef struct objc_selector SEL;objc_selectorçš„å®šä¹‰å¦‚ä¸‹ï¼šstruct objc_selector {char name; OBJC2_UNAVAILABLE;// åç§°char types; OBJC2_UNAVAILABLE;// ç±»åž‹};nameå’Œtypeséƒ½æ˜¯charç±»åž‹ã€‚4.3 IMPç»ˆäºŽåˆ°IMPäº†ï¼Œå®ƒåœ¨objc.hä¸­å¾—å®šä¹‰å¦‚ä¸‹ï¼štypedef id (IMP)(id, SEL, â€¦);IMPæ˜¯â€œimplementationâ€çš„ç¼©å†™ï¼Œå®ƒæ˜¯ç”±ç¼–è¯‘å™¨ç”Ÿæˆçš„ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆã€‚å½“ä½ å‘èµ·ä¸€ä¸ªæ¶ˆæ¯åŽï¼ˆä¸‹æ–‡ä»‹ç»ï¼‰ï¼Œè¿™ä¸ªå‡½æ•°æŒ‡é’ˆå†³å®šäº†æœ€ç»ˆæ‰§è¡Œå“ªæ®µä»£ç ã€‚4.4 MethodMethodä»£è¡¨ç±»ä¸­çš„æŸä¸ªæ–¹æ³•çš„ç±»åž‹ã€‚typedef struct objc_method Method;objc_methodçš„å®šä¹‰å¦‚ä¸‹ï¼šstruct objc_method {SEL method_name OBJC2_UNAVAILABLE; // æ–¹æ³•åchar method_types OBJC2_UNAVAILABLE; // æ–¹æ³•ç±»åž‹IMP method_imp OBJC2_UNAVAILABLE; // æ–¹æ³•å®žçŽ°}æ–¹æ³•åmethod_nameç±»åž‹ä¸ºSELï¼Œä¸Šæ–‡æåˆ°è¿‡ã€‚æ–¹æ³•ç±»åž‹method_typesæ˜¯ä¸€ä¸ªcharæŒ‡é’ˆï¼Œå­˜å‚¨ç€æ–¹æ³•çš„å‚æ•°ç±»åž‹å’Œè¿”å›žå€¼ç±»åž‹ã€‚æ–¹æ³•å®žçŽ°method_impçš„ç±»åž‹ä¸ºIMPï¼Œä¸Šæ–‡æåˆ°è¿‡ã€‚4.5 IvarIvarä»£è¡¨ç±»ä¸­å®žä¾‹å˜é‡çš„ç±»åž‹typedef struct objc_ivar Ivar;objc_ivarçš„å®šä¹‰å¦‚ä¸‹ï¼šstruct objc_ivar {char ivar_name OBJC2_UNAVAILABLE; // å˜é‡åchar ivar_type OBJC2_UNAVAILABLE; // å˜é‡ç±»åž‹int ivar_offset OBJC2_UNAVAILABLE; // åŸºåœ°å€åç§»å­—èŠ‚#ifdef LP64int space OBJC2_UNAVAILABLE; // å ç”¨ç©ºé—´#endif}4.6 objc_property_tobjc_property_tæ˜¯å±žæ€§ï¼Œå®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼štypedef struct objc_property objc_property_t;objc_propertyæ˜¯å†…ç½®çš„ç±»åž‹ï¼Œä¸Žä¹‹å…³è”çš„è¿˜æœ‰ä¸€ä¸ªobjc_property_attribute_tï¼Œå®ƒæ˜¯å±žæ€§çš„attributeï¼Œä¹Ÿå°±æ˜¯å…¶å®žæ˜¯å¯¹å±žæ€§çš„è¯¦ç»†æè¿°ï¼ŒåŒ…æ‹¬å±žæ€§åç§°ã€å±žæ€§ç¼–ç ç±»åž‹ã€åŽŸå­ç±»åž‹/éžåŽŸå­ç±»åž‹ç­‰ã€‚å®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼štypedef struct {const char name; // åç§°const char value; // å€¼ï¼ˆé€šå¸¸æ˜¯ç©ºçš„ï¼‰} objc_property_attribute_t;4.7 CacheCatchçš„å®šä¹‰å¦‚ä¸‹ï¼štypedef struct objc_cache Cacheobjc_cacheçš„å®šä¹‰å¦‚ä¸‹ï¼šstruct objc_cache {unsigned int mask OBJC2_UNAVAILABLE;unsigned int occupied OBJC2_UNAVAILABLE;Method buckets[1] OBJC2_UNAVAILABLE;};mask: æŒ‡å®šåˆ†é…cache bucketsçš„æ€»æ•°ã€‚åœ¨æ–¹æ³•æŸ¥æ‰¾ä¸­ï¼ŒRuntimeä½¿ç”¨è¿™ä¸ªå­—æ®µç¡®å®šæ•°ç»„çš„ç´¢å¼•ä½ç½®ã€‚occupied: å®žé™…å ç”¨cache bucketsçš„æ€»æ•°ã€‚buckets: æŒ‡å®šMethodæ•°æ®ç»“æž„æŒ‡é’ˆçš„æ•°ç»„ã€‚è¿™ä¸ªæ•°ç»„å¯èƒ½åŒ…å«ä¸è¶…è¿‡mask+1ä¸ªå…ƒç´ ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒæŒ‡é’ˆå¯èƒ½æ˜¯NULLï¼Œè¡¨ç¤ºè¿™ä¸ªç¼“å­˜bucketæ²¡æœ‰è¢«å ç”¨ï¼Œå¦å¤–è¢«å ç”¨çš„bucketå¯èƒ½æ˜¯ä¸è¿žç»­çš„ã€‚è¿™ä¸ªæ•°ç»„å¯èƒ½ä¼šéšç€æ—¶é—´è€Œå¢žé•¿ã€‚objc_msgSendï¼ˆä¸‹æ–‡è®²è§£ï¼‰æ¯è°ƒç”¨ä¸€æ¬¡æ–¹æ³•åŽï¼Œå°±ä¼šæŠŠè¯¥æ–¹æ³•ç¼“å­˜åˆ°cacheåˆ—è¡¨ä¸­ï¼Œä¸‹æ¬¡çš„æ—¶å€™ï¼Œå°±ç›´æŽ¥ä¼˜å…ˆä»Žcacheåˆ—è¡¨ä¸­å¯»æ‰¾ï¼Œå¦‚æžœcacheæ²¡æœ‰ï¼Œæ‰ä»ŽmethodListsä¸­æŸ¥æ‰¾æ–¹æ³•ã€‚4.8 Catagoryè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„ç±»åˆ«äº†ï¼Œå¾ˆç†Ÿæ‚‰å§ã€‚å®ƒå¯ä»¥åŠ¨æ€çš„ä¸ºå·²å­˜åœ¨çš„ç±»æ·»åŠ æ–°çš„æ–¹æ³•ã€‚å®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼štypedef struct objc_category Category;objc_categoryçš„å®šä¹‰å¦‚ä¸‹ï¼šstruct objc_category {char category_name OBJC2_UNAVAILABLE; // ç±»åˆ«åç§°char class_name OBJC2_UNAVAILABLE; // ç±»åstruct objc_method_list instance_methods OBJC2_UNAVAILABLE; // å®žä¾‹æ–¹æ³•åˆ—è¡¨struct objc_method_list class_methods OBJC2_UNAVAILABLE; // ç±»æ–¹æ³•åˆ—è¡¨struct objc_protocol_list protocols OBJC2_UNAVAILABLE; // åè®®åˆ—è¡¨}å› ä¸ºæ˜¯å…¥é—¨ï¼Œä»¥ä¸Šå°±åˆ—ä¸¾è¿™äº›å§ï¼äº”ã€Objective-Cçš„æ¶ˆæ¯ä¼ é€’5.1 åŸºæœ¬æ¶ˆæ¯ä¼ é€’åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œå¯¹è±¡è°ƒç”¨æ–¹æ³•å«åšå‘é€æ¶ˆæ¯ã€‚åœ¨ç¼–è¯‘æ—¶ï¼Œç¨‹åºçš„æºä»£ç å°±ä¼šä»Žå¯¹è±¡å‘é€æ¶ˆæ¯è½¬æ¢æˆRuntimeçš„objc_msgSendå‡½æ•°è°ƒç”¨ã€‚ä¾‹å¦‚æŸå®žä¾‹å˜é‡receiverå®žçŽ°æŸä¸€ä¸ªæ–¹æ³•oneMethod[receiver oneMethod];Runtimeä¼šå°†å…¶è½¬æˆç±»ä¼¼è¿™æ ·çš„ä»£ç objc_msgSend(receiver, selector);å…·ä½“ä¼šè½¬æ¢æˆä»€ä¹ˆä»£ç å‘¢ï¼ŸRuntimeä¼šæ ¹æ®ç±»åž‹è‡ªåŠ¨è½¬æ¢æˆä¸‹åˆ—æŸä¸€ä¸ªå‡½æ•°ï¼šobjc_msgSend:æ™®é€šçš„æ¶ˆæ¯éƒ½ä¼šé€šè¿‡è¯¥å‡½æ•°å‘é€objc_msgSend_stret:æ¶ˆæ¯ä¸­æœ‰æ•°æ®ç»“æž„ä½œä¸ºè¿”å›žå€¼ï¼ˆä¸æ˜¯ç®€å•å€¼ï¼‰æ—¶ï¼Œé€šè¿‡æ­¤å‡½æ•°å‘é€å’ŒæŽ¥æ”¶è¿”å›žå€¼objc_msgSendSuper:å’Œobjc_msgSendç±»ä¼¼ï¼Œè¿™é‡ŒæŠŠæ¶ˆæ¯å‘é€ç»™çˆ¶ç±»çš„å®žä¾‹objc_msgSendSuper_stret:å’Œobjc_msgSend_stretç±»ä¼¼ï¼Œè¿™é‡ŒæŠŠæ¶ˆæ¯å‘é€ç»™çˆ¶ç±»çš„å®žä¾‹å¹¶æŽ¥æ”¶è¿”å›žå€¼å½“æ¶ˆæ¯è¢«å‘é€åˆ°å®žä¾‹å¯¹è±¡æ—¶ï¼Œæ˜¯å¦‚å›¾æ‰€ç¤ºå¤„ç†çš„ï¼ˆå›¾ç‰‡æºè‡ªç½‘ç»œï¼‰ï¼šobjc_msgSendå‡½æ•°çš„è°ƒç”¨è¿‡ç¨‹ï¼šç¬¬ä¸€æ­¥ï¼šæ£€æµ‹è¿™ä¸ªselectoræ˜¯ä¸æ˜¯è¦å¿½ç•¥çš„ã€‚ç¬¬äºŒæ­¥ï¼šæ£€æµ‹è¿™ä¸ªtargetæ˜¯ä¸æ˜¯nilå¯¹è±¡ã€‚nilå¯¹è±¡å‘é€ä»»ä½•ä¸€ä¸ªæ¶ˆæ¯éƒ½ä¼šè¢«å¿½ç•¥æŽ‰ã€‚ç¬¬ä¸‰æ­¥ï¼š1.è°ƒç”¨å®žä¾‹æ–¹æ³•æ—¶ï¼Œå®ƒä¼šé¦–å…ˆåœ¨è‡ªèº«isaæŒ‡é’ˆæŒ‡å‘çš„ç±»ï¼ˆclassï¼‰methodListsä¸­æŸ¥æ‰¾è¯¥æ–¹æ³•ï¼Œå¦‚æžœæ‰¾ä¸åˆ°åˆ™ä¼šé€šè¿‡classçš„super_classæŒ‡é’ˆæ‰¾åˆ°çˆ¶ç±»çš„ç±»å¯¹è±¡ç»“æž„ä½“ï¼Œç„¶åŽä»ŽmethodListsä¸­æŸ¥æ‰¾è¯¥æ–¹æ³•ï¼Œå¦‚æžœä»ç„¶æ‰¾ä¸åˆ°ï¼Œåˆ™ç»§ç»­é€šè¿‡super_classå‘ä¸Šä¸€çº§çˆ¶ç±»ç»“æž„ä½“ä¸­æŸ¥æ‰¾ï¼Œç›´è‡³æ ¹classï¼›2.å½“æˆ‘ä»¬è°ƒç”¨æŸä¸ªæŸä¸ªç±»æ–¹æ³•æ—¶ï¼Œå®ƒä¼šé¦–å…ˆé€šè¿‡è‡ªå·±çš„isaæŒ‡é’ˆæ‰¾åˆ°metaclassï¼Œå¹¶ä»Žå…¶ä¸­methodListsä¸­æŸ¥æ‰¾è¯¥ç±»æ–¹æ³•ï¼Œå¦‚æžœæ‰¾ä¸åˆ°åˆ™ä¼šé€šè¿‡metaclassçš„super_classæŒ‡é’ˆæ‰¾åˆ°çˆ¶ç±»çš„metaclasså¯¹è±¡ç»“æž„ä½“ï¼Œç„¶åŽä»ŽmethodListsä¸­æŸ¥æ‰¾è¯¥æ–¹æ³•ï¼Œå¦‚æžœä»ç„¶æ‰¾ä¸åˆ°ï¼Œåˆ™ç»§ç»­é€šè¿‡super_classå‘ä¸Šä¸€çº§çˆ¶ç±»ç»“æž„ä½“ä¸­æŸ¥æ‰¾ï¼Œç›´è‡³æ ¹metaclassï¼›ç¬¬å››éƒ¨ï¼šå‰ä¸‰éƒ¨éƒ½æ‰¾ä¸åˆ°å°±ä¼šè¿›å…¥åŠ¨æ€æ–¹æ³•è§£æž(çœ‹ä¸‹æ–‡)ã€‚5.2 æ¶ˆæ¯åŠ¨æ€è§£æžåŠ¨æ€è§£æžæµç¨‹å›¾ï¼ˆå›¾ç‰‡æ¥è‡ªç½‘ç»œï¼‰ï¼šè¯·å‚ç…§å›¾ç‰‡å“å‘³ä»¥ä¸‹æ­¥éª¤ï¼ˆå®žä¾‹è¯·çœ‹ä¸‹æ–‡ã€Š6.6 è‹è€å¸ˆçš„å”±æ­Œç¯‡ã€‹ï¼‰ï¼šç¬¬ä¸€æ­¥ï¼šé€šè¿‡resolveInstanceMethodï¼šæ–¹æ³•å†³å®šæ˜¯å¦åŠ¨æ€æ·»åŠ æ–¹æ³•ã€‚å¦‚æžœè¿”å›žYesåˆ™é€šè¿‡class_addMethodåŠ¨æ€æ·»åŠ æ–¹æ³•ï¼Œæ¶ˆæ¯å¾—åˆ°å¤„ç†ï¼Œç»“æŸï¼›å¦‚æžœè¿”å›žNoï¼Œåˆ™è¿›å…¥ä¸‹ä¸€æ­¥ï¼›ç¬¬äºŒæ­¥ï¼šè¿™æ­¥ä¼šè¿›å…¥forwardingTargetForSelector:æ–¹æ³•ï¼Œç”¨äºŽæŒ‡å®šå¤‡é€‰å¯¹è±¡å“åº”è¿™ä¸ªselectorï¼Œä¸èƒ½æŒ‡å®šä¸ºselfã€‚å¦‚æžœè¿”å›žæŸä¸ªå¯¹è±¡åˆ™ä¼šè°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ï¼Œç»“æŸã€‚å¦‚æžœè¿”å›žnilï¼Œåˆ™è¿›å…¥ç¬¬ä¸‰éƒ¨ï¼›ç¬¬ä¸‰éƒ¨ï¼šè¿™æ­¥æˆ‘ä»¬è¦é€šè¿‡methodSignatureForSelector:æ–¹æ³•ç­¾åï¼Œå¦‚æžœè¿”å›žnilï¼Œåˆ™æ¶ˆæ¯æ— æ³•å¤„ç†ã€‚å¦‚æžœè¿”å›žmethodSignatureï¼Œåˆ™è¿›å…¥ä¸‹ä¸€æ­¥ï¼›ç¬¬å››éƒ¨ï¼šè¿™æ­¥è°ƒç”¨forwardInvocationï¼šæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡anInvocationå¯¹è±¡åšå¾ˆå¤šå¤„ç†ï¼Œæ¯”å¦‚ä¿®æ”¹å®žçŽ°æ–¹æ³•ï¼Œä¿®æ”¹å“åº”å¯¹è±¡ç­‰ï¼Œå¦‚æžœæ–¹æ³•è°ƒç”¨æˆåŠŸï¼Œåˆ™ç»“æŸã€‚å¦‚æžœå¤±è´¥ï¼Œåˆ™è¿›å…¥doesNotRecognizeSelectoræ–¹æ³•ï¼Œè‹¥æˆ‘ä»¬æ²¡æœ‰å®žçŽ°è¿™ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šcrashã€‚åˆ°è¿™é‡Œå¤§å®¶å¯èƒ½æ™•ä¹Žä¹Žçš„ï¼Œä¸‹é¢çœ‹å®žæˆ˜ç¯‡å§ï¼è‹è€å¸ˆå¿…é¡»è®©ä½ æ‡‚ï¼å…­ã€Runtimeå®žæˆ˜è¯·å¤§å®¶æ”¾å¿ƒï¼Œä»¥ä¸‹æ‰€æœ‰å®žæˆ˜ç¯‡ï¼Œåœ¨æœ€åŽéƒ½ä¼šåˆ†äº«Demoç»™å¤§å®¶ï¼6.1 è‹è€å¸ˆé—®å¥½ç¯‡è‹è€å¸ˆè§åˆ°æˆ‘ä»¬å¹¿å¤§çš„ç²‰ä¸ä»¬ï¼Œç¬¬ä¸€ååº”å½“ç„¶æ˜¯ï¼šå¤§å®¶å¥½ï¼#if TARGET_IPHONE_SIMULATOR#import &lt;objc/objc-runtime.h&gt;#else#import &lt;objc/runtime.h&gt;#import &lt;objc/message.h&gt;#endif// è‡ªå®šä¹‰ä¸€ä¸ªæ–¹æ³•void sayFunction(id self, SEL _cmd, id some) {NSLog(@â€%@å²çš„%@è¯´ï¼š%@â€, object_getIvar(self, class_getInstanceVariable([self class], â€œ_ageâ€)),[self valueForKey:@â€nameâ€],some);}int main(int argc, const char argv[]) {@autoreleasepool {// åŠ¨æ€åˆ›å»ºå¯¹è±¡ åˆ›å»ºä¸€ä¸ªPerson ç»§æ‰¿è‡ª NSObjectç±»Class People = objc_allocateClassPair([NSObject class], â€œPersonâ€, 0);// ä¸ºè¯¥ç±»æ·»åŠ NSString _nameæˆå‘˜å˜é‡class_addIvar(People, â€œ_nameâ€, sizeof(NSString), log2(sizeof(NSString)), @encode(NSString));// ä¸ºè¯¥ç±»æ·»åŠ int _ageæˆå‘˜å˜é‡class_addIvar(People, â€œ_ageâ€, sizeof(int), sizeof(int), @encode(int));// æ³¨å†Œæ–¹æ³•åä¸ºsayçš„æ–¹æ³•SEL s = sel_registerName(â€œsay:â€);// ä¸ºè¯¥ç±»å¢žåŠ åä¸ºsayçš„æ–¹æ³•class_addMethod(People, s, (IMP)sayFunction, â€œv@:@â€);// æ³¨å†Œè¯¥ç±»objc_registerClassPair(People);// åˆ›å»ºä¸€ä¸ªç±»çš„å®žä¾‹id peopleInstance = [[People alloc] init];// KVC åŠ¨æ€æ”¹å˜ å¯¹è±¡peopleInstance ä¸­çš„å®žä¾‹å˜é‡[peopleInstance setValue:@â€è‹è€å¸ˆâ€ forKey:@â€nameâ€];// ä»Žç±»ä¸­èŽ·å–æˆå‘˜å˜é‡IvarIvar ageIvar = class_getInstanceVariable(People, â€œ_ageâ€);// ä¸ºpeopleInstanceçš„æˆå‘˜å˜é‡èµ‹å€¼object_setIvar(peopleInstance, ageIvar, @18);// è°ƒç”¨ peopleInstance å¯¹è±¡ä¸­çš„ s æ–¹æ³•é€‰æ‹©å™¨å¯¹äºŽçš„æ–¹æ³•// objc_msgSend(peopleInstance, s, @â€å¤§å®¶å¥½!â€); // è¿™æ ·å†™ä¹Ÿå¯ä»¥ï¼Œè¯·çœ‹æˆ‘åšå®¢è¯´æ˜Ž((void ()(id, SEL, id))objc_msgSend)(peopleInstance, s, @â€å¤§å®¶å¥½â€);peopleInstance = nil; //å½“Peopleç±»æˆ–è€…å®ƒçš„å­ç±»çš„å®žä¾‹è¿˜å­˜åœ¨ï¼Œåˆ™ä¸èƒ½è°ƒç”¨objc_disposeClassPairè¿™ä¸ªæ–¹æ³•ï¼›å› æ­¤è¿™é‡Œè¦å…ˆé”€æ¯å®žä¾‹å¯¹è±¡åŽæ‰èƒ½é”€æ¯ç±»ï¼›// é”€æ¯ç±»objc_disposeClassPair(People);}return 0;}æœ€åŽçš„ç»“æžœæ˜¯ï¼š18å²çš„è‹è€å¸ˆè¯´ï¼šå¤§å®¶å¥½ï¼åœ¨ä½¿ç”¨objc_msgSend(peopleInstance, s, @â€å¤§å®¶å¥½!â€);é»˜è®¤ä¼šå‡ºçŽ°ä»¥ä¸‹é”™è¯¯ï¼šobjc_msgSend()æŠ¥é”™Too many arguments to function call ,expected 0,have3ç›´æŽ¥é€šè¿‡objc_msgSend(self, setter, value)æ˜¯æŠ¥é”™ï¼Œè¯´å‚æ•°è¿‡å¤šã€‚è¯·è¿™æ ·è§£å†³ï¼šBuild Setting&#8211;&gt; Apple LLVM 7.0 &#8211; Preprocessing&#8211;&gt; Enable Strict Checking of objc_msgSend Calls æ”¹ä¸º NOå½“ç„¶ä½ ä¹Ÿå¯ä»¥è¿™æ ·å†™(æŽ¨è)ï¼š((void ()(id, SEL, id))objc_msgSend)(peopleInstance, s, @â€å¤§å®¶å¥½â€);å¼ºåˆ¶è½¬æ¢objc_msgSendå‡½æ•°ç±»åž‹ä¸ºå¸¦ä¸‰ä¸ªå‚æ•°ä¸”è¿”å›žå€¼ä¸ºvoidå‡½æ•°ï¼Œç„¶åŽæ‰èƒ½ä¼ ä¸‰ä¸ªå‚æ•°ã€‚æ­¤å®žæˆ˜å†…å®¹æ˜¯ï¼ŒåŠ¨æ€åˆ›å»ºä¸€ä¸ªç±»ï¼Œå¹¶åˆ›å»ºæˆå‘˜å˜é‡å’Œæ–¹æ³•ï¼Œæœ€åŽèµ‹å€¼æˆå‘˜å˜é‡å¹¶å‘é€æ¶ˆæ¯ã€‚å…¶ä¸­æˆå‘˜å˜é‡çš„èµ‹å€¼ä½¿ç”¨äº†KVCå’Œobject_setIvarå‡½æ•°ä¸¤ç§æ–¹å¼ï¼Œè¿™äº›ä¸œè¥¿å¤§å®¶ä¸¾ä¸€åä¸‰å°±å¯ä»¥äº†ã€‚Demoä¼ é€é—¨-&gt;6.1è‹è€å¸ˆé—®å¥½ç¯‡Demo6.2 è‹è€å¸ˆçš„ç‰¹å¾ç¯‡è‹è€å¸ˆåœ¨å¤§å®¶å¿ƒç›®ä¸­åº”è¯¥æœ‰å¾ˆå¤šç‰¹å¾å§ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡ä»£ç æ¥èŽ·å–è‹è€å¸ˆçš„ç‰¹å¾ã€‚People.hæ–‡ä»¶@interface People : NSObject{NSString _occupation;NSString _nationality;}@property (nonatomic, copy) NSString name;@property (nonatomic) NSUInteger age;- (NSDictionary )allProperties;- (NSDictionary )allIvars;- (NSDictionary )allMethods;@endPeople.mæ–‡ä»¶#if TARGET_IPHONE_SIMULATOR#import &lt;objc/objc-runtime.h&gt;#else#import &lt;objc/runtime.h&gt;#import &lt;objc/message.h&gt;#endif@implementation People- (NSDictionary )allProperties{unsigned int count = 0;// èŽ·å–ç±»çš„æ‰€æœ‰å±žæ€§ï¼Œå¦‚æžœæ²¡æœ‰å±žæ€§countå°±ä¸º0objc_property_t properties = class_copyPropertyList([self class], &amp;count);NSMutableDictionary resultDict = [@{} mutableCopy];for (NSUInteger i = 0; i &lt; count; i ++) {// èŽ·å–å±žæ€§çš„åç§°å’Œå€¼const char propertyName = property_getName(properties[i]);NSString name = [NSString stringWithUTF8String:propertyName];id propertyValue = [self valueForKey:name];if (propertyValue) {resultDict[name] = propertyValue;} else {resultDict[name] = @â€å­—å…¸çš„keyå¯¹åº”çš„valueä¸èƒ½ä¸ºnilå“¦ï¼â€;}}// è¿™é‡Œpropertiesæ˜¯ä¸€ä¸ªæ•°ç»„æŒ‡é’ˆï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨freeå‡½æ•°æ¥é‡Šæ”¾å†…å­˜ã€‚free(properties);return resultDict;}- (NSDictionary )allIvars{unsigned int count = 0;NSMutableDictionary resultDict = [@{} mutableCopy];Ivar ivars = class_copyIvarList([self class], &amp;count);for (NSUInteger i = 0; i &lt; count; i ++) {const char varName = ivar_getName(ivars[i]);NSString name = [NSString stringWithUTF8String:varName];id varValue = [self valueForKey:name];if (varValue) {resultDict[name] = varValue;} else {resultDict[name] = @â€å­—å…¸çš„keyå¯¹åº”çš„valueä¸èƒ½ä¸ºnilå“¦ï¼â€;}}free(ivars);return resultDict;}- (NSDictionary )allMethods{unsigned int count = 0;NSMutableDictionary resultDict = [@{} mutableCopy];// èŽ·å–ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¦‚æžœæ²¡æœ‰æ–¹æ³•countå°±ä¸º0Method methods = class_copyMethodList([self class], &amp;count);for (NSUInteger i = 0; i &lt; count; i ++) {// èŽ·å–æ–¹æ³•åç§°SEL methodSEL = method_getName(methods[i]);const char methodName = sel_getName(methodSEL);NSString name = [NSString stringWithUTF8String:methodName];// èŽ·å–æ–¹æ³•çš„å‚æ•°åˆ—è¡¨int arguments = method_getNumberOfArguments(methods[i]);resultDict[name] = @(arguments-2);}free(methods);return resultDict;}@endåœ¨main.mä¸­è¿è¡Œä»¥ä¸‹ä»£ç int main(int argc, const char argv[]) {@autoreleasepool {People cangTeacher = [[People alloc] init];cangTeacher.name = @â€è‹äº•ç©ºâ€;cangTeacher.age = 18;[cangTeacher setValue:@â€è€å¸ˆâ€ forKey:@â€occupationâ€];NSDictionary propertyResultDic = [cangTeacher allProperties];for (NSString propertyName in propertyResultDic.allKeys) {NSLog(@â€propertyName:%@, propertyValue:%@â€,propertyName, propertyResultDic[propertyName]);}NSDictionary ivarResultDic = [cangTeacher allIvars];for (NSString ivarName in ivarResultDic.allKeys) {NSLog(@â€ivarName:%@, ivarValue:%@â€,ivarName, ivarResultDic[ivarName]);}NSDictionary methodResultDic = [cangTeacher allMethods];for (NSString methodName in methodResultDic.allKeys) {NSLog(@â€methodName:%@, argumentsCount:%@â€, methodName, methodResultDic[methodName]);}}return 0;}æœ€åŽçš„è¾“å‡ºç»“æžœå¦‚ä¸‹ï¼šæ˜¯ä¸æ˜¯æœ‰ç‚¹å¤±æœ›ï¼Œæˆ‘æ²¡æœ‰åŠ ä¸€äº›ç‰¹æ®Šçš„æŠ€èƒ½ï¼Œç•™ç»™ä¸‹æ–‡äº†ã€‚æ­¤å®žæˆ˜å†…å®¹æ˜¯é€šè¿‡è‹è€å¸ˆçš„ä¸€äº›ç‰¹å¾å­¦ä¹ ï¼šå¦‚ä½•èŽ·å–å¯¹è±¡æ‰€æœ‰çš„å±žæ€§åç§°å’Œå±žæ€§å€¼ã€èŽ·å–å¯¹è±¡æ‰€æœ‰æˆå‘˜å˜é‡åç§°å’Œå˜é‡å€¼ã€èŽ·å–å¯¹è±¡æ‰€æœ‰çš„æ–¹æ³•åå’Œæ–¹æ³•å‚æ•°æ•°é‡ã€‚Demoä¼ é€é—¨-&gt;6.2è‹è€å¸ˆçš„ç‰¹å¾ç¯‡Demo6.3 è‹è€å¸ˆå¢žåŠ æ–°æŠ€èƒ½ç¯‡è‹è€å¸ˆè¦é€šè¿‡Categoryå’ŒAssociated Objectså¢žåŠ æŠ€èƒ½äº†ï¼Œå¿«çœ‹ï¼åˆ›å»ºPeople+Associated.hæ–‡ä»¶å¦‚ä¸‹ï¼š#import â€œPeople.hâ€typedef void (^CodingCallBack)();@interface People (Associated)@property (nonatomic, strong) NSNumber associatedBust; // èƒ¸å›´@property (nonatomic, copy) CodingCallBack associatedCallBack; // å†™ä»£ç @endPeople+Associated.må¦‚ä¸‹:#import â€œPeople+Associated.hâ€#if TARGET_IPHONE_SIMULATOR#import &lt;objc/objc-runtime.h&gt;#else#import &lt;objc/runtime.h&gt;#import &lt;objc/message.h&gt;#endif@implementation People (Associated)- (void)setAssociatedBust:(NSNumber )bust{// è®¾ç½®å…³è”å¯¹è±¡objc_setAssociatedObject(self, @selector(associatedBust), bust, OBJC_ASSOCIATION_RETAIN_NONATOMIC);}- (NSNumber )associatedBust{// å¾—åˆ°å…³è”å¯¹è±¡return objc_getAssociatedObject(self, @selector(associatedBust));}- (void)setAssociatedCallBack:(CodingCallBack)callback {objc_setAssociatedObject(self, @selector(associatedCallBack), callback, OBJC_ASSOCIATION_COPY_NONATOMIC);}- (CodingCallBack)associatedCallBack {return objc_getAssociatedObject(self, @selector(associatedCallBack));}@endåœ¨main.mä¸­è¿è¡Œä»¥ä¸‹ä»£ç #import â€œPeople.hâ€#import â€œPeople+Associated.hâ€int main(int argc, const char argv[]) {@autoreleasepool {People cangTeacher = [[People alloc] init];cangTeacher.name = @â€è‹äº•ç©ºâ€;cangTeacher.age = 18;[cangTeacher setValue:@â€è€å¸ˆâ€ forKey:@â€occupationâ€];cangTeacher.associatedBust = @(90);cangTeacher.associatedCallBack = ^(){NSLog(@â€è‹è€å¸ˆè¦å†™ä»£ç äº†ï¼â€);};cangTeacher.associatedCallBack();NSDictionary propertyResultDic = [cangTeacher allProperties];for (NSString propertyName in propertyResultDic.allKeys) {NSLog(@â€propertyName:%@, propertyValue:%@â€,propertyName, propertyResultDic[propertyName]);}NSDictionary methodResultDic = [cangTeacher allMethods];for (NSString methodName in methodResultDic.allKeys) {NSLog(@â€methodName:%@, argumentsCount:%@â€, methodName, methodResultDic[methodName]);}}return 0;}è¿™æ¬¡è¿è¡Œç»“æžœå¤šå‡ºäº†ä¸€ä¸ªassociatedBustï¼ˆèƒ¸å›´ï¼‰å’Œä¸€ä¸ªassociatedCallBackï¼ˆå†™ä»£ç ï¼‰å±žæ€§ã€‚å¦‚å›¾ï¼šæˆ‘ä»¬æˆåŠŸçš„ç»™è‹è€å¸ˆæ·»åŠ ä¸ªä¸€ä¸ªèƒ¸å›´çš„å±žæ€§å’Œä¸€ä¸ªå†™ä»£ç çš„å›žè°ƒï¼Œä½†æ˜¯æ·»åŠ å±žæ€§æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œæˆ‘ä»¬å¹³æ—¶åœ¨å¼€å‘è¿‡æˆåŠŸä¸­ç”¨çš„æ¯”è¾ƒå¤šçš„å°±æ˜¯æ·»åŠ å›žè°ƒäº†ã€‚Demoä¼ é€é—¨-&gt;6.3è‹è€å¸ˆå¢žåŠ æ–°æŠ€èƒ½ç¯‡Demo6.4 è‹è€å¸ˆçš„èµ„æ–™å½’æ¡£ç¯‡è‹è€å¸ˆçš„èµ„æ–™æ€»è¦æ•´ç†ä¸€ä¸‹å§ï¼åˆ›å»ºPeople.h#import &lt;Foundation/Foundation.h&gt;@interface People : NSObject &lt;NSCoding&gt;@property (nonatomic, copy) NSString name; // å§“å@property (nonatomic, strong) NSNumber age; // å¹´é¾„@property (nonatomic, copy) NSString occupation; // èŒä¸š@property (nonatomic, copy) NSString nationality; // å›½ç±@endPeople.m#import â€œPeople.hâ€#if TARGET_IPHONE_SIMULATOR#import &lt;objc/objc-runtime.h&gt;#else#import &lt;objc/runtime.h&gt;#import &lt;objc/message.h&gt;#endif@implementation People- (void)encodeWithCoder:(NSCoder )aCoder {unsigned int count = 0;Ivar ivars = class_copyIvarList([People class], &amp;count);for (NSUInteger i = 0; i &lt; count; i ++) {Ivar ivar = ivars[i];const char name = ivar_getName(ivar);NSString key = [NSString stringWithUTF8String:name];id value = [self valueForKey:key];[aCoder encodeObject:value forKey:key];}free(ivars);}- (id)initWithCoder:(NSCoder )aDecoder {self = [super init];if (self) {unsigned int count = 0;Ivar ivars = class_copyIvarList([People class], &amp;count);for (NSUInteger i = 0; i &lt; count; i ++) {Ivar ivar = ivars[i];const char name = ivar_getName(ivar);NSString key = [NSString stringWithUTF8String:name];id value = [aDecoder decodeObjectForKey:key];[self setValue:value forKey:key];}free(ivars);}return self;}@endDemoä¼ é€é—¨-&gt;6.4è‹è€å¸ˆçš„èµ„æ–™å½’æ¡£ç¯‡Demo6.5 è‹è€å¸ˆçš„èµ„æ–™è½¬æ¢ç¯‡æœåŠ¡å™¨è¿”å›žäº†å¤§é‡è‹è€å¸ˆçš„æ•°æ®ï¼Œæ‰‹æœºç«¯è¿™è¾¹æŽ¥æ”¶åŽå¦‚ä½•åŽ»è½¬æ¢å‘¢ï¼Ÿå½“ç„¶æ˜¯è¦å°†JSONè½¬æ¢ä¸ºModelå•¦ï¼ç›¸ä¿¡å¹³æ—¶ä½ ä»¬çš„é¡¹ç›®ä¸­ä¹Ÿç”¨åˆ°è¿‡è¿™äº›ä¸‰æ–¹åº“ï¼Œä¸‹é¢æˆ‘ä»¬åŽ»äº†è§£ä¸‹runtimeå®žçŽ°JSONå’ŒModeläº’è½¬ã€‚åˆ›å»ºPeople.h#import &lt;Foundation/Foundation.h&gt;@interface People : NSObject@property (nonatomic, copy) NSString name; // å§“å@property (nonatomic, strong) NSNumber age; // å¹´é¾„@property (nonatomic, copy) NSString occupation; // èŒä¸š@property (nonatomic, copy) NSString nationality; // å›½ç±// ç”Ÿæˆmodel- (instancetype)initWithDictionary:(NSDictionary )dictionary;// è½¬æ¢æˆå­—å…¸- (NSDictionary )covertToDictionary;@endPeople.mçš„ä»£ç å¦‚ä¸‹ï¼š#import â€œPeople.hâ€#if TARGET_IPHONE_SIMULATOR#import &lt;objc/objc-runtime.h&gt;#else#import &lt;objc/runtime.h&gt;#import &lt;objc/message.h&gt;#endif@implementation People- (instancetype)initWithDictionary:(NSDictionary )dictionary{self = [super init];if (self) {for (NSString key in dictionary.allKeys) {id value = dictionary[key];SEL setter = [self propertySetterByKey:key];if (setter) {// è¿™é‡Œè¿˜å¯ä»¥ä½¿ç”¨NSInvocationæˆ–è€…method_invokeï¼Œä¸å†ç»§ç»­æ·±ç©¶äº†ï¼Œæœ‰å…´è¶£googleã€‚((void ()(id, SEL, id))objc_msgSend)(self, setter, value);}}}return self;}- (NSDictionary )covertToDictionary{unsigned int count = 0;objc_property_t properties = class_copyPropertyList([self class], &amp;count);if (count != 0) {NSMutableDictionary resultDict = [@{} mutableCopy];for (NSUInteger i = 0; i &lt; count; i ++) {const void propertyName = property_getName(properties[i]);NSString name = [NSString stringWithUTF8String:propertyName];SEL getter = [self propertyGetterByKey:name];if (getter) {id value = ((id ()(id, SEL))objc_msgSend)(self, getter);if (value) {resultDict[name] = value;} else {resultDict[name] = @â€å­—å…¸çš„keyå¯¹åº”çš„valueä¸èƒ½ä¸ºnilå“¦ï¼â€;}}}free(properties);return resultDict;}free(properties);return nil;}#pragma mark - private methods// ç”Ÿæˆsetteræ–¹æ³•- (SEL)propertySetterByKey:(NSString )key{// é¦–å­—æ¯å¤§å†™ï¼Œä½ æ‡‚å¾—NSString propertySetterName = [NSString stringWithFormat:@â€set%@:â€, key.capitalizedString];SEL setter = NSSelectorFromString(propertySetterName);if ([self respondsToSelector:setter]) {return setter;}return nil;}// ç”Ÿæˆgetteræ–¹æ³•- (SEL)propertyGetterByKey:(NSString )key{SEL getter = NSSelectorFromString(key);if ([self respondsToSelector:getter]) {return getter;}return nil;}@endmain.mä¸­è¿è¡Œä»¥ä¸‹ä»£ç ï¼š#import &lt;Foundation/Foundation.h&gt;#if TARGET_IPHONE_SIMULATOR#import &lt;objc/objc-runtime.h&gt;#else#import &lt;objc/runtime.h&gt;#import &lt;objc/message.h&gt;#endif#import â€œPeople.hâ€int main(int argc, const char argv[]) {@autoreleasepool {NSDictionary dict = @{@â€nameâ€ : @â€è‹äº•ç©ºâ€,@â€ageâ€ : @18,@â€occupationâ€ : @â€è€å¸ˆâ€,@â€nationalityâ€ : @â€æ—¥æœ¬â€};// å­—å…¸è½¬æ¨¡åž‹People cangTeacher = [[People alloc] initWithDictionary:dict];NSLog(@â€çƒ­çƒˆæ¬¢è¿Žï¼Œä»Ž%@è¿œé“è€Œæ¥çš„%@å²çš„%@%@â€,cangTeacher.nationality,cangTeacher.age,cangTeacher.name,cangTeacher.occupation);// æ¨¡åž‹è½¬å­—å…¸NSDictionary covertedDict = [cangTeacher covertToDictionary];NSLog(@â€%@â€,covertedDict);}return 0;}æœ€åŽè¾“å‡ºå†…å®¹å¦‚ä¸‹ï¼šç›¸ä¿¡é€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œè¿™äº›ä»£ç ä¸ç”¨å†™è¿‡å¤šçš„æ³¨é‡Šä½ ä¹Ÿå¯ä»¥çœ‹æ‡‚äº†ï¼Œæˆ‘æŠŠå‡è®¾æ˜¯ç½‘ç»œè¿”å›žçš„è‹è€å¸ˆçš„èµ„æ–™è½¬åŒ–ä¸ºäº†modelï¼Œç„¶åŽåˆå°†modelè½¬å›žå­—å…¸ã€‚è¿™æ˜¯ä¸€ä¸ªJSONè½¬Modelç›¸äº’è½¬æ¢çš„ä¸€ä¸ªæ€è·¯ï¼Œå¤§å®¶ç¨åŽè¿è¡ŒDemoç»†ç»†å“å‘³ã€‚Demoä¼ é€é—¨-&gt;6.5è‹è€å¸ˆçš„èµ„æ–™è½¬æ¢ç¯‡Demo6.6 è‹è€å¸ˆçš„å”±æ­Œç¯‡è¿™ä¸ªå®žä¾‹ä¸»è¦æ˜¯éªŒè¯ä¸€ä¸‹ä¸Šæ–‡ã€Š5.2 æ¶ˆæ¯åŠ¨æ€è§£æžã€‹ç¬¬ä¸€é¦–ï¼šæ·»åŠ singå®žä¾‹æ–¹æ³•ï¼Œä½†æ˜¯ä¸æä¾›æ–¹æ³•çš„å®žçŽ°ã€‚éªŒè¯å½“æ‰¾ä¸åˆ°æ–¹æ³•çš„å®žçŽ°æ—¶ï¼ŒåŠ¨æ€æ·»åŠ æ–¹æ³•ã€‚åˆ›å»ºPeople.h#import &lt;Foundation/Foundation.h&gt;@interface People : NSObject@property (nonatomic, copy) NSString name;- (void)sing;@endåˆ›å»ºPeople.m#import â€œPeople.hâ€#if TARGET_IPHONE_SIMULATOR#import &lt;objc/objc-runtime.h&gt;#else#import &lt;objc/runtime.h&gt;#import &lt;objc/message.h&gt;#endif@implementation People+ (BOOL)resolveInstanceMethod:(SEL)sel{// æˆ‘ä»¬æ²¡æœ‰ç»™Peopleç±»å£°æ˜Žsingæ–¹æ³•ï¼Œæˆ‘ä»¬è¿™é‡ŒåŠ¨æ€æ·»åŠ æ–¹æ³•if ([NSStringFromSelector(sel) isEqualToString:@â€singâ€]) {class_addMethod(self, sel, (IMP)otherSing, â€œv@:â€);return YES;}return [super resolveInstanceMethod:sel];}void otherSing(id self, SEL cmd){NSLog(@â€%@ å”±æ­Œå•¦ï¼â€,((People )self).name);}åœ¨main.mä¸­è¿è¡Œä»¥ä¸‹ä»£ç ï¼š#import &lt;Foundation/Foundation.h&gt;#if TARGET_IPHONE_SIMULATOR#import &lt;objc/objc-runtime.h&gt;#else#import &lt;objc/runtime.h&gt;#import &lt;objc/message.h&gt;#endif#import â€œPeople.hâ€int main(int argc, const char argv[]) {@autoreleasepool {People cangTeacher = [[People alloc] init];cangTeacher.name = @â€è‹è€å¸ˆâ€;[cangTeacher sing];}return 0;}ç»“æžœå¦‚ä¸‹ï¼šæˆ‘ä»¬æ²¡æœ‰æä¾›è‹è€å¸ˆå”±æ­Œçš„æ–¹æ³•å®žçŽ°ï¼Œå› æ­¤åœ¨è°ƒç”¨æ­¤æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨resolveInstanceMethodæ–¹æ³•ï¼Œæˆ‘ä»¬åŠ¨æ€æ·»åŠ äº†æ–¹æ³•ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿”å›žNoï¼Œç»§ç»­å‘ä¸‹ä¼ é€’ã€‚ï¼ˆæ­¤å¤„è¯·è¿”å›žã€Š5.2 æ¶ˆæ¯åŠ¨æ€è§£æžã€‹ç¬¬ä¸€æ­¥å“å‘³ä¸‹ï¼‰Demoä¼ é€é—¨-&gt;6.6è‹è€å¸ˆå”±æ­Œç¯‡(ç¬¬ä¸€é¦–)Demoç¬¬äºŒé¦–å¤–é¢çš„å°é¸Ÿåœ¨å”±æ­Œï¼Œä½†æ˜¯è‹è€å¸ˆçš„æ­Œå£°ç›–è¿‡äº†å°é¸Ÿï¼Œæˆ‘ä»¬åªèƒ½å¬åˆ°è‹è€å¸ˆå”±æ­Œäº†ã€‚è¿™é‡Œæˆ‘ä»¬ä¸å£°æ˜Žsingæ–¹æ³•ï¼Œå°†è°ƒç”¨é€”ä¸­åŠ¨æ€æ›´æ¢è°ƒç”¨å¯¹è±¡ã€‚åœ¨ç¬¬ä¸€é¦–ä»£ç çš„åŸºç¡€ä¸Šï¼Œåˆ›å»ºBirdçš„modelBird.h#import &lt;Foundation/Foundation.h&gt;@interface Bird : NSObject@property (nonatomic, copy) NSString name;@endBird.m#import â€œBird.hâ€#import â€œPeople.hâ€@implementation Bird// ç¬¬ä¸€æ­¥ï¼šæˆ‘ä»¬ä¸åŠ¨æ€æ·»åŠ æ–¹æ³•ï¼Œè¿”å›žNOï¼Œè¿›å…¥ç¬¬äºŒæ­¥ï¼›+ (BOOL)resolveInstanceMethod:(SEL)sel{return NO;}// ç¬¬äºŒéƒ¨ï¼šæˆ‘ä»¬ä¸æŒ‡å®šå¤‡é€‰å¯¹è±¡å“åº”aSelectorï¼Œè¿›å…¥ç¬¬ä¸‰æ­¥ï¼›- (id)forwardingTargetForSelector:(SEL)aSelector{return nil;}// ç¬¬ä¸‰æ­¥ï¼šè¿”å›žæ–¹æ³•é€‰æ‹©å™¨ï¼Œç„¶åŽè¿›å…¥ç¬¬å››éƒ¨ï¼›- (NSMethodSignature )methodSignatureForSelector:(SEL)aSelector{if ([NSStringFromSelector(aSelector) isEqualToString:@â€singâ€]) {return [NSMethodSignature signatureWithObjCTypes:â€v@:â€];}return [super methodSignatureForSelector:aSelector];}// ç¬¬å››éƒ¨ï¼šè¿™æ­¥æˆ‘ä»¬ä¿®æ”¹è°ƒç”¨å¯¹è±¡- (void)forwardInvocation:(NSInvocation )anInvocation{// æˆ‘ä»¬æ”¹å˜è°ƒç”¨å¯¹è±¡ä¸ºPeoplePeople cangTeacher = [[People alloc] init];cangTeacher.name = @â€è‹è€å¸ˆâ€;[anInvocation invokeWithTarget:cangTeacher];}@endmain.mè¿è¡Œä»£ç å¦‚ä¸‹ï¼š#import &lt;Foundation/Foundation.h&gt;#if TARGET_IPHONE_SIMULATOR#import &lt;objc/objc-runtime.h&gt;#else#import &lt;objc/runtime.h&gt;#import &lt;objc/message.h&gt;#endif#import â€œPeople.hâ€#import â€œBird.hâ€int main(int argc, const char argv[]) {@autoreleasepool {Bird bird = [[Bird alloc] init];bird.name = @â€å°å°é¸Ÿâ€;((void ()(id, SEL))objc_msgSend)((id)bird, @selector(sing));}return 0;}è¿è¡Œç»“æžœå¦‚ä¸‹ï¼šæˆåŠŸæ›´æ¢äº†å¯¹è±¡ï¼ŒæŠŠå¯¹è±¡æ›´æ¢ä¸ºè‹è€å¸ˆäº†ã€‚ï¼ˆæ­¤å¤„è¯·è¿”å›žã€Š5.2 æ¶ˆæ¯åŠ¨æ€è§£æžã€‹å“å‘³ï¼‰Demoä¼ é€é—¨-&gt;6.6è‹è€å¸ˆå”±æ­Œç¯‡(ç¬¬äºŒé¦–)Demoç¬¬ä¸‰é¦–è‹è€å¸ˆä¸æƒ³å”±æ­Œæƒ³è·³èˆžäº†ã€‚è¿™é‡Œæˆ‘æ˜¯å®žçŽ°ä¸æä¾›å£°æ˜Žï¼Œä¸ä¿®æ”¹è°ƒç”¨å¯¹è±¡ï¼Œä½†æ˜¯å°†singæ–¹æ³•ä¿®æ”¹ä¸ºdanceæ–¹æ³•ã€‚åˆ›å»ºPeople.h#import &lt;Foundation/Foundation.h&gt;@interface People : NSObject@endPeople.m#import â€œPeople.hâ€#if TARGET_IPHONE_SIMULATOR#import &lt;objc/objc-runtime.h&gt;#else#import &lt;objc/runtime.h&gt;#import &lt;objc/message.h&gt;#endif@implementation People// ç¬¬ä¸€æ­¥ï¼šæˆ‘ä»¬ä¸åŠ¨æ€æ·»åŠ æ–¹æ³•ï¼Œè¿”å›žNOï¼Œè¿›å…¥ç¬¬äºŒæ­¥ï¼›+ (BOOL)resolveInstanceMethod:(SEL)sel{return NO;}// ç¬¬äºŒéƒ¨ï¼šæˆ‘ä»¬ä¸æŒ‡å®šå¤‡é€‰å¯¹è±¡å“åº”aSelectorï¼Œè¿›å…¥ç¬¬ä¸‰æ­¥ï¼›- (id)forwardingTargetForSelector:(SEL)aSelector{return nil;}// ç¬¬ä¸‰æ­¥ï¼šè¿”å›žæ–¹æ³•é€‰æ‹©å™¨ï¼Œç„¶åŽè¿›å…¥ç¬¬å››éƒ¨ï¼›- (NSMethodSignature )methodSignatureForSelector:(SEL)aSelector{if ([NSStringFromSelector(aSelector) isEqualToString:@â€singâ€]) {return [NSMethodSignature signatureWithObjCTypes:â€v@:â€];}return [super methodSignatureForSelector:aSelector];}// ç¬¬å››éƒ¨ï¼šè¿™æ­¥æˆ‘ä»¬ä¿®æ”¹è°ƒç”¨æ–¹æ³•- (void)forwardInvocation:(NSInvocation )anInvocation{[anInvocation setSelector:@selector(dance)];// è¿™è¿˜è¦æŒ‡å®šæ˜¯å“ªä¸ªå¯¹è±¡çš„æ–¹æ³•[anInvocation invokeWithTarget:self];}// è‹¥forwardInvocationæ²¡æœ‰å®žçŽ°ï¼Œåˆ™ä¼šè°ƒç”¨æ­¤æ–¹æ³•- (void)doesNotRecognizeSelector:(SEL)aSelector{NSLog(@â€æ¶ˆæ¯æ— æ³•å¤„ç†ï¼š%@â€, NSStringFromSelector(aSelector));}- (void)dance{NSLog(@â€è·³èˆžï¼ï¼ï¼come onï¼â€);}@endåœ¨main.mä¸­è¿è¡Œå¦‚ä¸‹ä»£ç ï¼š#import &lt;Foundation/Foundation.h&gt;#if TARGET_IPHONE_SIMULATOR#import &lt;objc/objc-runtime.h&gt;#else#import &lt;objc/runtime.h&gt;#import &lt;objc/message.h&gt;#endif#import â€œPeople.hâ€int main(int argc, const char argv[]) {@autoreleasepool {People cangTeacher = [[People alloc] init];((void(*)(id, SEL)) objc_msgSend)((id)cangTeacher, @selector(sing));}return 0;}ç»“æžœå¦‚å›¾ï¼šæˆåŠŸæ›´æ¢äº†æ–¹æ³•ï¼Œè‹è€å¸ˆç”±å”±æ­Œæ”¹ä¸ºè·³èˆžäº†ï¼ˆæ­¤å¤„è¯·è¿”å›žã€Š5.2 æ¶ˆæ¯åŠ¨æ€è§£æžã€‹å“å‘³ï¼‰Demoä¼ é€é—¨-&gt;6.6è‹è€å¸ˆå”±æ­Œç¯‡(ç¬¬ä¸‰é¦–)Demoæ€»ç»“å¥½å§ï¼Œæˆ‘æ‰¿è®¤æˆ‘éª—äº†ä½ ï¼Œå½“ä½ è¯»åˆ°è¿™é‡Œä½ è‚¯å®šèŠ±äº†ä¸æ­¢1å°æ—¶ã€‚éƒ½æ˜¯æˆ‘çš„é”™ï¼Œä¸æ˜¯å› ä¸ºä½ ç¬¨ï¼Œä¹‹æ‰€ä»¥è¯´1å°æ—¶æ˜¯ä¸ºäº†è®©ä½ æœ‰ä¿¡å¿ƒï¼Œæœ‰è€å¿ƒç»§ç»­ä¸‹åŽ»ã€‚è¯»åˆ°è¿™é‡Œæ­å–œä½ å·²ç»åœ¨iOSå¼€å‘çš„é“è·¯ä¸Šåˆå‘å‰äº†ä¸€æ­¥ï¼åŒæ—¶æˆ‘ä¹Ÿè¦æ„Ÿè°¢ä»¥ä¸‹å‚è€ƒæ–‡çŒ®ä»¥åŠæ–‡ç« ï¼Œæ˜¯ä»–ä»¬è®©æˆ‘æ›´å¥½çš„ç†è§£äº†runtimeï¼Œå†æ¬¡è¡¨ç¤ºæ„Ÿè°¢ï¼è¿™ç¯‡æ–‡ç« æ–­æ–­ç»­ç»­å†™äº†å°†è¿‘ä¸€å‘¨çš„æ—¶é—´ï¼Œæ‚¨å¯ä»¥è¯»åˆ°è¿™é‡Œå°±æ˜¯å¯¹æˆ‘æœ€å¤§çš„é¼“åŠ±ï¼Œè°¢è°¢ï¼Demoä¼ é€é—¨-&gt;æ‰€æœ‰çš„Demoæ‰“åŒ…ä¸‹è½½ åŽŸæ–‡åœ°å€ æœ¬æ–‡å‚è€ƒæ–‡çŒ®ä»¥åŠæ–‡ç« ï¼šObjective-C Runtime ReferenceObject Modelåˆè¯†Objective-C RuntimeObjective-C RuntimeObjective-C Runtime è¿è¡Œæ—¶ä¹‹ä¸€ï¼šç±»ä¸Žå¯¹è±¡Runtime Message Forwardingruntimeæ¨¡åž‹ä¸Žå­—å…¸äº’è½¬iOSå¼€å‘ä¹‹æ·±å…¥æŽ¢è®¨runtimeæœºåˆ¶Objective-C runtimeä¹‹æ¶ˆæ¯ï¼ˆäºŒï¼‰Objective-C runtimeä¹‹æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼ˆä¸‰ï¼‰ã€Šç¼–å†™é«˜è´¨é‡ä»£ç ï¼šæ”¹å–„Objective-Cç¨‹åºçš„61ä¸ªå»ºè®®ã€‹ã€Šæ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹ã€‹ï¼ˆå‚è€ƒå†™ä½œæ–¹å¼ï¼‰]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Swiftä½¿ç”¨OCæ¡†æž¶]]></title>
      <url>%2Fposts%2F28457%2F</url>
      <content type="text"><![CDATA[Swiftä½¿ç”¨OCæ¡†æž¶ åœºæ™¯ä¸€ï¼šä½¿ç”¨Cocopodså¯¼å…¥æ¡†æž¶çœ‹ä»¥å‰çš„æ•™ç¨‹ç”¨Cocopodså¯¼å…¥æ¡†æž¶ä¹Ÿè¦æ‰‹åŠ¨è®¾ç½®æ¡¥æŽ¥æ–‡ä»¶ï¼Œæˆ‘æœ€è¿‘åˆ›å»ºçš„é¡¹ç›®ç”¨Cocopodså®‰è£…çš„SDWebImageå’ŒSVProgressHUDå‘çŽ°xcodeä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ¡¥æŽ¥çš„.hæ–‡ä»¶åå­—æ˜¯Targets-Bridging-Header.h,å¹¶ä¸”ä¼šè‡ªåŠ¨è®¾ç½®è·¯å¾„å¦‚å›¾ï¼Œè¿™ä¸ªç¨åŽåœ¨åœºæ™¯2å†ç»§ç»­ä»‹ç» ç”¨Cocopodså¯¼å…¥çš„OCæ¡†æž¶Xcodeä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶ä½†æ˜¯æˆ‘å¹¶ä¸èƒ½åœ¨æœ¬åœ°æ‰¾åˆ°ä»–ï¼Œçœ‹SDWebImageçš„è¿™ä¸ªæ–‡ä»¶å¦‚ä¸‹åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ç›´æŽ¥ç”¨import SDWebImageå°±å¯ä»¥ä½¿ç”¨ SDWebImageçš„å„ç§æ–¹æ³•äº†è¿™ç§ç”±Cocopodså¯¼å…¥çš„æ¡†æž¶éƒ½ä¼šç”Ÿæˆè¿™ä¸ªç±»ä¼¼çš„æ–‡ä»¶ä¸ç”¨åœ¨æ¡¥æŽ¥æ–‡ä»¶æœ‰å¼•å…¥å¤´æ–‡ä»¶ç±»ä¼¼#import â€œUIImageView+WebCache.hâ€. åœºæ™¯äºŒï¼šæ²¡æœ‰ä½¿ç”¨Cocopodsæˆ–è€…ä½¿ç”¨Cocopodsæ‰‹åŠ¨å¯¼å…¥æ¡†æž¶æ²¡æœ‰ä½¿ç”¨Cocopodså°±éœ€è¦è‡ªå·±æ–°å»ºä¸€ä¸ªæ¡¥æŽ¥æ–‡ä»¶äº†å½“ç„¶å¦‚æžœç”¨äº†Cocopodså¯ä»¥ä½¿ç”¨Xcodeè‡ªåŠ¨ç”Ÿæˆçš„å°±æ˜¯åœºæ™¯ä¸€çš„é‚£ç§æƒ…å†µäº†,ä¸‹å›¾æ–°å»ºä¸€ä¸ªæ¡¥æŽ¥æ–‡ä»¶å‘½åéšæ„è¿™é‡Œçš„å›¾æ˜¯ç”¨åˆ«äººçš„çœŸæ˜¯éšæ„äº†å•Šï¼Œæˆ‘å»ºè®®å‘½åè§„åˆ™å¯ä»¥æŒ‰ç…§Targets-Bridging-Header.hæ¯•ç«Ÿè¿™æ ·çœ‹èµ·æ¥æ­£è§„ç‚¹å˜›å¡«å¥½æ–‡ä»¶åå­—,é€‰ä¸­è¯­è¨€ä¸ºObjective-C,ç‚¹å‡»Next è¿™ä¸ªæ—¶å€™å›žå‡ºçŽ°ä¸€ä¸ªå¼¹æ¡†,æ„æ€å°±æ˜¯ ä½ æ˜¯å¦æƒ³è¦é…ç½®ä¸€ä¸ªOCæ¡¥æŽ¥æ–‡ä»¶,é€‰æ‹©åˆ›å»ºï¼Œè·¯å¾„å¯ä»¥æŒ‰ç…§åœºæ™¯ä¸€çš„å›¾æ‰¾åˆ°å°±ä¸å†ä¸Šå›¾äº†ã€‚è¿™é‡Œå¼ºè°ƒä¸€ä¸ªé‡è¦è®¾ç½®æ³¨æ„ã€æ³¨æ„ã€æ³¨æ„é‡è¦çš„äº‹æƒ…è¯´ä¸‰éå˜›1.é€‰æ‹©targetï¼ˆå°±æ˜¯å·¦è¾¹ä½ çš„å·¥ç¨‹targetï¼‰â€”â€” BuildSettings â€”â€” search Paths ä¸‹çš„ User Header Search Paths 2.åŒå‡»åŽé¢çš„ç©ºç™½åŒºåŸŸï¼Œå¹¶ä¸”ç‚¹å‡»â€œ+â€å·æ·»åŠ ä¸€é¡¹ï¼šå¹¶ä¸”è¾“å…¥ï¼šâ€œ$(PODS_ROOT)â€ï¼ˆæ²¡æœ‰å¼•å·ï¼‰ï¼Œé€‰æ‹©ï¼šrecursiveï¼ˆä¼šåœ¨ç›¸åº”çš„ç›®å½•é€’å½’æœç´¢æ–‡ä»¶ï¼‰ã€‚ è¿™ä¸ªè®¾ç½®å®Œæ‰å¯ä»¥ä¿è¯åœ¨æ¡¥æŽ¥æ–‡ä»¶é‡Œèƒ½å¤Ÿæ­£å¸¸å¼•ç”¨OCåº“ ä¸€åˆ‡è®¾ç½®å¦¥å½“å°±å¯ä»¥æ‰‹åŠ¨æ‹–å…¥OCåº“äº†ï¼Œä¸¾ä¸ªä¾‹å­æˆ‘ç”¨çš„Toast æ„‰å¿«ä½¿ç”¨OCå’ŒSwiftçš„æ··ç¼–å§]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[OCä¸­loadæ–¹æ³•å’Œinitializeæ–¹æ³•çš„åŒºåˆ«]]></title>
      <url>%2Fposts%2F56109%2F</url>
      <content type="text"><![CDATA[OCä¸­æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„ç±»æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯loadå’Œinitializeã€‚æœ¬æ–‡æ€»ç»“ä¸€ä¸‹è¿™ä¸¤ä¸ªæ–¹æ³•çš„åŒºåˆ«äºŽè”ç³»ã€ä½¿ç”¨åœºæ™¯å’Œæ³¨æ„äº‹é¡¹ã€‚Demoå¯ä»¥åœ¨æˆ‘çš„Githubä¸Šæ‰¾åˆ°â€”â€”loadå’Œinitializeï¼Œå¦‚æžœè§‰å¾—æœ‰å¸®åŠ©è¿˜æœ›ç‚¹ä¸ªstarä»¥ç¤ºæ”¯æŒï¼Œæ€»ç»“åœ¨æ–‡ç« æœ«å°¾ã€‚loadé¡¾åæ€ä¹‰ï¼Œloadæ–¹æ³•åœ¨è¿™ä¸ªæ–‡ä»¶è¢«ç¨‹åºè£…è½½æ—¶è°ƒç”¨ã€‚åªè¦æ˜¯åœ¨Compile Sourcesä¸­å‡ºçŽ°çš„æ–‡ä»¶æ€»æ˜¯ä¼šè¢«è£…è½½ï¼Œè¿™ä¸Žè¿™ä¸ªç±»æ˜¯å¦è¢«ç”¨åˆ°æ— å…³ï¼Œå› æ­¤loadæ–¹æ³•æ€»æ˜¯åœ¨mainå‡½æ•°ä¹‹å‰è°ƒç”¨ã€‚è°ƒç”¨è§„åˆ™å¦‚æžœä¸€ä¸ªç±»å®žçŽ°äº†loadæ–¹æ³•ï¼Œåœ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•å‰ä¼šé¦–å…ˆè°ƒç”¨çˆ¶ç±»çš„loadæ–¹æ³•ã€‚è€Œä¸”è¿™ä¸ªè¿‡ç¨‹æ˜¯è‡ªåŠ¨å®Œæˆçš„ï¼Œå¹¶ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å®žçŽ°ï¼š// In Parent.m+ (void)load { NSLog(@â€Load Class Parentâ€);}// In Child.mï¼Œç»§æ‰¿è‡ªParent+ (void)load { NSLog(@â€Load Class Childâ€);}// In Child+load.mï¼ŒChildç±»çš„åˆ†ç±»+ (void)load { NSLog(@â€Load Class Child+loadâ€);}// è¿è¡Œç»“æžœï¼š/ 2016-02-01 21:28:14.379 load[11789:1435378] Load Class Parent 2016-02-01 21:28:14.380 load[11789:1435378] Load Class Child 2016-02-01 22:28:14.381 load[11789:1435378] Load Class Child+load /å¦‚æžœä¸€ä¸ªç±»æ²¡æœ‰å®žçŽ°loadæ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¸ä¼šè°ƒç”¨å®ƒçˆ¶ç±»çš„loadæ–¹æ³•ï¼Œè¿™ä¸€ç‚¹ä¸Žæ­£å¸¸çš„ç±»ç»§æ‰¿å’Œæ–¹æ³•è°ƒç”¨ä¸ä¸€æ ·ï¼Œéœ€è¦é¢å¤–æ³¨æ„ä¸€ä¸‹ã€‚æ‰§è¡Œé¡ºåºloadæ–¹æ³•è°ƒç”¨æ—¶ï¼Œç³»ç»Ÿå¤„äºŽè„†å¼±çŠ¶æ€ï¼Œå¦‚æžœè°ƒç”¨åˆ«çš„ç±»çš„æ–¹æ³•ï¼Œä¸”è¯¥æ–¹æ³•ä¾èµ–äºŽé‚£ä¸ªç±»çš„loadæ–¹æ³•è¿›è¡Œåˆå§‹åŒ–è®¾ç½®ï¼Œé‚£ä¹ˆå¿…é¡»ç¡®ä¿é‚£ä¸ªç±»çš„loadæ–¹æ³•å·²ç»è°ƒç”¨äº†ï¼Œæ¯”å¦‚demoä¸­çš„è¿™æ®µä»£ç ï¼Œæ‰“å°å‡ºçš„å­—ç¬¦ä¸²å°±ä¸ºnullï¼š 12345678910// In Child.m+ (void)load &#123; NSLog(@&quot;Load Class Child&quot;); Other *other = [Other new]; [other originalFunc]; // å¦‚æžœä¸å…ˆè°ƒç”¨otherçš„loadï¼Œä¸‹é¢è¿™è¡Œä»£ç å°±æ— æ•ˆï¼Œæ‰“å°å‡ºnull [Other printName];&#125; loadæ–¹æ³•çš„è°ƒç”¨é¡ºåºå…¶å®žæœ‰è¿¹å¯å¾ªï¼Œæˆ‘ä»¬çœ‹åˆ°demoçš„é¡¹ç›®è®¾ç½®å¦‚ä¸‹ï¼šæ‰§è¡Œé¡ºåºåœ¨Compile Sourcesä¸­ï¼Œæ–‡ä»¶çš„æŽ’æ”¾é¡ºåºå°±æ˜¯å…¶è£…è½½é¡ºåºï¼Œè‡ªç„¶ä¹Ÿå°±æ˜¯loadæ–¹æ³•è°ƒç”¨çš„é¡ºåºã€‚è¿™ä¸€ç‚¹ä¹Ÿè¯æ˜Žäº†loadæ–¹æ³•ä¸­ä¼šè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œå› ä¸ºåœ¨demoçš„è¾“å‡ºç»“æžœä¸­ï¼ŒParentçš„loadæ–¹æ³•å…ˆäºŽChildè°ƒç”¨ï¼Œè€Œå®ƒçš„è£…è½½é¡ºåºå…¶å®žåœ¨Childä¹‹åŽã€‚è™½ç„¶åœ¨è¿™ç§ç®€å•æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥è¾¨åˆ«å‡ºå„ä¸ªç±»çš„loadæ–¹æ³•è°ƒç”¨çš„é¡ºåºï¼Œä½†æ°¸è¿œä¸è¦ä¾èµ–è¿™ä¸ªé¡ºåºå®Œæˆä½ çš„ä»£ç é€»è¾‘ã€‚ä¸€æ–¹é¢ï¼Œè¿™åœ¨åŽæœŸçš„å¼€å‘ä¸­æžå®¹æ˜“å¯¼è‡´é”™è¯¯ï¼Œå¦ä¸€æ–¹é¢ï¼Œä½ å®žé™…ä¸Šå¹¶ä¸éœ€è¦è¿™ä¹ˆåšã€‚ä½¿ç”¨åœºæ™¯ç”±äºŽè°ƒç”¨loadæ–¹æ³•æ—¶çš„çŽ¯å¢ƒå¾ˆä¸å®‰å…¨ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡å‡å°‘loadæ–¹æ³•çš„é€»è¾‘ã€‚å¦ä¸€ä¸ªåŽŸå› æ˜¯loadæ–¹æ³•æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå®ƒå†…éƒ¨ä½¿ç”¨äº†é”ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥é¿å…çº¿ç¨‹é˜»å¡žåœ¨loadæ–¹æ³•ä¸­ã€‚ä¸€ä¸ªå¸¸è§çš„ä½¿ç”¨åœºæ™¯æ˜¯åœ¨loadæ–¹æ³•ä¸­å®žçŽ°Method Swizzleï¼š 1234567// In Other.m+ (void)load &#123; Method originalFunc = class_getInstanceMethod([self class], @selector(originalFunc)); Method swizzledFunc = class_getInstanceMethod([self class], @selector(swizzledFunc)); method_exchangeImplementations(originalFunc, swizzledFunc);&#125; åœ¨Childç±»çš„loadæ–¹æ³•ä¸­ï¼Œç”±äºŽè¿˜æ²¡è°ƒç”¨Otherçš„loadæ–¹æ³•ï¼Œæ‰€ä»¥è¾“å‡ºç»“æžœæ˜¯â€Original Outputâ€ï¼Œè€Œåœ¨mainå‡½æ•°ä¸­ï¼Œè¾“å‡ºç»“æžœè‡ªç„¶å°±å˜æˆäº†â€Swizzled Outputâ€ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé™¤äº†Method Swizzleï¼Œåˆ«çš„é€»è¾‘éƒ½ä¸åº”è¯¥æ”¾åœ¨loadæ–¹æ³•ä¸­å®žçŽ°ã€‚initializeè¿™ä¸ªæ–¹æ³•åœ¨ç¬¬ä¸€æ¬¡ç»™æŸä¸ªç±»å‘é€æ¶ˆæ¯æ—¶è°ƒç”¨ï¼ˆæ¯”å¦‚å®žä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼‰ï¼Œå¹¶ä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡ã€‚initializeæ–¹æ³•å®žé™…ä¸Šæ˜¯ä¸€ç§æƒ°æ€§è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æžœä¸€ä¸ªç±»ä¸€ç›´æ²¡è¢«ç”¨åˆ°ï¼Œé‚£å®ƒçš„initializeæ–¹æ³•ä¹Ÿä¸ä¼šè¢«è°ƒç”¨ï¼Œè¿™ä¸€ç‚¹æœ‰åˆ©äºŽèŠ‚çº¦èµ„æºã€‚è°ƒç”¨è§„åˆ™ä¸Žloadæ–¹æ³•ç±»ä¼¼çš„æ˜¯ï¼Œåœ¨initializeæ–¹æ³•å†…éƒ¨ä¹Ÿä¼šè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œè€Œä¸”ä¸éœ€è¦æˆ‘ä»¬æ˜¾ç¤ºçš„å†™å‡ºæ¥ã€‚ä¸Žloadæ–¹æ³•ä¸åŒä¹‹å¤„åœ¨äºŽï¼Œå³ä½¿å­ç±»æ²¡æœ‰å®žçŽ°initializeæ–¹æ³•ï¼Œä¹Ÿä¼šè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œè¿™ä¼šå¯¼è‡´ä¸€ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ï¼š// In Parent.m+ (void)initialize { NSLog(@â€Initialize Parent, caller Class %@â€, [self class]);}// In Child.m// æ³¨é‡ŠæŽ‰initializeæ–¹æ³•// In main.mChild *child = [Child new];è¿è¡ŒåŽå‘çŽ°çˆ¶ç±»çš„initializeæ–¹æ³•ç«Ÿç„¶è°ƒç”¨äº†ä¸¤æ¬¡ï¼š2016-02-01 22:57:02.985 load[12772:1509345] Initialize Parent, caller Class Parent2016-02-01 22:57:02.985 load[12772:1509345] Initialize Parent, caller Class Childè¿™æ˜¯å› ä¸ºåœ¨åˆ›å»ºå­ç±»å¯¹è±¡æ—¶ï¼Œé¦–å…ˆè¦åˆ›å»ºçˆ¶ç±»å¯¹è±¡ï¼Œæ‰€ä»¥ä¼šè°ƒç”¨ä¸€æ¬¡çˆ¶ç±»çš„initializeæ–¹æ³•ï¼Œç„¶åŽåˆ›å»ºå­ç±»æ—¶ï¼Œå°½ç®¡è‡ªå·±æ²¡æœ‰å®žçŽ°initializeæ–¹æ³•ï¼Œä½†è¿˜æ˜¯ä¼šè°ƒç”¨åˆ°çˆ¶ç±»çš„æ–¹æ³•ã€‚è™½ç„¶initializeæ–¹æ³•å¯¹ä¸€ä¸ªç±»è€Œè¨€åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œä½†è¿™é‡Œç”±äºŽå‡ºçŽ°äº†ä¸¤ä¸ªç±»ï¼Œæ‰€ä»¥è°ƒç”¨ä¸¤æ¬¡ç¬¦åˆè§„åˆ™ï¼Œä½†ä¸ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚ã€‚æ­£ç¡®ä½¿ç”¨initializeæ–¹æ³•çš„å§¿åŠ¿å¦‚ä¸‹ï¼š// In Parent.m+ (void)initialize { if (self == [Parent class]) { NSLog(@â€Initialize Parent, caller Class %@â€, [self class]); }}åŠ ä¸Šåˆ¤æ–­åŽï¼Œå°±ä¸ä¼šå› ä¸ºå­ç±»è€Œè°ƒç”¨åˆ°è‡ªå·±çš„initializeæ–¹æ³•äº†ã€‚ä½¿ç”¨åœºæ™¯initializeæ–¹æ³•ä¸»è¦ç”¨æ¥å¯¹ä¸€äº›ä¸æ–¹ä¾¿åœ¨ç¼–è¯‘æœŸåˆå§‹åŒ–çš„å¯¹è±¡è¿›è¡Œèµ‹å€¼ã€‚æ¯”å¦‚NSMutableArrayè¿™ç§ç±»åž‹çš„å®žä¾‹åŒ–ä¾èµ–äºŽruntimeçš„æ¶ˆæ¯å‘é€ï¼Œæ‰€ä»¥æ˜¾ç„¶æ— æ³•åœ¨ç¼–è¯‘å™¨åˆå§‹åŒ–ï¼š 12345678910// In Parent.mstatic int someNumber = 0; // intç±»åž‹å¯ä»¥åœ¨ç¼–è¯‘æœŸèµ‹å€¼static NSMutableArray *someObjects;+ (void)initialize &#123; if (self == [Parent class]) &#123; // ä¸æ–¹ä¾¿ç¼–è¯‘æœŸå¤åˆ¶çš„å¯¹è±¡åœ¨è¿™é‡Œèµ‹å€¼ someObjects = [[NSMutableArray alloc] init]; &#125;&#125; æ€»ç»“1 loadå’Œinitializeæ–¹æ³•éƒ½ä¼šåœ¨å®žä¾‹åŒ–å¯¹è±¡ä¹‹å‰è°ƒç”¨ï¼Œä»¥mainå‡½æ•°ä¸ºåˆ†æ°´å²­ï¼Œå‰è€…åœ¨mainå‡½æ•°ä¹‹å‰è°ƒç”¨ï¼ŒåŽè€…åœ¨mainå‡½æ•°ä¹‹åŽå¹¶ä¸”ç»™å¯¹è±¡å‘æ¶ˆæ¯ï¼ˆå®žä¾‹åŒ–æˆ–è€…è°ƒç”¨+æ–¹æ³•ï¼‰æ—¶å€™è°ƒç”¨ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼Œä¸èƒ½æ‰‹åŠ¨è°ƒç”¨å®ƒä»¬ã€‚ã€‚ loadå’Œinitializeæ–¹æ³•éƒ½ä¸ç”¨æ˜¾ç¤ºçš„è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•è€Œæ˜¯è‡ªåŠ¨è°ƒç”¨ï¼Œå³ä½¿å­ç±»æ²¡æœ‰initializeæ–¹æ³•ä¹Ÿä¼šè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œè€Œloadæ–¹æ³•åˆ™ä¸ä¼šè°ƒç”¨çˆ¶ç±»ã€‚ loadæ–¹æ³•é€šå¸¸ç”¨æ¥è¿›è¡ŒMethod Swizzleï¼Œinitializeæ–¹æ³•ä¸€èˆ¬ç”¨äºŽåˆå§‹åŒ–å…¨å±€å˜é‡æˆ–é™æ€å˜é‡ã€‚ loadå’Œinitializeæ–¹æ³•å†…éƒ¨ä½¿ç”¨äº†é”ï¼Œå› æ­¤å®ƒä»¬æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å®žçŽ°æ—¶è¦å°½å¯èƒ½ä¿æŒç®€å•ï¼Œé¿å…é˜»å¡žçº¿ç¨‹ï¼Œä¸è¦å†ä½¿ç”¨é”ã€‚ æ€»ç»“2+load é¦–å…ˆï¼Œloadæ–¹æ³•æ˜¯ä¸€å®šä¼šåœ¨runtimeä¸­è¢«è°ƒç”¨çš„ï¼Œåªè¦ç±»è¢«æ·»åŠ åˆ°runtimeä¸­äº†ï¼Œå°±ä¼šè°ƒç”¨loadæ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è‡ªå·±å®žçŽ°laodæ–¹æ³•æ¥åœ¨è¿™ä¸ªæ—¶å€™æ‰§è¡Œä¸€äº›è¡Œä¸ºã€‚ è€Œä¸”æœ‰æ„æ€çš„ä¸€ç‚¹æ˜¯ï¼Œloadæ–¹æ³•ä¸ä¼šè¦†ç›–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœå­ç±»å®žçŽ°äº†loadæ–¹æ³•ï¼Œé‚£ä¹ˆä¼šå…ˆè°ƒç”¨çˆ¶ç±»çš„loadæ–¹æ³•ï¼Œç„¶åŽåˆåŽ»æ‰§è¡Œå­ç±»çš„loadæ–¹æ³•ã€‚åŒæ ·çš„ï¼Œå¦‚æžœåˆ†ç±»å®žçŽ°äº†loadæ–¹æ³•ï¼Œä¹Ÿä¼šå…ˆæ‰§è¡Œä¸»ç±»çš„loadæ–¹æ³•ï¼Œç„¶åŽåˆä¼šåŽ»æ‰§è¡Œåˆ†ç±»çš„loadæ–¹æ³•ã€‚æ‰€ä»¥çˆ¶ç±»çš„loadä¼šæ‰§è¡Œå¾ˆå¤šæ¬¡ï¼Œè¿™ä¸€ç‚¹éœ€è¦æ³¨æ„ã€‚è€Œä¸”æ‰§è¡Œé¡ºåºæ˜¯ ç±» -&gt; å­ç±» -&gt;åˆ†ç±»ã€‚è€Œä¸åŒç±»ä¹‹é—´çš„é¡ºåºä¸ä¸€å®šã€‚ +initialize ä¸Žloadä¸åŒçš„æ˜¯ï¼Œinitializeæ–¹æ³•ä¸ä¸€å®šä¼šæ‰§è¡Œã€‚åªæœ‰å½“ä¸€ä¸ªç±»ç¬¬ä¸€æ¬¡è¢«å‘é€æ¶ˆæ¯çš„æ—¶å€™ä¼šæ‰§è¡Œï¼Œæ³¨æ„æ˜¯ç¬¬ä¸€æ¬¡ã€‚ä»€ä¹ˆå«å‘é€æ¶ˆæ¯å‘¢ï¼Œå°±æ˜¯æ‰§è¡Œç±»çš„ä¸€äº›æ–¹æ³•çš„æ—¶å€™ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ–¹æ³•æ˜¯æ‡’åŠ è½½ï¼Œæ²¡æœ‰ç”¨åˆ°è¿™ä¸ªç±»å°±ä¸ä¼šè°ƒç”¨ï¼Œå¯ä»¥èŠ‚çœç³»ç»Ÿèµ„æºã€‚ è¿˜æœ‰ä¸€ç‚¹æˆªç„¶ç›¸åï¼Œå´æ›´ç¬¦åˆæˆ‘ä»¬é¢„æœŸçš„å°±æ˜¯ï¼Œinitializeæ–¹æ³•ä¼šè¦†ç›–ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æžœå­ç±»å®žçŽ°äº†initializeæ–¹æ³•ï¼Œå°±ä¸ä¼šæ‰§è¡Œçˆ¶ç±»çš„äº†ï¼Œç›´æŽ¥æ‰§è¡Œå­ç±»æœ¬èº«çš„ã€‚å¦‚æžœåˆ†ç±»å®žçŽ°äº†initializeæ–¹æ³•ï¼Œä¹Ÿä¸ä¼šå†æ‰§è¡Œä¸»ç±»çš„ã€‚æ‰€ä»¥initializeæ–¹æ³•çš„æ‰§è¡Œè¦†ç›–é¡ºåºæ˜¯ åˆ†ç±» -&gt; å­ç±» -&gt;ç±»ã€‚ä¸”åªä¼šæœ‰ä¸€ä¸ªinitializeæ–¹æ³•è¢«æ‰§è¡Œã€‚ åŽŸæ–‡1,åŽŸæ–‡2]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[swiftæŠ¥é”™UICollectionView must be initialized with a non-nil layout parameter]]></title>
      <url>%2Fposts%2F25752%2F</url>
      <content type="text"><![CDATA[ä»Šå¤©å­¦ä¹ swiftçš„UICollectionViewæ—¶å€™é¡¹ç›®è¿è¡Œå°±æŠ¥é”™ï¼ŒæŽ§åˆ¶å°æ˜¾ç¤ºâ€œUICollectionView must be initialized with a non-nil layout parameterâ€ï¼Œæ„æ€å¾ˆæ˜Žæ˜¾å°±æ˜¯UICollectionViewåˆå§‹åŒ–æ—¶å€™æ²¡æœ‰ç»™ä¸ªæœ‰æ•ˆçš„layoutï¼Œå°±æ˜¯è¯´UICollectionViewFlowLayoutæ²¡æœ‰åˆå§‹åŒ–ï¼Œæˆ‘å°±çº³é—·äº†æ˜Žæ˜Žæ˜¯åˆå§‹åŒ–äº†å•Š 123å…¨å±€å˜é‡ private var layout = UICollectionViewFlowLayout() private var collectionView :UICollectionView() ç„¶åŽåœ¨viewDidLoadé‡Œ 1collectionView = UICollectionView(frame: self.view.bounds, collectionViewLayout: layout) çœ‹èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œæ‰åˆå­¦swiftä¸çŸ¥é“ 1private var collectionView :UICollectionView() è¿™æ ·å†™å·²ç»æ˜¯åˆå§‹åŒ–äº†ï¼Œæ‰€ä»¥å°±æŠ¥é”™äº†ï¼Œåº”è¯¥åœ¨å£°æ˜Žå˜é‡çš„æ—¶å€™æ”¹ä¸ºå¦‚ä¸‹å†™æ³• 1private var collectionView :UICollectionView! è¿™æ ·å°±å°±åªæ˜¯å£°æ˜Žå˜é‡äº†å†åœ¨viewDidLoadé‡Œåˆå§‹åŒ–ä½¿ç”¨å°±æ²¡é—®é¢˜äº† 12 layout = UICollectionViewFlowLayout()collectionView = UICollectionView(frame: self.view.bounds, collectionViewLayout: layout)]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ios9è®¾ç½®é€šç”¨é“¾æŽ¥]]></title>
      <url>%2Fposts%2F28111%2F</url>
      <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯é€šç”¨é“¾æŽ¥ï¼Ÿé€šè¿‡å”¯ä¸€çš„ç½‘å€, å°±å¯ä»¥é“¾æŽ¥ä¸€ä¸ªç‰¹å®šçš„è§†å›¾åˆ°ä½ çš„ APP é‡Œé¢, ä¸éœ€è¦ç‰¹åˆ«çš„ schemaé€šç”¨é“¾æŽ¥æ˜¯ä¸€ç§èƒ½å¤Ÿæ–¹ä¾¿çš„é€šè¿‡ä¼ ç»Ÿ HTTP é“¾æŽ¥æ¥å¯åŠ¨ APP, ä½¿ ç”¨ç›¸åŒçš„ç½‘å€æ‰“å¼€ç½‘ç«™å’Œ APPã€‚å½“ä½ çš„åº”ç”¨æ”¯æŒé€šç”¨é“¾æŽ¥ï¼ŒiOS9 ä¹‹åŽ , ç”¨æˆ·å¯ä»¥ç‚¹å‡»ä¸€ä¸ªé“¾æŽ¥è·³è½¬åˆ°ä½ çš„ç½‘ç«™,å¹¶èŽ·å¾—æ— ç¼é‡å®šå‘åˆ°æ‚¨å®‰è£…çš„åº”ç”¨ç¨‹åº,è€Œæ— éœ€é€šè¿‡ Safari æµè§ˆå™¨ã€‚å¦‚æžœä½ çš„åº”ç”¨ä¸æ”¯æŒçš„è¯,ç‚¹å‡»é“¾æŽ¥å°†ä¼šç”¨ Safari æ¥æ‰“å¼€ã€‚ã€‚è¯•æƒ³ä¸€ä¸‹ Twitter ä½¿ç”¨äº†é€šç”¨é“¾æŽ¥, é‚£ä¹ˆä½ æ¯åœ¨ twitter.com ç‚¹å‡»ä¸€ä¸ªé“¾æŽ¥, ä½ çš„ iOS è®¾å¤‡éƒ½ä¼šåœ¨ Twitter é‡Œé¢è‡ªåŠ¨æ‰“å¼€è¿™ä¸ªé¡µé¢, è€Œä¸æ˜¯å½“ä½ æ²¡æœ‰å®‰è£…æ—¶è½¬åˆ°æ™®é€šçš„ç½‘é¡µã€‚è¿™ä¸ªç”¨æˆ·ä½“éªŒæ˜¯é¡ºç•…çš„, æœ€é‡è¦çš„æ˜¯ç”¨æˆ·ä¸ä¼šå¤±åŽ»ä¸Šä¸‹æ–‡ï¼ˆè·³åˆ° APP åŽ Safari ä¸Šä¸å†ç•™ä¸‹ç©ºæ ‡ç­¾ï¼‰ã€‚ é€šç”¨é“¾æŽ¥çš„ä¼˜ç‚¹é€šç”¨é“¾æŽ¥æ¯”è‡ªå®šä¹‰çš„URLé“¾æŽ¥æœ‰å‡ å¤„å°¤ä¸ºçªå‡ºçš„å¥½å¤„,å…·ä½“æ¥è¯´,é€šç”¨é“¾æŽ¥ç‹¬ç‰¹æ€§ï¼šä¸Žè‡ªå®šä¹‰çš„URLé“¾æŽ¥ç›¸æ¯”,é€šç”¨é“¾æŽ¥ä¸èƒ½è¢«å…¶ä»–çš„åº”ç”¨ç¨‹åºæ‰€è®¿é—®,å› ä¸º 1:å®ƒä»¬ä½¿ç”¨çš„æ˜¯æ ‡å‡†çš„HTTP æˆ– HTTPS é“¾æŽ¥åˆ°ä½ çš„ç½‘ç«™ã€‚å®‰å…¨æ€§ï¼šå½“ç”¨æˆ·å®‰è£…åº”ç”¨ç¨‹åº,iOSä¼šæ£€æŸ¥æ‚¨å·²ç»ä¸Šä¼ åˆ°webæœåŠ¡å™¨æ–‡ä»¶,ä»¥ç¡® 2:ä¿æ‚¨çš„ç½‘ç«™å…è®¸ä½ çš„åº”ç”¨ç¨‹åºèƒ½æ‰“å¼€ä»£è¡¨å®ƒçš„URL æ–‡ä»¶,åªè¦ä½ åˆ›å»ºå¹¶ä¸”ä¸Šä¼ è¯¥æ–‡ä»¶,é‚£ä¹ˆä½ çš„åº”ç”¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„å…³è”æ˜¯å®‰å…¨çš„ã€‚çµæ´»æ€§ï¼šå½“ä½ çš„åº”ç”¨ç¨‹åºæ²¡æœ‰è¢«å®‰è£…çš„æ—¶å€™,é€šç”¨é“¾æŽ¥ç…§æ ·èƒ½å¤Ÿå·¥ä½œã€‚ 3:å½“ç”¨æˆ·æ²¡æœ‰å®‰è£…ä½ çš„åº”ç”¨ç¨‹åº,ç‚¹å‡»è¯¥é“¾æŽ¥,å°†ä¼šä»¥ç”¨æˆ·æ‰€æœŸæœ›çš„ä»¥Safariçš„å½¢å¼è®¿é—®ã€‚ç®€å•æ€§ï¼šé€šç”¨é“¾æŽ¥æ—¢èƒ½æ”¯æŒä½ çš„ç½‘ç«™,åˆèƒ½æ”¯æŒä½ çš„åº”ç”¨ç§æœ‰æ€§ï¼šå…¶ä»–çš„åº”ç”¨ç¨‹åºèƒ½å’Œä½ çš„åº”ç”¨ç¨‹åºé€šä¿¡,ä¸ç®¡ä½ çš„åº”ç”¨æ˜¯å¦è¢«å®‰è£…ã€‚ å‡†å¤‡ä½¿ç”¨é€šç”¨é“¾æŽ¥å®žçŽ°é€šç”¨é“¾æŽ¥ä¸éš¾, ä½†é¦–å…ˆå¿…é¡»éµå®ˆä¸€äº›å…ˆå†³æ¡ä»¶ã€‚å¦‚ä¸‹ï¼š æœ‰ä¸€ä¸ªæ³¨å†Œçš„åŸŸå é€šè¿‡ SSL è®¿é—®åŸŸå æ”¯æŒä¸Šä¼ ä¸€ä¸ª JSON æ–‡ä»¶åˆ°ä½ çš„åŸŸå è‡³å°‘ iOS 9 beta 2 ç‰ˆæœ¬ [ä¸‹è½½]ï¼Œè¿™å¾ˆé‡è¦,å› ä¸ºå¦‚æžœæ˜¯ä¹‹å‰çš„æµ‹è¯•ç‰ˆæœ¬ä½ éœ€è¦åšé¢å¤–çš„æ“ä½œã€‚ è‡³å°‘ Xcode 7 beta 2å¦‚æžœä½ éƒ½æœ‰äº†, é‚£å°±æ¥æŒ‰ç…§ä¸‹é¢3ä¸ªæ­¥éª¤æ¥åšå§ã€‚ 1.å¼€å¯ Associated Domains åŸŸ: è¿›å…¥è‹¹æžœApple Developer â€” Member Center - Certificates, Identifiers &amp; Profiles â€“ Identifiers - App IDs â€“Edit ç„¶åŽå¼€å¯æ‰“é’© Associated Domains åŽä¿å­˜ã€‚ 2.æ·»åŠ åŸŸååˆ° Capabilitiesé¦–å…ˆ, ä½ å¿…é¡»åœ¨ Xcode çš„ capabilities é‡Œ æ·»åŠ ä½ çš„ APP åŸŸå, å¿…é¡»ç”¨ applinks: å‰ç½®å®ƒï¼šè¿˜æ·»åŠ ä¸€äº›ä½ å¯èƒ½æ‹¥æœ‰çš„å­åŸŸå’Œæ‰©å±•ï¼ˆwww.domain.com, news.domain.com ç­‰ç­‰ï¼‰ã€‚ ç”¨applinks: å‰ç¼€æ·»åŠ æ‰€æœ‰åŸŸå, åŒæ—¶ä¸è¦å¿˜äº†åŒ…å«æ‰€æœ‰å¯èƒ½éœ€è¦çš„å­åŸŸå è¿™å°†ä½¿ä½ çš„ APP ä»Žä½ çš„åŸŸåè¯·æ±‚ä¸€ä¸ªç‰¹æ®Šçš„ JSON æ–‡ä»¶ apple-app-site-associationã€‚å½“ä½ ç¬¬ä¸€æ¬¡å¯åŠ¨ APPï¼Œå®ƒä¼šä»Ž https://domain.com/apple-app-site-association ä¸‹è½½è¿™ä¸ªæ–‡ä»¶ã€‚è·³åˆ°ä¸‹ä¸ªæ­¥éª¤æ¥äº†è§£å¦‚ä½•æž„å»ºè¿™ä¸ªæ–‡ä»¶ã€‚ 3.ä¸Šä¼  apple-app-site-association æ–‡ä»¶è¯¥æ–‡ä»¶å¿…é¡»å­˜åœ¨ä¸”ä¸ºäº†å®‰å…¨åŽŸå› å¯ä½¿ç”¨ SSL é€šè¿‡ GET è¯·æ±‚è®¿é—®åˆ°ã€‚ä½ å¯ä»¥æ‰“å¼€ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ç„¶åŽå†™ä¸€ä¸ªè¿™æ ·çš„ç®€å• JSON æ ¼å¼ï¼š 123456789101112131415&#123; &quot;applinks&quot;: &#123; &quot;apps&quot;: [], &quot;details&quot;: [ &#123; &quot;appID&quot;: &quot;L2LYHXGC7E.com.domain.Appr&quot;, &quot;paths&quot;: [ &quot;*&quot; ,&quot;/&quot;,&quot;/archives/&quot;,&quot;/archives/*&quot;] &#125;, &#123; &quot;appID&quot;: &quot;ABCD1234.com.apple.wwdc&quot;, &quot;paths&quot;: [ &quot;*&quot; ] &#125; ] &#125;&#125; æœ€åŽ, ä¸Šä¼ è¿™ä¸ªæ–‡ä»¶åˆ°ä½ çš„åŸŸåæ ¹ç›®å½•ã€‚å¦‚æžœä½ æ‰“å¼€ https://domain.com/apple-app-site-association å¯ä»¥çœ‹åˆ°ä½ çš„æ–‡ä»¶, æˆ‘çœ‹åˆ°ç½‘ä¸Šä¸€éƒ¨åˆ†äººè¯´å¯ä»¥æ‰“å¼€è‹¹æžœçš„è¿™ä¸ªç½‘å€æ£€æµ‹apple-app-site-associationæ˜¯å¦æ˜¯æœ‰æ•ˆï¼Œåœ¨æˆ‘éƒ¨ç½²å®Œä»¥ä¸Šæ­¥éª¤åŽæµ‹è¯•ä¸‹æœ€åŽä¸€é¡¹Link to Applicationä¹Ÿæ˜¯æ— æ•ˆçš„ä½†åœ¨æˆ‘åšå®Œæ‰€æœ‰æ­¥éª¤åŽå‘çŽ°å·²ç»å®žçŽ°äº†æœ¬æ–‡è¦å®žçŽ°çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯è¯´å…·ä½“æ•ˆæžœè¿˜æ˜¯è¦ä»¥è‡ªå·±æµ‹è¯•ä¸ºå‡†ã€‚é‚£ä¹ˆä½ å°±å¯ä»¥ç»§ç»­ä¸‹ä¸€æ­¥äº†ã€‚ æ³¨æ„äº‹é¡¹ï¼ˆ1ï¼‰ 1, paths è·¯å¾„æ˜¯å¤§å°å†™æ•æ„Ÿçš„ 2, paths å†…å®¹å¯æ˜Žç¡®å“ªäº›é€šç”¨é“¾æŽ¥éœ€è¦è¢«å¤„ç†,å“ªäº›ä¸éœ€è¦ 3, NOT ä½¿ç”¨:ä¸ºäº†æ˜Žç¡®æŒ‡å‡ºä¸è¢«å¤„ç†çš„é“¾æŽ¥,å¯å¢žåŠ  â€œNOTâ€åœ¨é“¾æŽ¥å‰é¢ä¾‹ å¦‚ â€œpathsâ€: [ â€œ/wwdc/news/â€œ, â€œNOT /videos/wwdc/2010/â€œ, â€œ/videos/wwdc/201?/â€œ] 4, ä½ å¯ä»¥ä½¿ç”¨ * æ˜Žç¡®æ‰€æœ‰çš„ç½‘é¡µ 5, ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ˜Žç¡®çš„çš„ URL,ä¾‹å¦‚ /wwdc/news/ 6, ä¹Ÿå¯ä»¥è¿½åŠ  åˆ°ä½ çš„ URL ,ä¾‹å¦‚ /videos/wwdc/2015/ ä¹Ÿå¯ä»¥ä½¿ç”¨ æ¥åŒ¹é…ä»»ä½•å­—ç¬¦,ä½¿ç”¨ ? æ¥åŒ¹é…ä¸€ä¸ªå­—ç¬¦,å¯ä»¥åœ¨è·¯å¾„ ä¸­ä½¿ç”¨è¿™ç§æ··æ­çš„å½¢å¼, ä¾‹å¦‚ /foo//bar/201?/mypage æ³¨æ„äº‹é¡¹ï¼ˆ2ï¼‰ 1, â€œappIDâ€ç»„æˆéƒ¨åˆ†:TeamID + BundleId TeamID 2, BundleId ä¸€å®šè¦å’Œ APP çš„ BundleId ä¸€è‡´ã€‚ 3, apple-app-site-association æ–‡ä»¶ä¸èƒ½å¸¦åŽç¼€ 4, apple-app-site-association æ–‡ä»¶éœ€è¦ä¸Šä¼ åˆ°ç½‘ç«™æ ¹ç›®å½• 5, æ¯ä¸€ä¸ªä»£è¡¨ç€åº”ç”¨çš„ å­—å…¸,å¿…é¡»åŒ…å«ä¸€ä¸ª appID å’Œ paths, appID æ˜¯teamID å’Œ bundleID,paths æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„æ˜Žç¡®ç€ä½ çš„åº”ç”¨æ”¯æŒçš„é€šç”¨é“¾æŽ¥å’Œä½ çš„åº”ç”¨ç¨‹åºä¸æ”¯æŒçš„é€šç”¨è¿žæŽ¥å†…å®¹ã€‚ ä¸‹å›¾å°±æ˜¯ â€œappIDâ€ç»„æˆéƒ¨åˆ†:TeamID + BundleId TeamID æœ€åŽä¸ºäº†åœ¨ APP é‡Œæ”¯æŒé€šç”¨é“¾æŽ¥, ä½ éœ€è¦åœ¨ AppDelegate é‡Œå®žçŽ°ç›¸å¯¹åº”çš„é€»è¾‘ é™„ä¸Šæˆ‘é‚£ä¸ªéªŒè¯apple-app-site-associationçš„æˆªå›¾å§B6B1BAB7-FBDD-4CFD-8862-9B78738787E4 posted by (C)sky521 æ•ˆæžœå›¾ åœ¨â€œå…¨èšæ˜Ÿâ€æ‰“å¼€ IMG_0413 posted by (C)sky521]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[è§£å†³xcode8.2æŽ§åˆ¶å°æ•°æ®æ‰“å°ä¸å…¨]]></title>
      <url>%2Fposts%2F16299%2F</url>
      <content type="text"><![CDATA[æœ€è¿‘å‡çº§Xcode8ï¼Œå¼€å‘å·¥å…·å‡ºçŽ°äº†ï¼ŒæŽ§åˆ¶å°logæ•°æ®ä¸å®Œæ•´ï¼Œç»å¸¸æ‰“å°ä¸€åŠï¼Œå°±æ²¡æœ‰äº†ï¼Œç»è¿‡æŸ¥è¯¢ä¸€ç•ªç»ˆäºŽæ‰¾åˆ°äº†è§£å†³åŠžæ³•! è§£å†³åŠžæ³•ï¼šå®å®šä¹‰åŽ»logæ—¥å¿—æ•°æ®ï¼ŒæŠŠNSlogæ¢æˆprint 123456789#ifdef DEBUG#define DLog( s, ... ) printf(&quot;class: &lt;%p %s:(%d) &gt; method: %s \n%s\n&quot;, self, [[[NSString stringWithUTF8String:__FILE__] lastPathComponent] UTF8String], __LINE__, __PRETTY_FUNCTION__, [[NSString stringWithFormat:(s), ##__VA_ARGS__] UTF8String] )#else#define DLog( s, ... )#endif æ—¥äº†ç‹—äº† è®©æˆ‘çº ç»“åŠå¤© ï¼Œå¿ƒæƒ³xcodeä¸ä¼šå‡ºçŽ°è¿™ä¹ˆä½Žçº§çš„é—®é¢˜å§ï¼Œæ²¡æƒ³æŸ¥äº†ä¸€ä¸‹è¿˜çœŸæœ‰è¿™ä¸ªé—®é¢˜ï¼Œäº‹å®žè¯æ˜Žâ€˜å®žè·µæ˜¯è¯æ˜ŽçœŸç†çš„å”¯ä¸€æ ‡å‡†â€™å•Šã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[è§£å†³TableViewCellå’ŒCollectionViewCellå¤ç”¨å¸ƒå±€é”™ä¹±é—®é¢˜]]></title>
      <url>%2Fposts%2F14803%2F</url>
      <content type="text"><![CDATA[è§£å†³TableViewCellå’ŒUICollectionViewCellä½¿ç”¨è¿‡ç¨‹ä¸­å› ä¸ºé‡ç”¨æœºåˆ¶é—®é¢˜é€ æˆæ•°æ®é‡å¤æ˜¾ç¤ºæˆ–è€…å¸ƒå±€é”™ä¹±é—®é¢˜ã€‚ å¸¸è§„é…ç½®å¦‚ä¸‹ å½“è¶…è¿‡tableViewæ˜¾ç¤ºçš„èŒƒå›´çš„æ—¶å€™ åŽé¢æ˜¾ç¤ºçš„å†…å®¹å°†ä¼šå’Œå‰é¢é‡å¤ 123456789101112131415161718192021// è¿™æ ·é…ç½®çš„è¯è¶…è¿‡é¡µé¢æ˜¾ç¤ºçš„å†…å®¹ä¼šé‡å¤å‡ºçŽ°- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath&#123; // å®šä¹‰å”¯ä¸€æ ‡è¯† static NSString *CellIdentifier = @&quot;Cell&quot;; // é€šè¿‡å”¯ä¸€æ ‡è¯†åˆ›å»ºcellå®žä¾‹ UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; // åˆ¤æ–­ä¸ºç©ºè¿›è¡Œåˆå§‹åŒ– --ï¼ˆå½“æ‹‰åŠ¨é¡µé¢æ˜¾ç¤ºè¶…è¿‡ä¸»é¡µé¢å†…å®¹çš„æ—¶å€™å°±ä¼šé‡ç”¨ä¹‹å‰çš„cellï¼Œè€Œä¸ä¼šå†æ¬¡åˆå§‹åŒ–ï¼‰ if (!cell) &#123; cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier]; &#125; // å¯¹cell è¿›è¡Œç®€å•åœ°æ•°æ®é…ç½® cell.textLabel.text = @&quot;text&quot;; cell.detailTextLabel.text = @&quot;text&quot;; cell.imageView.image = [UIImage imageNamed:@&quot;4.png&quot;]; return cell;&#125;//é€šè¿‡ä»¥ä¸‹3æ–¹æ¡ˆå¯ä»¥è§£å†³ æ–¹æ¡ˆä¸€ï¼š è®©æ¯ä¸ªcelléƒ½æ‹¥æœ‰ä¸€ä¸ªå¯¹åº”çš„æ ‡è¯† è¿™æ ·åšä¹Ÿä¼šè®©cellæ— æ³•é‡ç”¨ æ‰€ä»¥ä¹Ÿå°±ä¸ä¼šæ˜¯é‡å¤æ˜¾ç¤ºäº† æ˜¾ç¤ºå†…å®¹æ¯”è¾ƒå¤šæ—¶å†…å­˜å ç”¨ä¹Ÿæ˜¯æ¯”è¾ƒå¤šçš„ 123456789101112131415161718/ /æ–¹æ¡ˆä¸€ é€šè¿‡ä¸è®©ä»–é‡ç”¨cell æ¥è§£å†³é‡å¤æ˜¾ç¤º ä¸åŒçš„æ˜¯æ¯ä¸ªcellå¯¹åº”ä¸€ä¸ªæ ‡è¯†- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath&#123; // å®šä¹‰cellæ ‡è¯† æ¯ä¸ªcellå¯¹åº”ä¸€ä¸ªè‡ªå·±çš„æ ‡è¯† NSString *CellIdentifier = [NSString stringWithFormat:@&quot;cell%ld%ld&quot;,indexPath.section,indexPath.row]; // é€šè¿‡ä¸åŒæ ‡è¯†åˆ›å»ºcellå®žä¾‹ UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; // åˆ¤æ–­ä¸ºç©ºè¿›è¡Œåˆå§‹åŒ– --ï¼ˆå½“æ‹‰åŠ¨é¡µé¢æ˜¾ç¤ºè¶…è¿‡ä¸»é¡µé¢å†…å®¹çš„æ—¶å€™å°±ä¼šé‡ç”¨ä¹‹å‰çš„cellï¼Œè€Œä¸ä¼šå†æ¬¡åˆå§‹åŒ–ï¼‰ if (!cell) &#123; cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier]; &#125; // å¯¹cell è¿›è¡Œç®€å•åœ°æ•°æ®é…ç½® cell.textLabel.text = @&quot;text&quot;; cell.detailTextLabel.text = @&quot;text&quot;; cell.imageView.image = [UIImage imageNamed:@&quot;4.png&quot;]; return cell;&#125; æ–¹æ¡ˆäºŒï¼š åŒæ ·å–æ¶ˆcellçš„é‡ç”¨æœºåˆ¶ï¼Œé€šè¿‡indexPathæ¥åˆ›å»ºcell å°†å¯ä»¥è§£å†³é‡å¤æ˜¾ç¤ºé—®é¢˜ ä¸è¿‡è¿™æ ·åšç›¸å¯¹äºŽå¤§æ•°æ®æ¥è¯´å†…å­˜å°±æ¯”è¾ƒåƒç´§äº† 123456789101112131415161718// æ–¹æ¡ˆäºŒ é€šè¿‡ä¸è®©ä»–é‡ç”¨cell æ¥è§£å†³é‡å¤æ˜¾ç¤º- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath&#123; // å®šä¹‰å”¯ä¸€æ ‡è¯† static NSString *CellIdentifier = @&quot;Cell&quot;; // é€šè¿‡indexPathåˆ›å»ºcellå®žä¾‹ æ¯ä¸€ä¸ªcelléƒ½æ˜¯å•ç‹¬çš„ UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath]; // åˆ¤æ–­ä¸ºç©ºè¿›è¡Œåˆå§‹åŒ– --ï¼ˆå½“æ‹‰åŠ¨é¡µé¢æ˜¾ç¤ºè¶…è¿‡ä¸»é¡µé¢å†…å®¹çš„æ—¶å€™å°±ä¼šé‡ç”¨ä¹‹å‰çš„cellï¼Œè€Œä¸ä¼šå†æ¬¡åˆå§‹åŒ–ï¼‰ if (!cell) &#123; cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier]; &#125; // å¯¹cell è¿›è¡Œç®€å•åœ°æ•°æ®é…ç½® cell.textLabel.text = @&quot;text&quot;; cell.detailTextLabel.text = @&quot;text&quot;; cell.imageView.image = [UIImage imageNamed:@&quot;4.png&quot;]; return cell;&#125; ###æ–¹æ¡ˆä¸‰ åªè¦æœ€åŽä¸€ä¸ªæ˜¾ç¤ºçš„cellå†…å®¹ä¸ä¸ºç©ºï¼Œç„¶åŽæŠŠå®ƒçš„å­è§†å›¾å…¨éƒ¨åˆ é™¤ï¼Œç­‰åŒäºŽæŠŠè¿™ä¸ªcellå•ç‹¬å‡ºæ¥äº† ç„¶åŽè·Ÿæ–°æ•°æ®å°±å¯ä»¥è§£å†³é‡å¤æ˜¾ç¤º 12345678910111213141516171819202122232425// æ–¹æ¡ˆä¸‰ å½“é¡µé¢æ‹‰åŠ¨éœ€è¦æ˜¾ç¤ºæ–°æ•°æ®çš„æ—¶å€™ï¼ŒæŠŠæœ€åŽä¸€ä¸ªcellè¿›è¡Œåˆ é™¤ å°±æœ‰å¯ä»¥è‡ªå®šä¹‰cell æ­¤æ–¹æ¡ˆå³å¯é¿å…é‡å¤æ˜¾ç¤ºï¼Œåˆé‡ç”¨äº†cellç›¸å¯¹å†…å­˜ç®¡ç†æ¥è¯´æ˜¯æœ€å¥½çš„æ–¹æ¡ˆ å‰ä¸¤è€…ç›¸å¯¹æ¯”è¾ƒæ¶ˆè€—å†…å­˜- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath&#123; // å®šä¹‰å”¯ä¸€æ ‡è¯† static NSString *CellIdentifier = @&quot;Cell&quot;; // é€šè¿‡å”¯ä¸€æ ‡è¯†åˆ›å»ºcellå®žä¾‹ UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; // åˆ¤æ–­ä¸ºç©ºè¿›è¡Œåˆå§‹åŒ– --ï¼ˆå½“æ‹‰åŠ¨é¡µé¢æ˜¾ç¤ºè¶…è¿‡ä¸»é¡µé¢å†…å®¹çš„æ—¶å€™å°±ä¼šé‡ç”¨ä¹‹å‰çš„cellï¼Œè€Œä¸ä¼šå†æ¬¡åˆå§‹åŒ–ï¼‰ if (!cell) &#123; cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier]; &#125; else//å½“é¡µé¢æ‹‰åŠ¨çš„æ—¶å€™ å½“cellå­˜åœ¨å¹¶ä¸”æœ€åŽä¸€ä¸ªå­˜åœ¨ æŠŠå®ƒè¿›è¡Œåˆ é™¤å°±å‡ºæ¥ä¸€ä¸ªç‹¬ç‰¹çš„cellæˆ‘ä»¬åœ¨è¿›è¡Œæ•°æ®é…ç½®å³å¯é¿å… &#123; while ([cell.contentView.subviews lastObject] != nil) &#123; [(UIView *)[cell.contentView.subviews lastObject] removeFromSuperview]; &#125; &#125; // å¯¹cell è¿›è¡Œç®€å•åœ°æ•°æ®é…ç½® cell.textLabel.text = @&quot;text&quot;; cell.detailTextLabel.text = @&quot;text&quot;; cell.imageView.image = [UIImage imageNamed:@&quot;4.png&quot;]; return cell;&#125; ç»è¿‡æµ‹è¯•UIcollectionViewCellå¸ƒå±€é”™ä¹±ç”¨ç¬¬ä¸€ç§æ–¹æ³•åŒæ ·å¯ä»¥è§£å†³é—®é¢˜ï¼Œå®žé™…è§£å†³æƒ…å†µè¿˜è¦è‡ªå·±æµ‹è¯•æ‰å¯ä»¥ã€‚ æœ€åŽè´´ä¸€ä¸ªæˆ‘çš„UIcollectionViewCellè§£å†³å¤ç”¨çš„ä»£ç  123456789101112- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath&#123; NSString *CellIdentifier = [NSString stringWithFormat:@&quot;cell%ld%ld&quot;,indexPath.section,indexPath.row]; [self.collectionView registerNib:[UINib nibWithNibName:@&quot;AudienceViewCollectionViewCell&quot; bundle:nil] forCellWithReuseIdentifier:CellIdentifier]; // é€šè¿‡ä¸åŒæ ‡è¯†åˆ›å»ºcellå®žä¾‹ AudienceViewCollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath]; &#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Swiftå‡½æ•°ä¸Žé—­åŒ…çš„åº”ç”¨å®žä¾‹]]></title>
      <url>%2Fposts%2F9416%2F</url>
      <content type="text"><![CDATA[ä»Šå¤©çš„åšå®¢ç®—æ˜¯æ¯”è¾ƒåŸºç¡€çš„ï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼ŒåŸºç¡€è¿™ä¸œè¥¿åœ¨ä»€ä¹ˆæ—¶å€™éƒ½æ˜¯æœ€é‡è¦çš„ã€‚è¯´åˆ°å‡½æ•°ï¼Œåªè¦æ˜¯å†™è¿‡ç¨‹åºå°±è‚¯å®šçŸ¥é“å‡½æ•°æ˜¯æ€Žä¹ˆå›žäº‹ï¼Œä»Šå¤©å°±æ¥è®¨è®ºä¸€ä¸‹Swiftä¸­çš„å‡½æ•°çš„ç‰¹æ€§ä»¥åŠSwiftä¸­çš„é—­åŒ…ã€‚ä»Šå¤©çš„ä¸€äº›å°å®žä¾‹ä¸­å›žç±»æ¯”ä¸€ä¸‹Objective-Cä¸­çš„å‡½æ•°çš„å†™æ³•ç­‰ç­‰ã€‚Swiftä¸­çš„å‡½æ•°è¿˜æ˜¯æœ‰è®¸å¤šå¥½ç”¨çš„ç‰¹æ€§çš„ï¼Œæ¯”å¦‚è¾“å…¥å‚æ•°ï¼Œä½¿ç”¨å…ƒç»„è¿”å›žå¤šä¸ªå€¼ï¼Œ å®šä¹‰å½¢å‚åï¼Œè®¾å®šé»˜è®¤å‚æ•°ä»¥åŠå¯å˜å‚æ•°ç­‰ç­‰ä¸€äº›å¥½ç”¨çš„ç‰¹æ€§ã€‚è€Œåœ¨Swiftä¸­çš„é—­åŒ…å°±æ˜¯Objective-Cä¸­çš„Block, é™¤äº†è¯­æ³•ä¸é€šå¤–ï¼Œä¸¤è€…çš„ç”¨æ³•æ˜¯ä¸€æ ·çš„ã€‚åºŸè¯å°‘è¯´ï¼Œå¼€å§‹ä»Šå¤©çš„ä¸»é¢˜ï¼Œå…ˆæžä¸€æžSwiftä¸­çš„å‡½æ•°ï¼Œç„¶åŽåœ¨æžä¸€æžSwiftä¸­çš„é—­åŒ…ã€‚ ä¸€.Swiftä¸­çš„å‡½æ•° 1. å‡½æ•°çš„å®šä¹‰ä¸Žä½¿ç”¨ åœ¨ä»‹ç»Swiftä¸­çš„å‡½æ•°ä¹‹å‰ï¼Œæˆ‘æƒ³ç”¨Objective-Cä¸­çš„ä¸€ä¸ªç®€å•çš„åŠ æ³•å‡½æ•°æ¥ä½œä¸ºå¼•å­ï¼Œç„¶åŽç±»æ¯”ç€å®žçŽ°ä¸€ä¸‹Swiftä¸­ç›¸åŒåŠŸèƒ½çš„å‡½æ•°ã€‚å…³äºŽå‡½æ•°å®šä¹‰å°±æ¯”è¾ƒç®€å•äº†ï¼Œå°±æ˜¯ä¸€äº›è¯­æ³•çš„ä¸œè¥¿ï¼Œä¸‹é¢çš„ä»£ç ç‰‡æ®µæ˜¯Objcä¸­æ±‚ä¸¤ä¸ªæ•´æ•°ä¹‹å’Œçš„å‡½æ•°ï¼Œå¹¶è¿”å›žä¸¤ä¸ªæ•°çš„å’Œã€‚- (NSInteger)sumNumber1:(NSInteger) number1 number2:(NSInteger) number2 { return number1 + number2;} å‡½æ•°çš„åŠŸèƒ½æ¯”è¾ƒç®€å•äº†ï¼Œå°±æ˜¯æŠŠä¸¤ä¸ªæ•´æ•°ä¼ è¿›æ¥ï¼Œç„¶åŽè¿”å›žä¸¤ä¸ªæ•´æ•°çš„å’Œã€‚æŽ¥ä¸‹æ¥å°†ç”¨Swiftè¯­è¨€å®žçŽ°ï¼Œä¹Ÿå¥½é€šè¿‡è¿™ä¸ªå®žä¾‹æ¥ç†Ÿæ‚‰ä¸€ä¸‹Swiftè¯­è¨€ä¸­å®šä¹‰å‡½æ•°çš„è¯­æ³•ã€‚ä¸‹æ–¹æ˜¯Swiftè¯­è¨€ä¸­æ±‚ä¸¤ä¸ªæ•´æ•°ä¹‹å’Œçš„å‡½æ•°ã€‚è¯­æ³•æ¯”è¾ƒç®€å•äº†ï¼Œåœ¨Swiftä¸­å®šä¹‰å‡½æ•°ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨åˆ°å…³é”®å­—funcæ¥å£°æ˜Žå‡½æ•°ã€‚1 //å‡½æ•°å®šä¹‰2 func sum (number1:Int, number2:Int) -&gt; Int{3 return number1 + number2;4 } ç”¨æ–‡å­—æ¥æè¿°Swiftå®šä¹‰åŸºæœ¬å‡½æ•°çš„è¯­æ³•å°±æ˜¯: func å‡½æ•°å ï¼ˆå½¢å‚åˆ—è¡¨ï¼‰ -&gt; è¿”å›žå€¼ç±»åž‹ { å‡½æ•°ä½“}ï¼Œè¿™æ ·ä½ å°±å¯ä»¥å®šä¹‰ä¸€ä¸ªå‡½æ•°äº†ã€‚å½“ç„¶ï¼Œå‡½æ•°å®šä¹‰æ—¶è¿˜æœ‰å¥½å¤šå…¶ä»–çš„ç”¨æ³•ï¼Œä¸‹é¢ä¼šè¯¦ç»†ä»‹ç»ã€‚ä¸Šé¢å‡½æ•°çš„è°ƒç”¨æ–¹æ³•å¦‚ä¸‹ï¼š1 let sumTwoNubmer = sum(2, number2: 3);&nbsp; 2. å‡½æ•°ä¸­çš„å½¢å‚åˆ—è¡¨ å…³äºŽå‡½æ•°ä¸­çš„å½¢å‚åˆ—è¡¨è¿˜æ˜¯æœ‰å¿…è¦æä¸Šä¸€å˜´çš„ï¼Œå› ä¸ºå½¢å‚åˆ—è¡¨ä½œä¸ºå‡½æ•°æ•°æ®æºä¹‹ä¸€ï¼Œæ‰€ä»¥æŠŠå‚æ•°åˆ—è¡¨å¥½å¥½çš„æžä¸€æžè¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚å‚æ•°åˆ—è¡¨ä¹Ÿæœ‰å¾ˆå¤šå¥½ç”¨çš„ä½¿ç”¨æ–¹å¼ï¼ŒæŽ¥ä¸‹æ¥è¯¦ç»†çš„ä»‹ç»ä¸€ä¸‹å‡½æ•°çš„å½¢å‚åˆ—è¡¨ã€‚ (1) é»˜è®¤çš„å½¢å‚æ˜¯å¸¸é‡ï¼ˆletï¼‰ åœ¨å‡½æ•°çš„å½¢å‚åˆ—è¡¨ä¸­ï¼Œé»˜è®¤çš„å½¢å‚æ˜¯å¸¸é‡ã€‚ä¹Ÿå°±æ˜¯ç›¸å½“äºŽç”¨letå…³é”®å­—å¯¹å½¢å‚è¿›è¡Œä¿®é¥°äº†ã€‚æˆ‘ä»¬å¯ä»¥åšä¸ªè¯•éªŒï¼ŒæŠŠä¸Šé¢åŠ æ³•å‡½æ•°åšä¸€ä¸ªä¿®æ”¹ï¼Œåœ¨åŠ æ³•å‡½æ•°ä¸­å¯¹number1è¿›è¡ŒåŠ 1æ“ä½œï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œè¿™ä¸ªé”™è¯¯çš„å¤§ä½“æ„æ€å°±æ˜¯&ldquo;number1æ˜¯ä¸å¯è¢«ä¿®æ”¹çš„ï¼Œå› ä¸ºå®ƒæ˜¯letç±»åž‹çš„å¸¸é‡&rdquo;ã€‚å¹¶ä¸”ç¼–è¯‘å™¨è¿˜ç»™äººå‡ºäº†Fix-itï¼ˆä¿®å¤ï¼‰çš„æ–¹æ¡ˆï¼Œå°±æ˜¯åœ¨number1å‰é¢ä½¿ç”¨varå…³é”®å­—è¿›è¡Œä¿®é¥°ï¼Œä½¿å…¶æˆä¸ºå˜é‡ï¼Œè¿™æ ·æ‰å¯ä»¥ä¿®æ”¹å…¶å€¼ã€‚ ä¸Šé¢è¯´è¿™ä¹ˆå¤šï¼Œä¸€å¥è¯ï¼šå½¢å‚é»˜è®¤æ˜¯å¸¸é‡ï¼Œå¦‚æžœä½ æƒ³è®©å…¶æ˜¯å˜é‡ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨varå…³é”®å­—è¿›è¡Œä¿®é¥°ï¼Œè¿™æ ·è¢«å…³é”®å­—varä¿®é¥°çš„å˜é‡åœ¨å‡½æ•°ä¸­å°±å¯ä»¥è¢«ä¿®æ”¹ã€‚ä¸‹æ–¹å°±æ˜¯æŠ¥çš„è¿™ä¸ªé”™è¯¯ï¼Œå’Œç¼–è¯‘å™¨æä¾›çš„è§£å†³æ–¹æ¡ˆã€‚ï¼ˆåœ¨Objcä¸­é»˜è®¤å¯ä»¥åœ¨å‡½æ•°ä¸­æ”¹å˜å½¢å‚çš„å€¼ï¼‰&nbsp; ï¼ˆ2ï¼‰ç»™å½¢å‚å‘½å ä¸ºäº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæˆ‘ä»¬åœ¨å®šä¹‰å‡½æ•°æ—¶ï¼Œéœ€è¦ä¸ºæ¯ä¸ªå‚æ•°åä¸€ä¸ªåå­—ï¼Œè¿™æ ·è°ƒç”¨è€…è§åçŸ¥æ„ï¼Œå¾ˆå®¹æ˜“å°±çŸ¥é“è¿™ä¸ªå‚æ•°ä»£è¡¨ä»€ä¹ˆæ„æ€äº†ã€‚æŽ¥ä¸‹æ¥è¿˜æ˜¯åœ¨ä¸Šè¿°åŠ æ³•å‡½æ•°ä¸­è¿›è¡Œä¿®æ”¹ï¼Œä¸ºæ¯ä¸ªå‚æ•°åä¸€ä¸ªåå­—ï¼Œå¹¶çœ‹ä¸€ä¸‹è°ƒç”¨æ–¹å¼ã€‚ä¿®æ”¹ä¸Šé¢çš„å‡½æ•°ï¼Œç»™ç¬¬ä¸€ä¸ªå½¢å‚å‘½åæˆnumberOne, ç¬¬äºŒä¸ªå½¢å‚ä¸ºnumberTwo, ä¸‹æ–¹æ˜¯ä¿®æ”¹åŽçš„å‡½æ•°ã€‚ ç´§æŽ¥ç€sum()å‡½æ•°çš„è°ƒç”¨æ–¹å¼ä¹Ÿä¼šæœ‰æ‰€æ”¹å˜ï¼Œåœ¨è°ƒç”¨å‡½æ•°æ—¶ç¼–è¯‘å™¨ä¼šç»™å‡ºå‚æ•°çš„åç§°ï¼Œè¿™æ ·è°ƒç”¨è€…ä¸€ç›®äº†ç„¶ã€‚1 //å‡½æ•°å®šä¹‰2 func sum (numberOne number1:Int, numberTwo number2:Int) -&gt; Int{3 return number1 + number2;4 }56 let sumTwoNubmer = sum(numberOne: 10, numberTwo: 20); &nbsp;è°ƒç”¨ä¸Šè¿°å‡½æ•°æ—¶ï¼Œä¸‹æ–¹æ˜¯ç¼–è¯‘å™¨ç»™å‡ºçš„æç¤ºï¼Œä¸€ç›®äº†ç„¶å‘¢ã€‚ å…³äºŽSwiftä¸­å‚æ•°åçš„å†…å®¹ï¼Œè¦è¯´æ˜Žçš„æ˜¯åœ¨Swift1.0çš„æ—¶å€™ï¼Œä½ å¯ä»¥åœ¨å‚æ•°å‰é¢æ·»åŠ ä¸Š#å·ï¼Œç„¶åŽå‚æ•°åå°±ä¸Žå˜é‡ï¼ˆæˆ–è€…å¸¸é‡ï¼‰çš„åå­—ç›¸åŒï¼Œè€ŒSwift2.0åŽè¿™ä¸ªä¸œè¥¿åŽ»æŽ‰äº†ï¼Œå› ä¸ºé»˜è®¤å°±ç›¸å½“äºŽSwift1.0ä¸­æ·»åŠ #å·ã€‚&nbsp; (3) å‡½æ•°çš„ä¼ å‚ä¸Žä¼ å¼•ç”¨ å…ˆæš‚ä¸”è¿™ä¹ˆè¯´ç€ï¼Œåœ¨Cè¯­è¨€çš„å‡½æ•°ä¸­å¯ä»¥ç»™å‡½æ•°ä¼ å…¥å‚æ•°ï¼Œæˆ–è€…ä¼ å…¥å®žå‚çš„å†…å­˜åœ°å€å°±æ˜¯æ‰€è°“çš„ä¼ å¼•ç”¨ã€‚å¦‚æžœä¼ å…¥çš„æ˜¯å¼•ç”¨çš„è¯ï¼Œåœ¨å‡½æ•°ä¸­å¯¹å€¼è¿›è¡Œä¿®æ”¹çš„è¯ï¼Œé‚£ä¹ˆå‡ºäº†å‡½æ•°ï¼Œè¿™ä¸ªè¢«ä¿®æ”¹çš„å€¼æ˜¯å¯ä»¥è¢«ä¿ç•™çš„ã€‚åœ¨Swiftä¸­ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä¸è¿‡ä½ éœ€è¦ä½¿ç”¨inoutå…³é”®å­—ä¿®é¥°å½¢å‚ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨è¯¥å‡½æ•°æ—¶ï¼Œç”¨&amp;æ¥ä¿®é¥°ã€‚è¿™ä¸€ç‚¹å’ŒCè¯­è¨€ä¸­ç±»ä¼¼ï¼Œ&amp;å°±æ˜¯å–åœ°å€ç¬¦ã€‚ä¸‹æ–¹æ˜¯inoutä½¿ç”¨çš„ä¸€ä¸ªå°å®žä¾‹ã€‚1 func incrementStepTwo (inout myNumber:Int) {2 myNumber += 23 }4 var myTestNumber = 65 incrementStepTow(&amp;myTestNumber) //myTestNumber = 8 myTestNumberå˜é‡ç»è¿‡incrementStepTwo()å‡½æ•°åŽï¼Œå…¶å€¼å°±ä¼šå¢žåŠ 2ã€‚å½“ç„¶å‰ææ˜¯myTestNumberæ˜¯å˜é‡ï¼Œå¦‚æžœmyTestNumberæ˜¯å¸¸é‡çš„è¯ï¼Œé‚£ä¹ˆå¯¹ä¸èµ·ï¼Œè°ƒç”¨è¯¥å‡½æ•°å°±ä¼šæŠ¥é”™ï¼Œä¸‹é¢æ˜¯æŠŠvaræ”¹æˆletåŽIDEç»™çš„é”™è¯¯æç¤ºã€‚é”™è¯¯åŽŸå› å¾ˆæ˜¾ç„¶æ˜¯ä½ åŠ¨äº†ä¸€ä¸ªä¸è¯¥åŠ¨çš„å€¼ï¼Œä¹Ÿå°±æ˜¯å¸¸é‡ä¸å¯å†æ¬¡è¢«ä¿®æ”¹çš„ã€‚&nbsp; (4) ä¸å®šå‚æ•°å‡½æ•° ä¸å®šå‚æ•°å‡½æ•°ä¹Ÿå°±æ˜¯å½¢å‚çš„ä¸ªæ•°æ˜¯ä¸å®šçš„ï¼Œä½†æ˜¯å½¢å‚çš„ç±»åž‹å¿…é¡»æ˜¯ç›¸åŒçš„ã€‚ä¸å®šå½¢å‚åœ¨ä½¿ç”¨æ—¶æ€Žä¹ˆå–å‘¢ï¼Ÿä¸å®šä¸ªæ•°çš„å½¢å‚å®žé™…ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡forå¾ªçŽ¯çš„å½¢å¼æ¥éåŽ†å‡ºæ¯ä¸ªå½¢å‚çš„å€¼ï¼Œç„¶åŽä½¿ç”¨å°±å¯ä»¥äº†ã€‚ä¸‹æ–¹incrementMultableAdd()å‡½æ•°çš„å½¢å‚çš„ä¸ªæ•°æ˜¯ä¸å®šçš„ï¼Œå…¶åŠŸèƒ½æ˜¯æ±‚å¤šä¸ªæ•´æ•°çš„å’Œã€‚åœ¨å‡½æ•°ä¸­æˆ‘ä»¬åªéœ€éåŽ†æ¯ä¸ªå‚æ•°ï¼Œç„¶åŽæŠŠæ¯ä¸ªå‚æ•°è¿›è¡Œç›¸åŠ ï¼Œæœ€åŽè¿”å›žæ‰€æ±‚çš„å’Œå³å¯ã€‚å‡½æ•°æ¯”è¾ƒç®€å•ï¼Œå†æ­¤å°±ä¸åœ¨å•°å—¦äº†ã€‚&nbsp; (5) é»˜è®¤å½¢å‚å€¼ åœ¨Swiftè¯­è¨€ä¸­æ˜¯æ”¯æŒç»™å½¢å‚èµ‹åˆå§‹å€¼çš„ï¼Œè¿™ä¸€ç‚¹åœ¨å…¶ä»–ä¸€äº›ç¼–ç¨‹è¯­è¨€ä¸­ä¹Ÿæ˜¯æ”¯æŒçš„ã€‚ä½†æ˜¯Objective-Cè¿™ä¹ˆçœ‹ä¼¼å¤è€çš„è¯­è¨€ä¸­å°±ä¸æ”¯æŒç»™å½¢å‚æŒ‡å®šåˆå§‹å€¼ï¼Œåœ¨Swiftè¿™é—¨çŽ°ä»£ç¼–ç¨‹è¯­è¨€ä¸­æ˜¯æ”¯æŒè¿™ä¸€ç‰¹æ€§çš„ã€‚é»˜è®¤å‚æ•°è¦ä»Žå‚æ•°åˆ—è¡¨åŽå¼€å§‹ä¸ºå‚æ•°æŒ‡å®šé»˜è®¤å€¼ï¼Œä¸ç„¶å°±ä¼šæŠ¥é”™ã€‚ä¸‹æ–¹å°±æ˜¯ä¸ºå‡½æ•°çš„å½¢å‚æŒ‡å®šé»˜è®¤å‚æ•°çš„ç¤ºä¾‹ã€‚ä¸€ä¸ªè¡¨ç™½çš„æ–¹æ³•sayLove(), å½¢å‚youNameé»˜è®¤æ˜¯&ldquo;å±±ä¼¯&rdquo;ï¼Œ å½¢å‚loverNameé»˜è®¤æ˜¯&ldquo;è‹±å°&rdquo;ã€‚ ç´§æŽ¥ç€æ˜¯sayLoveå‡½æ•°çš„ä¸‰ç§ä¸åŒçš„è°ƒç”¨æ–¹å¼ï¼Œåœ¨è°ƒç”¨å‡½æ•°æ—¶ä½ å¯ä»¥ä¸ä¼ å‚æ•°ï¼Œå¯ä»¥ä¼ ä¸€ä¸ªå‚æ•°ï¼Œå½“ç„¶ä¼ ä¸¤ä¸ªä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚&nbsp; å› ä¸ºå‡½æ•°çš„æ¯ä¸ªå‚æ•°éƒ½æ˜¯æœ‰åå­—çš„ï¼Œåœ¨å«æœ‰é»˜è®¤å‚æ•°çš„å‡½æ•°è°ƒç”¨æ—¶ï¼Œå¯ä»¥ç»™ä»»æ„ä¸€ä¸ªå‚æ•°è¿›è¡Œä¼ å€¼ï¼Œå…¶ä»–å‚æ•°å–é»˜è®¤å€¼ï¼Œè¿™ä¹Ÿæ˜¯Swiftçš„ä¸€å¤§ç‰¹è‰²ä¹‹ä¸€ï¼Œå…·ä½“è¯·çœ‹å¦‚ä¸‹ç®€å•çš„ä»£ç ç¤ºä¾‹ï¼š&nbsp; 3.å‡½æ•°ç±»åž‹ æ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„æ‰€å±žç±»åž‹ï¼Œå‡½æ•°ç±»åž‹è¯´ç™½äº†å°±æ˜¯å¦‚æžœä¸¤ä¸ªå‡½æ•°å‚æ•°åˆ—è¡¨ç›¸åŒä»¥åŠè¿”å›žå€¼ç±»åž‹ç›¸åŒï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå‡½æ•°å°±æœ‰ç€ç›¸åŒçš„å‡½æ•°ç±»åž‹ã€‚åœ¨Swiftä¸­å¯ä»¥å®šä¹‰ä¸€ä¸ªå˜é‡æˆ–è€…å¸¸é‡æ¥å­˜å‚¨ä¸€ä¸ªå‡½æ•°çš„ç±»åž‹ã€‚æŽ¥ä¸‹æ¥å°†ç”¨è¿‡ä¸€ä¸ªå®žä¾‹è¿˜ä»‹ç»ä¸€ä¸‹å‡½æ•°ç±»åž‹æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ã€‚ &nbsp; (1) é¦–å…ˆåˆ›å»ºä¸¤ä¸ªå‡½æ•°ç±»åž‹ç›¸åŒçš„å‡½æ•°ï¼Œä¸€ä¸ªå‡½æ•°è¿”å›žä¸¤ä¸ªæ•´æ•°çš„å·®å€¼ï¼Œå¦ä¸€ä¸ªå‡½æ•°è¿”å›žä¸¤ä¸ªæ•´æ•°çš„ä¹˜ç§¯ã€‚å½“ç„¶è¿™ä¸¤ä¸ªå‡½æ•°æ¯”è¾ƒç®€å•ï¼Œç›´æŽ¥ä¸Šä»£ç ï¼š1 //çŽ°å®šä¹‰ä¸¤ä¸ªå‡½æ•°ç±»åž‹ç›¸åŒçš„å‡½æ•°2 func diff (number1:Int, number2:Int) -&gt; Int {3 return number1 - number2;4 }56 func mul (number1:Int, number2:Int) -&gt; Int {7 return number1 number2;8 } (2) å‡½æ•°å®šä¹‰å¥½åŽï¼ŒæŽ¥ç€è¦å®šä¹‰ä¸ªä¸€ä¸ªæžšä¸¾æ¥æžšä¸¾æ¯ç§å‡½æ•°çš„ç±»åž‹ï¼Œä¸‹é¢å®šä¹‰è¿™ä¸ªæžšä¸¾åœ¨é€‰æ‹©å‡½æ•°æ—¶ä¼šç”¨åˆ°ï¼Œæžšä¸¾å®šä¹‰å¦‚ä¸‹ï¼š1 //å®šä¹‰ä¸¤ç§è®¡ç®—çš„æžšä¸¾ç±»åž‹2 enum CountType:Int {3 case DiffCount = 04 case MulCount5 } (3) æŽ¥ä¸‹æ¥å°±æ˜¯æŠŠ(1)å’Œ(2)ä¸­å®šä¹‰çš„ä¸œè¥¿é€šè¿‡ä¸€ä¸ªå‡½æ•°æ¥ç»„åˆèµ·æ¥ã€‚è¯´ç™½äº†ï¼Œå°±æ˜¯å®šä¹‰ä¸ªå‡½æ•°æ¥é€šè¿‡æžšä¸¾å€¼è¿”å›žè¿™ä¸ªæžšä¸¾å€¼æ‰€å¯¹åº”çš„å‡½æ•°ç±»åž‹ã€‚æœ‰æ—¶å€™è¯´å¤šäº†å®¹æ˜“çŠ¯è¿·ç³Šï¼Œå°±ç›´æŽ¥ä¸Šä»£ç å¾—äº†ã€‚ä¸‹æ–¹å‡½æ•°çš„åŠŸèƒ½å°±æ˜¯æ ¹æ®ä¼ è¿›æ¥çš„æžšä¸¾å€¼æ¥è¿”å›žç›¸åº”çš„å‡½æ•°ç±»åž‹ã€‚ 1 //é€‰æ‹©ç±»åž‹çš„å‡½æ•°ï¼Œå¹¶è¿”å›žç›¸åº”çš„å‡½æ•°ç±»åž‹ 2 func choiseCountType(countType:CountType) -&gt; ((Int, Int) -&gt; Int) { 3 //å‡½æ•°ç±»åž‹å˜é‡ 4 var myFuncType:(Int, Int) -&gt; Int 5 6 switch countType { 7 case .DiffCount: 8 myFuncType = diff 9 case .MulCount:10 myFuncType = mul11 }12 return myFuncType;13 } (4) æŽ¥ä¸‹æ¥å°±æ˜¯ä½¿ç”¨(3)ä¸­å®šä¹‰çš„å‡½æ•°äº†ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªç›¸åº”å‡½æ•°ç±»åž‹((Int, Int) -&gt; Int)çš„å˜é‡æ¥æŽ¥æ”¶choiseCountType()å‡½æ•°ä¸­è¿”å›žçš„å‡½æ•°ç±»åž‹ï¼Œç„¶åŽè°ƒç”¨è¯¥å‡½æ•°ç±»åž‹å˜é‡ï¼Œåœ¨Playgroundä¸­æ‰§è¡Œçš„ç»“æžœå¦‚ä¸‹ï¼š&nbsp; &nbsp; &nbsp;4.å‡½æ•°åµŒå¥— æˆ‘ä»¬å¯ä»¥æŠŠ 3 ä¸­çš„ä»£ç ä½¿ç”¨å‡½æ•°åµŒå¥—è¿›è¡Œé‡å†™ï¼Œåœ¨Swiftä¸­æ˜¯æ”¯æŒå‡½æ•°åµŒå¥—çš„ã€‚ æ‰€ä»¥å¯ä»¥å§3.1å’Œ3.2ä¸­çš„å‡½æ•°æ”¾åˆ°3.3å‡½æ•°ä¸­çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¯¹ä¸Šè¿°ä»£ç ä½¿ç”¨å‡½æ•°åµŒå¥—è¿›è¡Œé‡å†™ã€‚ä½¿ç”¨å‡½æ•°åµŒå¥—é‡å†™åŽçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼Œå½“ç„¶ï¼ŒchoiseCountType()å‡½æ•°çš„è°ƒç”¨æ–¹å¼æ²¡ç”¨å‘ç”Ÿæ”¹å˜ï¼Œé‡å†™åŽçš„è°ƒç”¨æ–¹å¼å’Œ3.4ä¸­çš„è°ƒç”¨æ–¹å¼æ˜¯ä¸€æ ·ä¸€æ ·çš„ã€‚ 1 //é€‰æ‹©ç±»åž‹çš„å‡½æ•°ï¼Œå¹¶è¿”å›žç›¸åº”çš„å‡½æ•°ç±»åž‹ 2 func choiseCountType(countType:CountType) -&gt; ((Int, Int) -&gt; Int) { 3 4 //çŽ°å®šä¹‰ä¸¤ä¸ªå‡½æ•°ç±»åž‹ç›¸åŒçš„å‡½æ•° 5 func diff (number1:Int, number2:Int) -&gt; Int { 6 return number1 - number2; 7 } 8 9 func mul (number1:Int, number2:Int) -&gt; Int {10 return number1 number2;11 }121314 //å‡½æ•°ç±»åž‹å˜é‡15 var myFuncType:(Int, Int) -&gt; Int1617 switch countType {18 case .DiffCount:19 myFuncType = diff20 case .MulCount:21 myFuncType = mul22 }23 return myFuncType;24 }&nbsp; äºŒ. é—­åŒ… è¯´é“Swiftä¸­çš„é—­åŒ…å‘¢ï¼Œä¸å¾—ä¸æçš„å°±æ˜¯Objective-Cä¸­çš„Block, å…¶å®žä¸¤è€…æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œä½¿ç”¨æ–¹å¼ä»¥åŠä½¿ç”¨åœºæ™¯éƒ½æ˜¯ç›¸åŒçš„ã€‚æˆ‘ä»¬å®Œå…¨å¯ä»¥ç±»æ¯”ç€Objective-Cä¸­çš„Blockæ¥ä»‹ç»ä¸€ä¸‹Swiftä¸­çš„Closureï¼ˆé—­åŒ…ï¼‰ã€‚å…¶å®žå°±æ˜¯åŒ¿åå‡½æ•°ã€‚æŽ¥ä¸‹æ¥çš„è¿™æ®µå†…å®¹ï¼Œå…ˆä»‹ç»ä¸€ä¸‹Swiftä¸­Closureçš„åŸºæœ¬è¯­æ³•ï¼Œç„¶åŽåœ¨ç±»æ¯”ç€ObjCä¸­çš„Blockçª¥æŽ¢ä¸€ä¸‹Closureçš„ä½¿ç”¨åœºæ™¯ã€‚ 1.Closureå˜é‡çš„å£°æ˜Ž Closureå°±æ˜¯åŒ¿åå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªé—­åŒ…å˜é‡ï¼Œè€Œè¿™ä¸ªé—­åŒ…å˜é‡çš„ç±»åž‹å°±æ˜¯æˆ‘ä»¬ä¸Šé¢ä»‹ç»çš„&ldquo;å‡½æ•°ç±»åž‹&rdquo;ã€‚å®šä¹‰ä¸€ä¸ªé—­åŒ…å˜é‡å…¶å®žå°±æ˜¯å®šä¹‰ä¸€ä¸ªç‰¹å®šå‡½æ•°ç±»åž‹çš„å˜é‡ï¼Œæ–¹å¼å¦‚ä¸‹ã€‚å› ä¸ºClosureå˜é‡æ²¡æœ‰èµ‹åˆå§‹å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå…¶å£°æ˜Žä¸ºå¯é€‰ç±»åž‹çš„å˜é‡ã€‚åœ¨ä½¿ç”¨æ—¶ï¼Œç”¨!å¼ºåˆ¶æ‰“å¼€å³å¯ã€‚1 var myCloure0:((Int, Int) -&gt; Int)? é™¤äº†ä¸Šé¢çš„æ–¹å¼å¤–ï¼Œæˆ‘ä»¬è¿˜ç”¨å¦ä¸€ç§å¸¸ç”¨çš„å£°æ˜Žé—­åŒ…å˜é‡çš„æ–¹å¼ã€‚é‚£å°±æ˜¯ä½¿ç”¨å…³é”®å­—typealiaså®šä¹‰ä¸€ä¸ªç‰¹å®šå‡½æ•°ç±»åž‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‹¿ç€è¿™ä¸ªç±»åž‹åŽ»å£°æ˜Žä¸€ä¸ªClosureå˜é‡äº†ï¼Œå¦‚ä¸‹æ‰€ç¤º1 //å®šä¹‰é—­åŒ…ç±»åž‹ (å°±æ˜¯ä¸€ä¸ªå‡½æ•°ç±»åž‹)2 typealias MyClosureType = (Int, Int) -&gt; Int3 var myCloure:MyClosureType?&nbsp; 2. ç»™Closureå˜é‡èµ‹å€¼ ç»™Closureå˜é‡èµ‹å€¼ï¼Œå…¶å®žå°±æ˜¯æŠŠä¸€ä¸ªå‡½æ•°ä½“èµ‹å€¼ç»™ä¸€ä¸ªå‡½æ•°ç±»åž‹çš„å˜é‡ï¼Œå’Œå‡½æ•°çš„å®šä¹‰åŒºåˆ«ä¸å¤§ã€‚ä½†æ˜¯ç»™é—­åŒ…å˜é‡èµ‹å€¼çš„å‡½æ•°ä½“ä¸­å«æœ‰å‚æ•°åˆ—è¡¨ï¼Œå¹¶ä¸”å‚æ•°åˆ—è¡¨å’ŒçœŸæ­£çš„å‡½æ•°ä½“ä¹‹é—´ä½¿ç”¨å…³é”®å­—inæ¥åˆ†å‰²ã€‚ é—­åŒ…å¯é€‰å˜é‡çš„è°ƒç”¨æ–¹å¼ä¸Žæ™®é€šå‡½æ•°æ²¡ä»€ä¹ˆä¸¤æ ·ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯è¿™ä¸ªå‡½æ•°éœ€è¦ç”¨!æ¥å¼ºåˆ¶æ‰“å¼€æ‰å¯ä»¥ä½¿ç”¨ã€‚èµ‹å€¼å’Œè°ƒç”¨æ–¹å¼å¦‚ä¸‹ã€‚&nbsp; 3. é—­åŒ…å›žè°ƒçš„åº”ç”¨å®žä¾‹ æš‚ä¸”å…ˆç§°ä½œé—­åŒ…å›žè°ƒå§ï¼Œå…¶å®žå°±æ˜¯Objcä¸­çš„Blockå›žè°ƒã€‚åœ¨Swiftä¸­çš„é—­åŒ…å›žè°ƒå’ŒObjcä¸­çš„Blockå›žè°ƒç”¨æ³•ä¸€è‡´ï¼Œä¸‹æ–¹å°†ä¼šé€šè¿‡ä¸€ä¸ªå®žä¾‹æ¥ä»‹ç»ä¸€ä¸‹é—­åŒ…çš„åº”ç”¨ä¹‹ä¸€ã€‚ä¸‹æ–¹ä¼šåˆ›å»ºä¸¤ä¸ªè§†å›¾æŽ§åˆ¶å™¨ï¼Œæˆ‘ä»¬æš‚ä¸”ç§°ä¸ºFirstViewControllerå’ŒSecondViewControllerã€‚åœ¨FirstViewControllerä¸Šæœ‰ä¸€ä¸ªLabelå’Œä¸€ä¸ªButton, è¿™ä¸ªButtonç”¨æ¥è·³è½¬åˆ°SecondViewController, è€Œè¿™ä¸ªLabelç”¨æ¥æ˜¾ç¤ºä»ŽSecondViewControllerä¸­å›žè°ƒè¿‡æ¥çš„å€¼ã€‚ è€ŒSecondViewControllerä¹Ÿæœ‰ä¸€ä¸ªTextFieldå’Œä¸€ä¸ªButton, ç‚¹å‡»Buttonå°±ä¼šæŠŠè¾“å…¥æ¡†ä¸­çš„å€¼é€šè¿‡é—­åŒ…å›žè°ƒå›žä¼ åˆ°FirstViewControllerç„¶åŽåœ¨FirstViewControllerä¸Šçš„Labelæ˜¾ç¤ºã€‚ (1) æž„å»ºè¿™ä¸ªå®žä¾‹çš„ç¬¬ä¸€æ­¥è¦åšçš„å°±æ˜¯ä½¿ç”¨StroyboardæŠŠæˆ‘ä»¬æ‰€éœ€çš„æŽ§ä»¶å¸ƒå±€å¥½ï¼Œå¹¶ä¸”ç®¡ç†ç›¸åº”çš„ç±»ã€‚å½“ç„¶æˆ‘ä»¬è¿™ä¸ªDemoçš„é‡ç‚¹ä¸åœ¨äºŽå¦‚ä½•åŽ»å¸ƒå±€æŽ§ä»¶ï¼Œå¦‚ä½•åŽ»å…³è”æŽ§ä»¶ï¼Œä»¥åŠå¦‚ä½•åŽ»ä½¿ç”¨æŽ§ä»¶ï¼Œæ‰€ä»¥ä¸Šè¿°çš„è¿™äº›å°±ä¸åšèµ˜è¿°äº†ã€‚è¿™ä¸ªå®žä¾‹çš„é‡ç‚¹åœ¨äºŽå¦‚ä½•ä½¿ç”¨Closureå®žçŽ°å€¼çš„å›žè°ƒã€‚ä¸‹æ–¹æ˜¯æˆ‘ä»¬çš„æŽ§ä»¶å¸ƒå±€å’Œç›®å½•ç»“æž„çš„æˆªå›¾ï¼Œä»ŽStoryboardä¸Šçš„æŽ§ä»¶æ¥çœ‹ï¼ŒåŠŸèƒ½ä¹Ÿå°±ä¸€ç›®äº†ç„¶äº†ã€‚ç‚¹å‡»&ldquo;FirstViewController&rdquo; ä¸Šçš„&ldquo;Go SecondViewController&rdquo;æŒ‰é’®ï¼Œå°±ä¼šè·³è½¬åˆ° &ldquo;SecondViewController&rdquo; ã€‚ åœ¨SecondViewControllerè§†å›¾ä¸Šçš„è¾“å…¥æ¡†è¾“å…¥æ•°å€¼ï¼Œç‚¹å‡»BackæŒ‰é’®è¿”å›žåˆ°FirstViewController, åŒæ—¶æŠŠè¾“å…¥æ¡†ä¸­çš„æ–‡æœ¬é€šè¿‡é—­åŒ…å›žè°ƒçš„å½¢å¼å›žä¼ è¿‡æ¥åœ¨FristViewControllerçš„labelä¸Šæ˜¾ç¤ºã€‚å¤§è‡´å°±è¿™ä¸ªç®€å•çš„åŠŸèƒ½ã€‚&nbsp; ï¼ˆ2ï¼‰FirstViewController.swiftä¸­çš„å†…å®¹ FirstViewController.swiftä¸­çš„å†…å®¹æ¯”è¾ƒç®€å•ï¼Œå°±å…³è”ä¸€ä¸ªLabelæŽ§ä»¶å’Œä¸€ä¸ªæŒ‰é’®ç‚¹å‡»çš„äº‹ä»¶ï¼Œç‚¹å‡»æŒ‰é’®å°±ä¼šè·³è½¬åˆ°SecondViewControllerï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼Œåœ¨æ­¤å°±ä¸å•°å—¦äº†ï¼Œè¯·çœ‹ä»£ç ä¸­çš„æ³¨é‡Šã€‚ä¸‹æ–¹ä»£ç é‡è¦çš„ä¸€ç‚¹æ˜¯åœ¨è·³è½¬åˆ°SecondViewControlleræ—¶è¦å®žçŽ°å…¶æä¾›çš„é—­åŒ…å›žè°ƒï¼Œä»¥ä¾¿æŽ¥å—å›žä¼ è¿‡æ¥çš„å€¼ã€‚ 1 // 2 // FirstViewController.swift 3 // SwiftDemo 4 // 5 // Created by Mr.LuDashi on 15/11/18. 6 // Copyright &copy; 2015å¹´ ZeluLi. All rights reserved. 7 // 8 9 import UIKit1011 class FirstViewController: UIViewController {1213 @IBOutlet var showTextLabel: UILabel! //å±•ç¤ºå›žè°ƒè¿‡æ¥çš„æ–‡å­—ä¿¡æ¯1415 override func viewDidLoad() {16 super.viewDidLoad()17 }1819 override func didReceiveMemoryWarning() {20 super.didReceiveMemoryWarning()21 }2223 //ç‚¹å‡»æŒ‰é’®è·³è½¬åˆ°SecondViewController24 @IBAction func tapGoSecondViewControllerButton(sender: UIButton) {25 //ä»ŽStoryboardä¸ŠåŠ è½½SecondViewController26 let secondVC = UIStoryboard(name: â€œMainâ€, bundle: NSBundle.mainBundle()).instantiateViewControllerWithIdentifier(â€œSecondViewControllerâ€)as! SecondViewController2728 //å®žçŽ°å›žè°ƒï¼ŒæŽ¥æ”¶å›žè°ƒè¿‡æ¥çš„å€¼29 secondVC.setBackMyClosure { (inputText:String) -&gt; Void in30 self.showTextLabel.text = inputText31 }3233 //pushåˆ°SecondViewController34 self.navigationController?.pushViewController(secondVC, animated: true)35 }36 }&nbsp; (3) SecondViewController.swiftä¸­çš„å†…å®¹ SecondViewController.swiftä¸­çš„å†…å®¹ä¹Ÿä¸éº»çƒ¦ï¼Œå°±æ˜¯é™¤äº†å…³è”æŽ§ä»¶å’Œäº‹ä»¶å¤–ï¼Œè¿˜å®šä¹‰äº†ä¸€ä¸ªé—­åŒ…ç±»åž‹ï¼ˆå‡½æ•°ç±»åž‹ï¼‰ï¼Œç„¶åŽä½¿ç”¨è¿™ä¸ªç‰¹å®šçš„å‡½æ•°ç±»åž‹å£°æ˜Žäº†ä¸€ä¸ªæ­¤å‡½æ•°ç±»åž‹å¯¹åº”çš„å˜é‡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå˜é‡æ¥æŽ¥å—ä¸Šä¸ªé¡µé¢ä¼ è¿‡æ¥çš„é—­åŒ…ä½“ï¼Œä»Žè€ŒæŠŠç”¨æˆ·è¾“å…¥çš„å€¼ï¼Œé€šè¿‡è¿™ä¸ªé—­åŒ…ä½“å›žä¼ åˆ°ä¸Šä¸ªé¡µé¢ã€‚å…·ä½“ä»£ç å®žçŽ°å¦‚ä¸‹ï¼š 1 // 2 // SecondViewController.swift 3 // SwiftDemo 4 // 5 // Created by Mr.LuDashi on 15/11/18. 6 // Copyright &copy; 2015å¹´ ZeluLi. All rights reserved. 7 // 8 9 import UIKit1011 typealias InputClosureType = (String) -&gt; Void //å®šä¹‰é—­åŒ…ç±»åž‹ï¼ˆç‰¹å®šçš„å‡½æ•°ç±»åž‹å‡½æ•°ç±»åž‹ï¼‰1213 class SecondViewController: UIViewController {1415 @IBOutlet var inputTextField: UITextField! //è¾“å…¥æ¡†ï¼Œè®©ç”¨æˆ·è¾“å…¥å€¼ï¼Œç„¶åŽé€šè¿‡é—­åŒ…å›žè°ƒåˆ°ä¸Šä¸€ä¸ªé¡µé¢1617 var backClosure:InputClosureType? //æŽ¥æ”¶ä¸Šä¸ªé¡µé¢ç©¿è¿‡æ¥çš„é—­åŒ…å—1819 override func viewDidLoad() {20 super.viewDidLoad()21 }2223 override func didReceiveMemoryWarning() {24 super.didReceiveMemoryWarning()25 }2627 //é—­åŒ…å˜é‡çš„Seteræ–¹æ³•28 func setBackMyClosure(tempClosure:InputClosureType) {29 self.backClosure = tempClosure30 }3132 @IBAction func tapBackButton(sender: UIButton) {33 if self.backClosure != nil {34 let tempString:String? = self.inputTextField.text35 if tempString != nil {36 self.backClosure!(tempString!)37 }38 }39 self.navigationController!.popViewControllerAnimated(true)40 }41 }&nbsp; (4) ç»è¿‡ä¸Šé¢çš„æ­¥éª¤è¿™ä¸ªå®žä¾‹å·²ç»å®Œæˆï¼ŒæŽ¥ä¸‹æ¥å°±æ˜¯çœ‹ä¸€ä¸‹è¿è¡Œæ•ˆæžœçš„æ—¶é—´äº†ã€‚æœ¬æ¥æƒ³åšæˆGitåŠ¨æ€å›¾çš„ï¼Œæ„Ÿè§‰å®žä¾‹åŠŸèƒ½ç®€å•ï¼Œè€Œä¸”UIä¸Šä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå°±æ²¡åšï¼Œè¿˜æ˜¯çœ‹æˆªå›¾å§ã€‚è¿è¡Œæ•ˆæžœçš„æˆªå›¾å¦‚ä¸‹ï¼š 4.æ•°ç»„ä¸­å¸¸ç”¨çš„é—­åŒ…å‡½æ•° åœ¨Swiftçš„æ•°ç»„ä¸­è‡ªå¸¦äº†ä¸€äº›æ¯”è¾ƒå¥½ç”¨çš„é—­åŒ…å‡½æ•°ï¼Œä¾‹å¦‚Map, Filter, Reduceã€‚æŽ¥ä¸‹æ¥å°±å¥½å¥½çš„çœ‹ä¸€ä¸‹è¿™äº›é—­åŒ…ï¼Œç”¨èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒçˆ½çš„ã€‚ (1) Map(æ˜ å°„) è¯´åˆ°Mapçš„ç”¨æ³•å’ŒåŠŸèƒ½ï¼Œä¸èƒ½ä¸è¯´çš„æ˜¯å¦‚æžœä½ ä½¿ç”¨è¿‡ReactiveCocoaæ¡†æž¶ï¼Œé‚£ä¹ˆå¯¹é‡Œè¾¹çš„Sequenceä¸­çš„Mapçš„ä½¿ç”¨æ–¹å¼å¹¶ä¸é™Œç”Ÿã€‚å…¶å®žä¸¤è€…çš„ä½¿ç”¨æ–¹æ³•å’ŒåŠŸèƒ½æ˜¯æžä¸ºç›¸ä¼¼çš„ã€‚å¦‚æžœä½ æ²¡ä½¿ç”¨è¿‡RACä¸­çš„Mapï¼Œé‚£ä¹Ÿæ— å…³ç´§è¦ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬å…ˆä¸Šæ®µä»£ç å¼€çœ‹ä¸€ä¸‹æ•°ç»„ä¸­çš„Mapé—­åŒ…å‡½æ•°ã€‚ é€šè¿‡ä¸Šé¢çš„ä»£ç æ®µä»¥åŠè¿è¡Œç»“æžœï¼Œæˆ‘ä»¬ä¸éš¾çœ‹å‡ºï¼Œmapé—­åŒ…å‡½æ•°çš„åŠŸèƒ½å°±æ˜¯å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿›è¡ŒéåŽ†ï¼Œç„¶åŽé€šè¿‡æ˜ å°„è§„åˆ™å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿›è¡Œå¤„ç†ï¼Œæœ€ç»ˆçš„è¿”å›žç»“æžœæ˜¯å¤„ç†åŽçš„æ•°ç»„ï¼ˆä»¥ä¸€ä¸ªæ–°çš„æ•°ç»„å½¢å¼å‡ºçŽ°ï¼‰ã€‚å½“ç„¶ï¼ŒåŽŸæ¥æ•°ç»„ä¸­çš„å…ƒç´ å€¼æ˜¯ä¿æŒä¸å˜çš„ï¼Œè¿™å°±æ˜¯mapé—­åŒ…å‡½æ•°çš„ç”¨æ³•ä¸ŽåŠŸèƒ½ã€‚&nbsp;&nbsp; (2) Filter (è¿‡æ»¤å™¨) Filterçš„ç”¨æ³•è¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ï¼ŒFilterå°±æ˜¯ä¸€ä¸ªæ¼å‹ºï¼Œå°±æ˜¯ç”¨æ¥è¿‡æ»¤ç¬¦åˆæ¡ä»¶çš„æ•°æ®çš„ã€‚åœ¨ReactiveCocoaä¸­çš„Sequenceä¹Ÿæ˜¯æœ‰Filterçš„ï¼Œç”¨æ³•è¿˜æ˜¯æ¥è¿‡æ»¤Sequenceä¸­çš„æ•°æ®çš„ã€‚è€Œåœ¨æ•°ç»„ä¸­çš„Filterç”¨æ¥è¿‡æ»¤æ•°ç»„ä¸­çš„æ•°æ®ï¼Œå¹¶ä¸”è¿”å›žæ–°çš„æ•°ç»„ï¼Œæ–°çš„æ•°ç»„ä¸­å­˜æ”¾çš„å°±æ˜¯ç¬¦åˆæ¡ä»¶çš„æ•°æ®ã€‚Filterçš„ç”¨æ³•å¦‚ä¸‹å®žä¾‹ï¼Œä¸‹æ–¹çš„å®žä¾‹å°±æ˜¯ä¸€ä¸ªèº«é«˜çš„è¿‡æ»¤ï¼Œè¿‡æ»¤æŽ‰èº«é«˜å°äºŽ173çš„äººï¼Œè¿”å›žå¤§äºŽç­‰äºŽ173çš„èº«é«˜æ•°æ®ã€‚ ï¼ˆ3ï¼‰Reduce&nbsp; åœ¨ReactiveCocoaä¸­ä¹Ÿæ˜¯æœ‰Reduceè¿™ä¸ªæ¦‚å¿µçš„ï¼ŒReactiveCocoaä¸­ä½¿ç”¨Reduceæ¥åˆå¹¶æ¶ˆå‡ä¿¡å·é‡ã€‚åœ¨swiftçš„æ•°ç»„ä¸­ä½¿ç”¨Reduceé—­åŒ…å‡½æ•°æ¥åˆå¹¶items, å¹¶ä¸”åˆå¹¶åŽçš„Valueã€‚ä¸‹æ–¹çš„å®žä¾‹æ˜¯ä¸€ä¸ªSalaryçš„æ•°ç»„ï¼Œå…¶ä¸­å­˜æ”¾çš„æ˜¯æ¯ä¸ªæœˆçš„è–ªæ°´ã€‚æˆ‘ä»¬è¦ä½¿ç”¨Reduceé—­åŒ…å‡½æ•°æ¥è®¡ç®—æ€»çš„è–ªæ°´ã€‚ä¸‹æ–¹æ˜¯DEMOçš„æˆªå›¾ï¼š]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Swiftå­—ç¬¦ä¸²å¸¸ç”¨æ“ä½œ]]></title>
      <url>%2Fposts%2F3254%2F</url>
      <content type="text"><![CDATA[swift ä¸­å…³äºŽå–å­ä¸²æœ‰4 ä¸ªæ–¹æ³• str.index(after: String.Index) str.index(before: String.Index) str.index(String.Index, offsetBy: String.IndexDistance) str.index(String.Index, offsetBy: String.IndexDistance, limitedBy: String.Index) åˆ†åˆ«æ˜¯ä»€ä¹ˆ, è¯¥å¦‚ä½•ä½¿ç”¨?ä¸‹é¢æ¥çœ‹çœ‹æœ¬ä¾‹ä¸­, æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²"Hello, playground" , å¦‚ä¸‹ var str = "Hello, playground" å­—ç¬¦ç´¢å¼• startIndex å’Œ endIndex startIndex æ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•, ä¹Ÿå°±æ˜¯ endIndex æ˜¯æœ€åŽä¸€ä¸ªå­—ç¬¦ç´¢å¼• +1 // character str[str.startIndex] // H str[str.endIndex] // error: after last character // range let range = str.startIndex ..&lt; str.endIndex str[range] // "Hello, playground" after index(after: String.Index)after æŒ‡å‘ç»™å®šç´¢å¼•åŽé¢çš„ä¸€ä¸ªç´¢å¼•(ç±»ä¼¼ä¸Ž + 1) // character let index = str.index(after: str.startIndex) str[index] // "e" // range let range = str.index(after: str.startIndex)..&lt;str.endIndex str[range] // "ello, playground" before index(before: String.Index)before æŒ‡å‘ç»™å®šç´¢å¼•ä¹‹å‰çš„ä¸€ä¸ªç´¢å¼•(ç±»ä¼¼ä¸Ž - 1) // character let index = str.index(before: str.endIndex) str[index] // d // range let range = str.startIndex ..&lt; str.index(before: str.endIndex) str[range] // Hello, playgroun offsetBy index(String.Index, offsetBy: String.IndexDistance)offsetBy çš„å€¼å¯ä»¥ä¸ºæ­£æˆ–æ˜¯è´Ÿ, æ­£åˆ™è¡¨ç¤ºå‘åŽ, è´Ÿåˆ™ç›¸å.åˆ«è¢«offsetBy çš„ String.IndexDistance ç±»åž‹å“åˆ°, æœ¬èº«å…¶å®žæ˜¯ä¸€ä¸ª Int.(ç±»ä¼¼äºŽ+n å’Œ -n) // characterlet index = str.index(str.startIndex, offsetBy: 7)str[index] // p // rangelet start = str.index(str.startIndex, offsetBy: 7)let end = str.index(str.endIndex, offsetBy: -6)let range = start ..&lt; endstr[range] // play limitedBy index(String.Index, offsetBy: String.IndexDistance, limitedBy: String.Index) limitedBy åœ¨ offset è¿‡å¤§å¯¼è‡´æº¢å‡ºé”™è¯¯çš„æ—¶å€™å¾ˆæœ‰ç”¨.è¿™ä¸ªè¿”å›žå€¼æ˜¯ä¸€ä¸ªå¯é€‰å€¼, å¦‚æžœ offsetBy è¶…è¿‡äº† limitBy, åˆ™è¿”å›ž nil. // characterif let index = str.index(str.startIndex, offsetBy: 7, limitedBy: str.endIndex) {str[index] // p} ä¸Šé¢è¿™æ®µä»£ç ä¸­å¦‚æžœoffset è®¾ç½®ä¸º 77, è¿”å›žå€¼å°±æ˜¯ nil, if ä¸­çš„ä»£ç å°±ä¼šè·³è¿‡ æ‰€ä»¥å¦‚æžœä½ è¦å–å­ä¸²çš„æ­£ç¡®å§¿åŠ¿æ˜¯ä»€ä¹ˆ? å–æŸä¸ªä½ç½®ä¹‹åŽçš„æ‰€æœ‰å­—ç¬¦str.substring(from: str.index(str.startIndex, offsetBy: 7)) // playgroundå–å€’æ•°æŸä¸ªä½ç½®ä¹‹åŽçš„æ‰€æœ‰å­—ç¬¦str.substring(from: str.index(str.endIndex, offsetBy: -10)) //playgroundå–æŸä¸ªä½ç½®ä¹‹å‰çš„æ‰€æœ‰å­—ç¬¦str.substring(to: str.index(str.startIndex, offsetBy: 5)) //Helloå–å€’æ•°æŸä¸ªä½ç½®ä¹‹å‰çš„æ‰€æœ‰å­—ç¬¦str.substring(to: str.index(str.endIndex, offsetBy: -12)) //Helloå–ä¸­é—´çš„æŸä¸ªå­—ç¬¦ä¸²str.substring(with: str.index(str.startIndex, offsetBy: 7) ..&lt; str.index(str.endIndex, offsetBy: -6)) // play]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[myResume]]></title>
      <url>%2Fposts%2F10633%2F</url>
      <content type="text"><![CDATA[ç®€åŽ†é¢„è§ˆçŽ‹æ£®ç”·|æœªå©š|1992å¹´2æœˆç”Ÿ| æˆ·å£ï¼šæ²³å—-å—é˜³| çŽ°å±…ä½äºŽ:åŒ—äº¬-æœé˜³åŒº2.5å¹´å·¥ä½œç»éªŒ |å›¢å‘˜Tel:15617877692 E-mailï¼šsslxws@163.comæ±‚èŒæ„å‘å·¥ä½œæ€§è´¨ï¼šå…¨èŒæœŸæœ›èŒä¸šï¼šiOSå¼€å‘å·¥ç¨‹å¸ˆæœŸæœ›è¡Œä¸šï¼šäº’è”ç½‘æŠ€æœ¯å¼€å‘å·¥ä½œåœ°åŒºï¼šåŒ—äº¬æœŸæœ›æœˆè–ªï¼šé¢è®®ç›®å‰çŠ¶å†µï¼šæˆ‘ç›®å‰åœ¨èŒï¼Œæ­£è€ƒè™‘æ¢ä¸ªæ–°çŽ¯å¢ƒï¼ˆå¦‚æœ‰åˆé€‚çš„å·¥ä½œæœºä¼šï¼Œåˆ°å²—æ—¶é—´2ä¸ªæ˜ŸæœŸå·¦å³ï¼‰ä¸“ä¸šæŠ€èƒ½1.ç†Ÿç»ƒæŽŒæ¡Object-Cã€Swiftè¯­è¨€å¼€å‘ï¼Œç†Ÿæ‚‰Cè¯­è¨€ã€htmlã€cssï¼Œä»¥åŠJavaScpritçš„ç®€å•ä½¿ç”¨2.ç†Ÿæ‚‰ runtime ä»¥åŠ runloop3. ç†Ÿæ‚‰å¹¶æŽŒæ¡å¤šçº¿ç¨‹æŠ€æœ¯ï¼Œå¦‚ NSThreadã€GCDã€NSOpeartionï¼›4.ç†Ÿæ‚‰MRC ARC å†…å­˜ç®¡ç†æœºåˆ¶5.ç†Ÿç»ƒä½¿ç”¨Core Animationã€UIViewå¼€å‘åŠ¨ç”»6.ç†Ÿç»ƒä½¿ç”¨WebStormå¹¶æŽŒæ¡H5ä¸ŽiOSäº¤äº’7.ç†Ÿç»ƒæŽŒæ¡ç™¾åº¦åœ°å›¾ã€é«˜å¾·åœ°å›¾çš„å®šä½ã€å¯¼èˆªã€è‡ªå®šä¹‰æ ‡æ³¨ã€åœ°ç†ç¼–ç ç­‰åŠŸèƒ½ã€‚ 8.ç†Ÿç»ƒä½¿ç”¨æ”¯ä»˜å®æ”¯ä»˜ã€å¾®ä¿¡æ”¯ä»˜ã€é“¶è”æ”¯ä»˜ç­‰å¤šç§æ”¯ä»˜æ–¹å¼ã€‚9.ç†Ÿç»ƒä½¿ç”¨æŽ¨é€é€šçŸ¥ï¼Œè‡ªå®šä¹‰æ¶ˆæ¯çš„å¤„ç†ã€‚10.æŽŒæ¡Instruments leakså†…å­˜æ£€æµ‹ä»¥åŠå•å…ƒæµ‹è¯•æå‡ç¨‹åºçš„ç¨³å®šæ€§ã€‚11.ç†Ÿç»ƒä½¿ç”¨å„ç§è®¾è®¡æ¨¡å¼ï¼Œå¦‚MVC æ¨¡å¼ï¼ˆMVVMæ¨¡å¼ï¼‰ã€ä»£ç†æ¨¡å¼ã€å•ä¾‹æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ç­‰è®¾è®¡æ¨¡å¼ 12.ç†Ÿç»ƒä½¿ç”¨AFNetworkingã€SDWebImage,Masonryç¬¬ä¸‰æ–¹æ¡†æž¶13. ç†Ÿæ‚‰ SourceTreeã€Github ä»£ç ç®¡ç†å·¥å…·,jenkinså¯æŒç»­å¼€å‘è‡ªæˆ‘è¯„ä»·å¯¹äºŽiOSçš„æŠ€æœ¯æ°´å¹³å¯ä»¥å•ç‹¬åšå®Œæ•´ä¸ªé¡¹ç›®,è´Ÿè´£å„ä¸ªæ¨¡å—çš„å¼€å‘è°ƒè¯•ã€‚æœ‰è¾ƒå¼ºçš„å­¦ä¹ èƒ½åŠ›å’ŒæŽ¢ç´¢ç²¾ç¥žã€‚å·¥ä½œç»åŽ†2016/06 â€“ è‡³ä»Š åŒ—äº¬æ˜“èšåˆ›æ„ç§‘æŠ€æœ‰é™å…¬å¸|iOSå¼€å‘å·¥ç¨‹å¸ˆ è¡Œä¸šç±»åˆ«ï¼š äº’è”ç½‘/ç”µå­å•†åŠ¡|è§„æ¨¡ï¼š100-499äºº|èŒä½æœˆè–ªï¼š15000-25000å…ƒ/æœˆå·¥ä½œæè¿°ï¼šå¸¦é¢†å›¢é˜Ÿå…±åŒå¼€å‘â€˜å…¨èšæ˜Ÿâ€™ç›´æ’­Appï¼Œæ­å»ºgitlabä»£ç ç®¡ç†å·¥å…·é…ç½®çŽ¯å¢ƒï¼Œæ­å»ºç¦…é“é¡¹ç›®ç®¡ç†Bugåé¦ˆå¤„ç†å·¥å…·ï¼Œæ­å»ºJenkinsæŒç»­é›†æˆé…ç½®çŽ¯å¢ƒï¼Œè®¾è®¡é¡¹ç›®æ¡†æž¶ï¼›å®žçŽ°ç›´æ’­æ¨¡å—ï¼Œå•†åŸŽæ¨¡å—ï¼Œç§ä¿¡èŠå¤©ï¼›è¾…åŠ©å…¶ä»–å¼€å‘æˆå‘˜è§£å†³ç–‘éš¾é—®é¢˜ï¼Œä¿®å¤Bug,æ ¹æ®å¼€å‘æ—¥æœŸåˆ†é…ä»»åŠ¡2015/09 â€“ 2016/05åŒ—äº¬é’ç±ç§‘æŠ€æœ‰é™å…¬å¸|iOSå·¥ç¨‹å¸ˆ è¡Œä¸šç±»åˆ«ï¼š äº’è”ç½‘/ç”µå­å•†åŠ¡|è§„æ¨¡ï¼š100-499äºº|èŒä½æœˆè–ªï¼š10001-15000å…ƒ/æœˆå·¥ä½œæè¿°ï¼š ç‹¬ç«‹å¼€å‘â€œç†å¤§å¸ˆâ€appçš„ç”¨æˆ·ç«¯ï¼Œè´Ÿè´£æ•´ä¸ªé¡¹ç›®çš„æ¡†æž¶ã€é€»è¾‘å¤„ç†ä»¥åŠå„ä¸ªæ¨¡å—çš„å¼€å‘ï¼Œåœ°å›¾å®šä½ poi æœç´¢ å¯¼èˆªï¼Œå¾®ä¿¡æ”¯ä»˜å’Œæ”¯ä»˜å®æ”¯ä»˜ï¼ŒæŽ¨é€é€šçŸ¥ï¼Œé…åˆåŽå°å’Œwebå‰ç«¯äº¤äº’å¤„ç†h5ç•Œé¢ï¼Œç»´æŠ¤å‡çº§ã€‚ å®žçŽ°ä¸€ä¸ªå¯ä»¥åœ¨çº¿é¢„çº¦ä¸‹å•ä¸Šé—¨æŽ¨æ‹¿çš„å¥åº·åŒ»ç–—æœåŠ¡ã€‚ï¼ˆåŒ…å«ç”¨æˆ·ç«¯ä¸ŽåŒ»ç”Ÿç«¯ï¼‰2014/10 â€“ 2015/09åŒ—äº¬æº¥è”ä¿¡æ¯ç§‘æŠ€æœ‰é™å…¬å¸|iOSå¼€å‘å®žä¹ ç”Ÿ è¡Œä¸šç±»åˆ«ï¼š äº’è”ç½‘/ç”µå­å•†åŠ¡|ä¼ä¸šæ€§è´¨ï¼šäº‹ä¸šå•ä½|è§„æ¨¡ï¼š20-99äºº|èŒä½æœˆè–ªï¼š6001-8000å…ƒ/æœˆå·¥ä½œæè¿°ï¼šå¿«åœAppæ‰‹æœºç«¯çš„å¼€å‘ï¼Œæ ¹æ®éœ€æ±‚è¿›è¡ŒiOSå¹³å°å®¢æˆ·ç«¯è½¯ä»¶çš„å¼€å‘å’Œç»´æŠ¤,è®¾è®¡é¡¹ç›®æ¡†æž¶ï¼Œå®žçŽ°ç•Œé¢å±•ç¤ºä¸ŽåŽå°è°ƒè¯•apiå®Œå–„é¡¹ç›®åŠŸèƒ½ï¼Œç»´æŠ¤å‡çº§ã€‚ å®žçŽ°äº†ä¸€ä¸ªå¯ä»¥å¿«é€Ÿåœè½¦ä¸ºè½¦ä¸»æä¾›ä¾¿æ·ç²¾å‡†å¯é çš„åœè½¦æœåŠ¡ï¼ˆç²¾å‡†å®šä½ï¼Œé¢„çº¦åœè½¦ï¼Œåœè½¦å¯¼èˆªï¼Œæ™ºèƒ½è®¡æ—¶ï¼Œåœ¨çº¿æ”¯ä»˜ï¼‰ ä¸šç»©æè¿°ï¼šè´Ÿè´£é¡¹ç›®æ‰€æœ‰æ¿å—çš„å¼€å‘ï¼Œ ç‹¬è‡ªè§£å†³å¿«åœAppé¦–é¡µåŠ è½½åœ°å›¾è‡ªå®šä¹‰ä¸Šåƒä¸ªæ ‡æ³¨ç‚¹çš„å¡é¡¿çŽ°è±¡ï¼Œå®žçŽ°åŒºåŸŸæ ‡æ³¨ç‚¹ä¸Žå…¨å±€æ ‡æ³¨ç‚¹çš„åˆ‡æ¢ï¼Œæé«˜ç¨‹åºçš„æµç•…åº¦ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚ç¦»èŒåŽŸå› ï¼šé¡¹ç›®ç»éªŒ2016/06 â€“ è‡³ä»Š å…¨èšæ˜Ÿç›´æ’­è´£ä»»æè¿°ï¼šå¸¦é¢†iOSå¼€å‘ç»„å…±åŒå¼€å‘â€˜å…¨èšæ˜Ÿâ€™ç›´æ’­Appï¼Œæ­å»ºgitlabä»£ç ç®¡ç†å·¥å…·é…ç½®çŽ¯å¢ƒï¼Œæ­å»ºç¦…é“é¡¹ç›®ç®¡ç†Bugåé¦ˆå¤„ç†å·¥å…·ï¼Œæ­å»ºJenkinsæŒç»­é›†æˆé…ç½®çŽ¯å¢ƒï¼Œè®¾è®¡é¡¹ç›®æ¡†æž¶ï¼›å®žçŽ°ç›´æ’­æ¨¡å—ï¼Œå•†åŸŽæ¨¡å—ï¼Œç§ä¿¡èŠå¤©ï¼›è¾…åŠ©å…¶ä»–å¼€å‘æˆå‘˜è§£å†³ç–‘éš¾é—®é¢˜ï¼Œä¿®å¤Bug,æ ¹æ®å¼€å‘æ—¥æœŸåˆ†é…ä»»åŠ¡ã€‚é¡¹ç›®ç®€ä»‹ï¼šå…¨èšæ˜Ÿæ˜¯ç”±é¦™æ¸¯ä¸Šå¸‚ä¼ä¸š-ä¸­å›½åˆ›æ„é›†å›¢æ–¥å·¨èµ„æ‰“é€ çš„å›½å†…é¦–å®¶è‰ºäººå…»æˆäº’åŠ¨å¹³å°ã€‚æˆ‘ä»¬ä»¥èµµè–‡ã€ä½Ÿå¤§ä¸ºç­‰æ˜Žæ˜Ÿè‚¡ä¸œä¸ºæ”¯ç‚¹ã€ä¸“ä¸šåŒ–çš„è‰ºäººåŸ¹å…»æœºåˆ¶ä¸ºä¿éšœï¼Œ é«˜å“è´¨çš„äº’åŠ¨è§†é¢‘å†…å®¹ä¸ºè·³æ¿ã€ä¸ºæ‰è‰ºæ–°äººæä¾›å…¨æ–¹ä½çš„åŸ¹å…»ã€åŒ…è£…ä½“ç³»ã€‚å…¨èšæ˜Ÿç§¯æžæŽ¢ç´¢ç¬¦åˆå›½å†…ä¸šæ€å‘å±•éœ€è¦çš„æ–°åž‹å¨±ä¹ç»æµŽäº§ä¸šæ¨¡å¼ï¼Œæ±‡èšäº’åŠ¨ç»¼è‰ºç›´æ’­ã€æ˜Žæ˜Ÿç›´æ’­ã€æ‰è‰ºç›´æ’­ç­‰é«˜å“è´¨äº’åŠ¨è§†é¢‘å†…å®¹ï¼ŒçŽ‡å…ˆå¼€å¯å…¨æ°‘äº’åŠ¨å¨±ä¹2.0æµªæ½®ã€‚2015/09 â€“ 2016/05ç†å¤§å¸ˆç”¨æˆ·ç«¯å’Œç®¡ç†ç«¯è´£ä»»æè¿°ï¼šç‹¬ç«‹å¼€å‘â€œç†å¤§å¸ˆâ€appçš„ç”¨æˆ·ç«¯ï¼Œè´Ÿè´£æ•´ä¸ªé¡¹ç›®çš„æ¡†æž¶ã€é€»è¾‘å¤„ç†ä»¥åŠå„ä¸ªæ¨¡å—çš„å¼€å‘ï¼Œåœ°å›¾å®šä½ poi æœç´¢ å¯¼èˆªï¼Œå¾®ä¿¡æ”¯ä»˜å’Œæ”¯ä»˜å®æ”¯ä»˜ï¼ŒæŽ¨é€é€šçŸ¥ï¼Œé…åˆåŽå°å’Œwebå‰ç«¯äº¤äº’å¤„ç†h5ç•Œé¢ï¼Œç»´æŠ¤å‡çº§ã€‚é¡¹ç›®ç®€ä»‹ï¼šç†å¤§å¸ˆä»¥ä¸­åŒ»ç†ç–—æŽ¨æ‹¿ä¸ºæ ¸å¿ƒçš„O2Oå¥åº·ç†ç–—ä¸Šé—¨æœåŠ¡çš„å¹³å°ã€‚ä¸“æ³¨å¥åº·ï¼Œè´´å¿ƒæœåŠ¡ï¼Œä»¥ç™¾å¹´ä¼ æ‰¿çš„ä¸­åŒ»å…»ç”ŸåŒ»ç–—ä½“ç³»ä¸ºæ ¸å¿ƒï¼Œèžåˆè¥¿åŒ»åŠç¾Žå¼æ•´è„Šç–—æ³•å…ˆè¿›çš„æ£€æµ‹ä¸Žå¥åº·ç®¡ç†æ–¹æ³•ï¼Œä¸ºç”¨æˆ·æä¾›å®šåˆ¶åŒ–çš„ååŒ»å¤§å¸ˆå¥åº·ç†ç–—æœåŠ¡ã€‚2014/10 â€“ 2015/09å¿«åœè´£ä»»æè¿°ï¼šå¿«åœAppæ‰‹æœºç«¯çš„å¼€å‘ï¼Œæ ¹æ®éœ€æ±‚è¿›è¡ŒiOSå¹³å°å®¢æˆ·ç«¯è½¯ä»¶çš„å¼€å‘å’Œç»´æŠ¤,è®¾è®¡é¡¹ç›®æ¡†æž¶ï¼Œå®žçŽ°ç•Œé¢å±•ç¤ºä¸ŽåŽå°è°ƒè¯•apiå®Œå–„é¡¹ç›®åŠŸèƒ½ï¼Œç»´æŠ¤å‡çº§ã€‚é¡¹ç›®ç®€ä»‹ï¼š&nbsp;&nbsp;å¿«åœå¸æœºç«¯:ä¸ºè½¦ä¸»æä¾›ä¾¿æ·ç²¾å‡†å¯é çš„åœè½¦æœåŠ¡ï¼ˆç²¾å‡†å®šä½ï¼Œåœè½¦å¯¼èˆªï¼Œæ™ºèƒ½è®¡æ—¶ï¼Œåœ¨çº¿æ”¯ä»˜ï¼‰ï¼Œä¸ºè½¦ä¸»å½»åº•è§£å†³åŸŽå¸‚å‡ºè¡Œä¸­åœè½¦éš¾çš„é—®é¢˜ï¼ŒåŒæ—¶ä¸ºåœè½¦åœºæä¾›æ™ºèƒ½å¼•å¯¼ï¼Œå¹³å°æ”¯ä»˜ï¼Œé«˜æ•ˆç®¡ç†ï¼Œå®žçŽ°åœè½¦åœºæ•ˆçŽ‡ä¸Žæ”¶ç›Šæœ€ä¼˜åŒ–.&nbsp;&nbsp;&nbsp;&nbsp; æ•™è‚²ç»åŽ†2016/07 â€“ è‡³ä»Š éƒ‘å·žå¤§å­¦è¿œç¨‹æ•™è‚²|è®¡ç®—æœºç§‘å­¦ä¸ŽæŠ€æœ¯|æœ¬ç§‘|éžç»Ÿæ‹›2013/09 â€“ 2015/06æ²³å—å¹¿æ’­ç”µè§†å¤§å­¦|æœºæ¢°è®¾è®¡åˆ¶é€ åŠå…¶è‡ªåŠ¨åŒ–|å¤§ä¸“|ç»Ÿæ‹›è¯­è¨€èƒ½åŠ›è‹±è¯­ ï¼šè¯»å†™èƒ½åŠ›ç†Ÿç»ƒ| å¬è¯´èƒ½åŠ›è‰¯å¥½]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Hexoé…åˆgithubæ­å»ºå…è´¹åšå®¢ï¼Œç»‘å®šåŸŸå]]></title>
      <url>%2Fposts%2F10450%2F</url>
      <content type="text"><![CDATA[å‡ºå‘ç‚¹ï¼šæœ‰é‚£ä¹ˆå¤§çš„åšå®¢å¹³å°ä¸ç”¨ä¸ºä»€ä¹ˆè‡ªå·±æ­å»ºåšå®¢ï¼Œè¯´ç™½äº†å°±æ˜¯çŽ©çŽ©åšæŒå†™å‡ ç¯‡åšå®¢ç„¶åŽå°±æ˜¯è£…é€¼äº†å‘—ã€‚æœ¬ç¯‡æ–‡ç« åœ¨æˆ‘çš„ç®€ä¹¦åœ°å€ä»Šå¤©è¦è®²çš„æ­å»ºåšå®¢æ•™ç¨‹å¾ˆç®€å•ä¸éœ€è¦ä»€ä¹ˆé’±å½“ç„¶æœ‰é’±å¯ä»¥ä¹°è™šæ‹Ÿæœºé…ä¸ªæ•°æ®åº“å¯ä»¥çŽ©wordpressæ­å»ºåšå®¢æ›´ç®€å•ï¼Œè®°å¾—ä¸‡ç½‘æœ‰æ´»åŠ¨å‡ å—é’±å°±å¯ä»¥ä¹°ä¸ªä¸€å¹´çš„è™šæ‹Ÿæœºæ´»åŠ¨é•¿æœŸæœ‰å¯ä»¥çœ‹çœ‹ï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†ä»‹ç»äº†ã€‚è¨€å½’æ­£ä¼ ï¼Œæœ¬ç¯‡åšå®¢è¯´çš„æ˜¯ç”¨githubå’Œ Hexoæ­å»ºä¸€ä¸ªå…è´¹çš„åšå®¢ç½‘ç«™ï¼Œæ­å»ºå®Œçœ‹èµ·æ¥åƒè¿™æ · http://ws1227.github.io å¦‚æžœæœ‰ä¸ªäººåŸŸåå°±å¯ä»¥ç±»ä¼¼è¿™æ ·http://wangsen.website/ åŽè¾¹å†ä»‹ç»ã€‚ å…ˆè¯´ä¸‹éœ€è¦çš„åŸºæœ¬æ¡ä»¶ï¼šå®‰è£…Nodeï¼ˆå¿…é¡»ï¼‰ ä½œç”¨ï¼šç”¨æ¥ç”Ÿæˆé™æ€é¡µé¢çš„ åˆ°Node.jså®˜ç½‘ä¸‹è½½ç›¸åº”å¹³å°çš„æœ€æ–°ç‰ˆæœ¬ï¼Œä¸€è·¯å®‰è£…å³å¯ã€‚æä¾›ä¸€ä¸ªmacç‰ˆæœ¬çš„https://pan.baidu.com/s/1gf5NSyf ä¸ç”¨ç¿»å¢™ä¸‹è½½äº†å®‰è£…Gitï¼ˆå¿…é¡»ï¼‰ä½œç”¨ï¼šæŠŠæœ¬åœ°çš„hexoå†…å®¹æäº¤åˆ°githubä¸ŠåŽ». å®‰è£…Xcodeå°±è‡ªå¸¦æœ‰Gitï¼Œæˆ‘å°±ä¸å¤šè¯´äº†ã€‚æ²¡æœ‰çš„è¯å¯ä»¥åŽ»https://git-scm.com/downloads ä¸‹è½½ç”³è¯·GitHubï¼ˆå¿…é¡»ï¼‰ä½œç”¨ï¼šæ˜¯ç”¨æ¥åšåšå®¢çš„è¿œç¨‹åˆ›åº“ã€åŸŸåã€æœåŠ¡å™¨ä¹‹ç±»çš„ï¼Œæ€Žä¹ˆä¸Žæœ¬åœ°hexoå»ºç«‹è¿žæŽ¥ç­‰ä¸‹è®²ã€‚ githubè´¦å·æˆ‘ä¹Ÿä¸å†å•°å—¦äº†,æ²¡æœ‰çš„è¯ç›´æŽ¥ç”³è¯·å°±è¡Œäº†ï¼Œè·Ÿä¸€èˆ¬çš„æ³¨å†Œè´¦å·å·®ä¸å¤šï¼ŒSSH Keysï¼Œçœ‹ä½ è‡ªå·±äº†ï¼Œå¯ä»¥ä¸é…åˆ¶ï¼Œä¸é…ç½®çš„è¯ä»¥åŽæ¯æ¬¡å¯¹è‡ªå·±çš„åšå®¢æœ‰æ”¹åŠ¨æäº¤çš„æ—¶å€™å°±è¦æ‰‹åŠ¨è¾“å…¥è´¦å·å¯†ç ï¼Œé…ç½®äº†å°±ä¸éœ€è¦äº†ï¼Œæ€Žä¹ˆé…ç½®æˆ‘å°±ä¸å¤šè¯´äº†ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹ã€‚å®‰è£…HexoNodeå’ŒGitéƒ½å®‰è£…å¥½åŽï¼Œå¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…hexoï¼š1$ sudo npm install -g hexoåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¦‚ï¼šBlogï¼Œcdåˆ°Blogé‡Œæ‰§è¡Œhexo initçš„ã€‚å‘½ä»¤ï¼š1hexo initå¥½å•¦ï¼Œè‡³æ­¤ï¼Œå…¨éƒ¨å®‰è£…å·¥ä½œå·²ç»å®Œæˆï¼å› ä¸ºHexoç¼–å†™çš„æ–‡ç« éƒ½æ˜¯ç”¨ markdownè¯­æ³•å†™çš„ æ‰€ä»¥éœ€è¦ç”Ÿæˆé™æ€ç•Œé¢ä¹Ÿå°±æ˜¯Htmlç½‘é¡µã€‚ ç”Ÿæˆé™æ€é¡µé¢ç»§ç»­åœ¨åˆšæ‰çš„Blogç›®å½•ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œç”Ÿæˆé™æ€é¡µé¢ 1hexo generate ï¼ˆhexo g ç¼©å†™ä¹Ÿå¯ä»¥ï¼‰ æœ¬åœ°å¯åŠ¨å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼Œè¿›è¡Œæ–‡ç« é¢„è§ˆè°ƒè¯•ï¼Œå‘½ä»¤ï¼š 1hexo server ï¼ˆhexo s ç¼©å†™ä¹Ÿå¯ä»¥ï¼‰ å¼€å¯æœ¬åœ°é¢„è§ˆæœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:4000 å³å¯çœ‹åˆ°å†…å®¹ï¼Œå¾ˆå¤šäººä¼šç¢°åˆ°æµè§ˆå™¨ä¸€ç›´åœ¨è½¬åœˆä½†æ˜¯å°±æ˜¯åŠ è½½ä¸å‡ºæ¥çš„é—®é¢˜ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯å› ä¸ºç«¯å£å ç”¨çš„ç¼˜æ•…ï¼Œå› ä¸º4000è¿™ä¸ªç«¯å£å¤ªå¸¸è§äº† ï¼Œå¯ä»¥æ›´æ¢ä¸ªç«¯å£å· ç„¶åŽå†æ‰§è¡Œ hexo s12hexo server -p 5000 #æ›´æ”¹ç«¯å£éšæ„å†™hexo server -i 192.168.1.1 #è‡ªå®šä¹‰ IPè¿è¡ŒæˆåŠŸåŽæŒ‰Control+Lå¯ä»¥åœæ­¢ å¦‚æžœç›´æŽ¥ç”¨Hexo så¯åŠ¨ä¼šæç¤ºé”™è¯¯ å°±æ˜¯å·²ç»è¢«å ç”¨äº† æ‰€ä»¥æ­£ç¡®çš„å‘½ä»¤åº”è¯¥æ˜¯12hexo clean #æ¸…é™¤ç¼“å­˜ ç½‘é¡µæ­£å¸¸æƒ…å†µä¸‹å¯ä»¥å¿½ç•¥æ­¤æ¡å‘½ä»¤hexo g #ç”Ÿæˆé™æ€ç½‘é¡µä¸Šè¾¹ç®—æ˜¯æ­å»ºäº†ä¸€ä¸ªæœ¬åœ°çš„åšå®¢ç³»ç»Ÿäº† ç„¶åŽå°±æ˜¯é…ç½®Gitäº†ç”¨gitå°±å¯ä»¥æŠŠåšå®¢ç§»åŠ¨åˆ°è¿œç¨‹æœåŠ¡å™¨è®¿é—®ç±»ä¼¼æˆ‘çš„åšå®¢åœ°å€http://ws1227.github.ioé…ç½®Githubå»ºç«‹Repositoryå»ºç«‹ä¸Žä½ ç”¨æˆ·åå¯¹åº”çš„ä»“åº“ï¼Œä»“åº“åå¿…é¡»ä¸ºã€useame.github.ioã€‘å¦‚ä¸‹å›¾æˆ‘çš„ï¼Œå›ºå®šå†™æ³• å»ºç«‹å…³è” æ‰“å¼€Blogåœ¨æœ¬åœ°/Users/wangsen/Blogï¼ŒBlogæ˜¯ä¹‹å‰å»ºHexoçš„æ–‡ä»¶ï¼Œæœ‰ï¼š12345678910Blog ï½œ ï½œï¼ï¼ _config.yml ï½œï¼ï¼ node_modules ï½œï¼ï¼ public ï½œï¼ï¼ source ï½œï¼ï¼ db.json ï½œï¼ï¼ package.json ï½œï¼ï¼ scaffolds ï½œï¼ï¼ themes çŽ°åœ¨æˆ‘ä»¬éœ€è¦æ‰“å¼€_config.ymlæ–‡ä»¶ï¼Œæ¥å»ºç«‹å…³è”ï¼Œå‘½ä»¤ï¼š å¦‚æžœç»ˆç«¯ä¸æ˜¯åœ¨Blogç›®å½•å°±cdåˆ°è¯¥ç›®å½•æ‰§è¡Œå‘½ä»¤ 1vim _config.yml æˆ‘å»ºè®®ç”¨sublimeç¿»åˆ°æœ€ä¸‹é¢ï¼Œæ”¹æˆæˆ‘è¿™æ ·å­çš„ï¼Œæ³¨æ„ : åŽé¢è¦æœ‰ä¸ªç©ºæ ¼repositoryåœ°å€æ¢æˆä½ è‡ªå·±çš„gitåœ°å€1234deploy: type: git repository: https://github.com/ws1227/ws1227.github.io.git branch: masteræ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ‰èƒ½ä½¿ç”¨gitéƒ¨ç½²1npm install hexo-deployer-git â€“saveé…ç½®å‘½ä»¤ï¼šä½œç”¨å°±æ˜¯æŠŠblogç›®å½•ä¸‹çš„Publicç›®å½•ä¸‹çš„æ–‡ä»¶ä¸Šä¼ è‡³gitä»“åº“1hexo deploy ç„¶åŽå†æµè§ˆå™¨ä¸­è¾“å…¥å°±è¡Œäº†http://ws1227.github.io/ï¼Œæˆ‘çš„ github çš„è´¦æˆ·å« ws1227 ,æŠŠè¿™ä¸ªæ”¹æˆä½  github çš„è´¦æˆ·åå°±è¡Œäº†æ¯æ¬¡ä¿®æ”¹åšå®¢æ–‡ä»¶åŽéƒ½éœ€è¦ä»Žæ–°éƒ¨ç½²123hexo cleanhexo generatehexo deployä¸€äº›å¸¸ç”¨å‘½ä»¤ï¼šhttp://www.jianshu.com/p/eb02029f7a81HEXOä¸»é¢˜ å¦‚æžœä½ åˆ°äº†è¿™é‡Œæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œé‚£ä¹ˆæ­å–œä½ å·²ç»æˆåŠŸäº†ï¼Œä¸è¿‡è¿™æ‰åˆšåˆšå¼€å§‹ã€‚å½“ä½ æˆåŠŸçš„çœ‹åˆ°è‡ªå·±åšå®¢æ­å»ºå¥½çš„é‚£ä¸€åˆ»åˆæ˜¯æ¿€åŠ¨åˆæ˜¯å¤±æœ›ï¼Œæ¿€åŠ¨çš„æ˜¯åšå®¢æ€»ç®—æŠ˜è…¾å‡ºæ¥äº†ï¼Œå¤±æœ›çš„æ˜¯ï¼Œä¸ºä½•å¦‚æ­¤çš„ä¸‘ã€‚ã€‚ã€‚è¯´å®žè¯Hexoé»˜è®¤çš„ä¸»é¢˜æˆ‘ä¸å–œæ¬¢ï¼Œå¦‚æžœä½ æƒ³æ¢é£Žæ ¼,Hexoçš„ä¸»é¢˜ç½‘ä¸Šéšä¾¿ä¸€æœä¹Ÿæœ‰å¾ˆå¤šã€‚åœ¨æ­¤ç¬”è€…ä½¿ç”¨çš„åšå®¢ä¸»é¢˜æ˜¯Next.Piscesï¼ˆå›½äººå†™çš„ï¼‰ã€‚https://github.com/iissnan/hexo-theme-next ä½œè€…å¾ˆè¯¦ç»†çš„ä½¿ç”¨æ–‡æ¡£åŸŸåç»‘å®šï¼ˆç¬¬ä¸‰æ­¥ï¼Œå¯é€‰ï¼‰ç¬”è€…æ˜¯åœ¨ä¸‡ç½‘ä¹°çš„åŸŸåï¼ˆhttp://wangsen.website/ï¼‰ã€‚ åŸŸåä¹°å¥½ä¹‹åŽæäº¤å®žåè®¤è¯ç­‰ï¼Œè¿™äº›æ“ä½œå°±ä¸åœ¨èµ˜è¿°ã€‚åŸŸåè´­ä¹°åœ°å€ã€‚ä»·æ ¼è¡¨ï¼šhttps://wanwang.aliyun.com/help/price.html?spm=5176.8076989.339865.8.yRl9gUé€‰æ‹©è‡ªå·±å–œæ¬¢åˆèƒ½æŽ¥å—ä»·æ ¼çš„åŸŸåå§ åŸŸåæ˜¯éœ€è¦æ¯å¹´éƒ½ä»˜é’±çš„ï¼Œçœ‹æ¸…æ¥šç»­è´¹ä»·æ ¼å†ä¸‹æ‰‹ã€‚ä¹°å®ŒåŸŸååŽè¿›å…¥åŸŸåç®¡ç†åŽå°æ·»åŠ è§£æž,ä¸‹å›¾æˆ‘æ·»åŠ è§£æžåŽçš„ã€‚è¯´ä¸‹è¿™ä¸ªè®°å½•å€¼å°±æ˜¯ipåœ°å€å¾—èŽ·å–æ–¹å¼ï¼Œæ‰“å¼€ç»ˆç«¯pingä¸‹è‡ªå·±çš„gitä»“åº“ å‘½ä»¤å¦‚ä¸‹æ ¼å¼1ping ws1227.github.ioçœ‹åˆ°å¦‚ä¸‹æ•°æ®ï¼Œå°±çœ‹åˆ°è¿™ä¸ªipåœ°å€äº†123456PING github.map.fastly.net (151.101.100.133): 56 data bytes64 bytes from 151.101.100.133: icmp_seq=0 ttl=50 time=105.119 msRequest timeout for icmp_seq 164 bytes from 151.101.100.133: icmp_seq=2 ttl=50 time=105.448 ms64 bytes from 151.101.100.133: icmp_seq=3 ttl=50 time=104.788 ms64 bytes from 151.101.100.133: icmp_seq=4 ttl=50 time=103.319 msç„¶åŽåœ¨ä½ çš„æœ¬åœ°ç«™ç‚¹ç›®å½•é‡Œçš„sourceç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ªCNAMEæ–‡ä»¶ï¼Œä¸å¸¦åŽç¼€ï¼Œå¯ä»¥ç”¨ç»ˆç«¯åˆ‡æ¢åˆ°sourceç›®å½•ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤å¦‚ä¸‹1vim CNAMEå†…å®¹æ˜¯åŸŸååœ°å€ä¸å¸¦wwwå’Œhttp å°±ç±»ä¼¼æˆ‘çš„æ˜¯ wangsen.websiteå¡«å†™å®Œäº†ä¹‹åŽå†é‡æ–°éƒ¨ç½²åˆ°github pagesä¸Šï¼ˆéƒ¨ç½²ç®€å†™å‘½ä»¤hexo d -g)æ‰“å¼€è‡ªå·±çš„åšå®¢å°½æƒ…æ‰“å¼€å„ç§è¹‚èºå§]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Hello World]]></title>
      <url>%2Fposts%2F16107%2F</url>
      <content type="text"><![CDATA[æ–°çš„ä¸€ç‰‡å¤©]]></content>
    </entry>

    
  
  
</search>
